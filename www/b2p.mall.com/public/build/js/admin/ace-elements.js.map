{"version":3,"sources":["ace-elements.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ace-elements.js","sourcesContent":["/*!\r\n * Ace v1.4.0\r\n */\r\n\r\nif (typeof jQuery === 'undefined') { throw new Error('Ace\\'s JavaScript requires jQuery') }\r\n\r\n/**\r\n <b>Ace custom scroller</b>. It is not as feature-rich as plugins such as NiceScroll but it's good enough for most cases.\r\n*/\r\n(function($ , undefined) {\r\n\tvar Ace_Scroll = function(element , _settings) {\r\n\t\tvar self = this;\r\n\t\t\r\n\t\tvar attrib_values = ace.helper.getAttrSettings(element, $.fn.ace_scroll.defaults);\r\n\t\tvar settings = $.extend({}, $.fn.ace_scroll.defaults, _settings, attrib_values);\r\n\t\r\n\t\tthis.size = 0;\r\n\t\tthis.lock = false;\r\n\t\tthis.lock_anyway = false;\r\n\t\t\r\n\t\tthis.$element = $(element);\r\n\t\tthis.element = element;\r\n\t\t\r\n\t\tvar vertical = true;\r\n\r\n\t\tvar disabled = false;\r\n\t\tvar active = false;\r\n\t\tvar created = false;\r\n\r\n\t\t\r\n\t\tvar $content_wrap = null, content_wrap = null;\r\n\t\tvar $track = null, $bar = null, track = null, bar = null;\r\n\t\tvar bar_style = null;\r\n\t\t\r\n\t\tvar bar_size = 0, bar_pos = 0, bar_max_pos = 0, bar_size_2 = 0, move_bar = true;\r\n\t\tvar reset_once = false;\r\n\t\t\r\n\t\tvar styleClass = '';\r\n\t\tvar trackFlip = false;//vertical on left or horizontal on top\r\n\t\tvar trackSize = 0;\r\n\r\n\t\tvar css_pos,\r\n\t\t\tcss_size,\r\n\t\t\tmax_css_size,\r\n\t\t\tclient_size,\r\n\t\t\tscroll_direction,\r\n\t\t\tscroll_size;\r\n\r\n\t\tvar ratio = 1;\r\n\t\tvar inline_style = false;\r\n\t\tvar mouse_track = false;\r\n\t\tvar mouse_release_target = 'onmouseup' in window ? window : 'html';\r\n\t\tvar dragEvent = settings.dragEvent || false;\r\n\t\t\r\n\t\tvar trigger_scroll = _settings.scrollEvent || false;\r\n\t\t\r\n\t\t\r\n\t\tvar detached = settings.detached || false;//when detached, hideOnIdle as well?\r\n\t\tvar updatePos = settings.updatePos || false;//default is true\r\n\t\t\r\n\t\tvar hideOnIdle = settings.hideOnIdle || false;\r\n\t\tvar hideDelay = settings.hideDelay || 1500;\r\n\t\tvar insideTrack = false;//used to hide scroll track when mouse is up and outside of track\r\n\t\tvar observeContent = settings.observeContent || false;\r\n\t\tvar prevContentSize = 0;\r\n\t\t\r\n\t\tvar is_dirty = true;//to prevent consecutive 'reset' calls\r\n\t\t\r\n\t\tthis.ref = function() {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tthis.create = function(_settings) {\r\n\t\t\tif(created) return;\r\n\r\n\t\t\tif(_settings) settings = $.extend({}, $.fn.ace_scroll.defaults, _settings);\r\n\r\n\t\t\tthis.size = parseInt(this.$element.attr('data-size')) || settings.size || 200;\r\n\t\t\tvertical = !settings['horizontal'];\r\n\r\n\t\t\tcss_pos = vertical ? 'top' : 'left';//'left' for horizontal\r\n\t\t\tcss_size = vertical ? 'height' : 'width';//'width' for horizontal\r\n\t\t\tmax_css_size = vertical ? 'maxHeight' : 'maxWidth';\r\n\r\n\t\t\tclient_size = vertical ? 'clientHeight' : 'clientWidth';\r\n\t\t\tscroll_direction = vertical ? 'scrollTop' : 'scrollLeft';\r\n\t\t\tscroll_size = vertical ? 'scrollHeight' : 'scrollWidth';\r\n\r\n\r\n\r\n\t\t\tthis.$element.addClass('ace-scroll');\r\n\t\t\tif(this.$element.css('position') == 'static') {\r\n\t\t\t\tinline_style = this.element.style.position;\r\n\t\t\t\tthis.element.style.position = 'relative';\r\n\t\t\t} else inline_style = false;\r\n\r\n\t\t\tvar scroll_bar = null;\r\n\t\t\tif(!detached) {\r\n\t\t\t\tthis.$element.wrapInner('<div class=\"scroll-content\" />');\r\n\t\t\t\tthis.$element.prepend('<div class=\"scroll-track\"><div class=\"scroll-bar\"></div></div>');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tscroll_bar = $('<div class=\"scroll-track scroll-detached\"><div class=\"scroll-bar\"></div></div>').appendTo('body');\r\n\t\t\t}\r\n\r\n\r\n\t\t\t$content_wrap = this.$element;\r\n\t\t\tif(!detached) $content_wrap = this.$element.find('.scroll-content').eq(0);\r\n\t\t\t\r\n\t\t\tif(!vertical) $content_wrap.wrapInner('<div />');\r\n\t\t\t\r\n\t\t\tcontent_wrap = $content_wrap.get(0);\r\n\t\t\tif(detached) {\r\n\t\t\t\t//set position for detached scrollbar\r\n\t\t\t\t$track = scroll_bar;\r\n\t\t\t\tsetTrackPos();\r\n\t\t\t}\r\n\t\t\telse $track = this.$element.find('.scroll-track').eq(0);\r\n\t\t\t\r\n\t\t\t$bar = $track.find('.scroll-bar').eq(0);\r\n\t\t\ttrack = $track.get(0);\r\n\t\t\tbar = $bar.get(0);\r\n\t\t\tbar_style = bar.style;\r\n\r\n\t\t\t//add styling classes and horizontalness\r\n\t\t\tif(!vertical) $track.addClass('scroll-hz');\r\n\t\t\tif(settings.styleClass) {\r\n\t\t\t\tstyleClass = settings.styleClass;\r\n\t\t\t\t$track.addClass(styleClass);\r\n\t\t\t\ttrackFlip = !!styleClass.match(/scroll\\-left|scroll\\-top/);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//calculate size of track!\r\n\t\t\tif(trackSize == 0) {\r\n\t\t\t\t$track.show();\r\n\t\t\t\tgetTrackSize();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$track.hide();\r\n\t\t\t\r\n\r\n\t\t\t//if(!touchDrag) {\r\n\t\t\t$track.on('mousedown', mouse_down_track);\r\n\t\t\t$bar.on('mousedown', mouse_down_bar);\r\n\t\t\t//}\r\n\r\n\t\t\t$content_wrap.on('scroll', function() {\r\n\t\t\t\tif(move_bar) {\r\n\t\t\t\t\tbar_pos = parseInt(Math.round(this[scroll_direction] * ratio));\r\n\t\t\t\t\tbar_style[css_pos] = bar_pos + 'px';\r\n\t\t\t\t}\r\n\t\t\t\tmove_bar = false;\r\n\t\t\t\tif(trigger_scroll) this.$element.trigger('scroll', [content_wrap]);\r\n\t\t\t})\r\n\r\n\r\n\t\t\tif(settings.mouseWheel) {\r\n\t\t\t\tthis.lock = settings.mouseWheelLock;\r\n\t\t\t\tthis.lock_anyway = settings.lockAnyway;\r\n\r\n\t\t\t\t//mousewheel library available?\r\n\t\t\t\tthis.$element.on(!!$.event.special.mousewheel ? 'mousewheel.ace_scroll' : 'mousewheel.ace_scroll DOMMouseScroll.ace_scroll', function(event) {\r\n\t\t\t\t\tif(disabled) return;\r\n\t\t\t\t\tcheckContentChanges(true);\r\n\r\n\t\t\t\t\tif(!active) return !self.lock_anyway;\r\n\r\n\t\t\t\t\tif(mouse_track) {\r\n\t\t\t\t\t\tmouse_track = false;\r\n\t\t\t\t\t\t$('html').off('.ace_scroll')\r\n\t\t\t\t\t\t$(mouse_release_target).off('.ace_scroll');\r\n\t\t\t\t\t\tif(dragEvent) self.$element.trigger('drag.end');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\tevent.deltaY = event.deltaY || 0;\r\n\t\t\t\t\tvar delta = (event.deltaY > 0 || event.originalEvent.detail < 0 || event.originalEvent.wheelDelta > 0) ? 1 : -1\r\n\t\t\t\t\tvar scrollEnd = false//have we reached the end of scrolling?\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar clientSize = content_wrap[client_size], scrollAmount = content_wrap[scroll_direction];\r\n\t\t\t\t\tif( !self.lock ) {\r\n\t\t\t\t\t\tif(delta == -1)\tscrollEnd = (content_wrap[scroll_size] <= scrollAmount + clientSize);\r\n\t\t\t\t\t\telse scrollEnd = (scrollAmount == 0);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.move_bar(true);\r\n\r\n\t\t\t\t\t//var step = parseInt( Math.min(Math.max(parseInt(clientSize / 8) , 80) , self.size) ) + 1;\r\n\t\t\t\t\tvar step = parseInt(clientSize / 8);\r\n\t\t\t\t\tif(step < 80) step = 80;\r\n\t\t\t\t\tif(step > self.size) step = self.size;\r\n\t\t\t\t\tstep += 1;\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent_wrap[scroll_direction] = scrollAmount - (delta * step);\r\n\r\n\r\n\t\t\t\t\treturn scrollEnd && !self.lock_anyway;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//swipe not available yet\r\n\t\t\tvar touchDrag = ace.vars['touch'] && 'ace_drag' in $.event.special && settings.touchDrag //&& !settings.touchSwipe;\r\n\t\t\t//add drag event for touch devices to scroll\r\n\t\t\tif(touchDrag/** || ($.fn.swipe && settings.touchSwipe)*/) {\r\n\t\t\t\tvar dir = '', event_name = touchDrag ? 'ace_drag' : 'swipe';\r\n\t\t\t\tthis.$element.on(event_name + '.ace_scroll', function(event) {\r\n\t\t\t\t\tif(disabled) {\r\n\t\t\t\t\t\tevent.retval.cancel = true;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcheckContentChanges(true);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!active) {\r\n\t\t\t\t\t\tevent.retval.cancel = this.lock_anyway;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdir = event.direction;\r\n\t\t\t\t\tif( (vertical && (dir == 'up' || dir == 'down'))\r\n\t\t\t\t\t\t||\r\n\t\t\t\t\t\t(!vertical && (dir == 'left' || dir == 'right'))\r\n\t\t\t\t\t   )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar distance = vertical ? event.dy : event.dx;\r\n\r\n\t\t\t\t\t\tif(distance != 0) {\r\n\t\t\t\t\t\t\tif(Math.abs(distance) > 20 && touchDrag) distance = distance * 2;\r\n\r\n\t\t\t\t\t\t\tself.move_bar(true);\r\n\t\t\t\t\t\t\tcontent_wrap[scroll_direction] = content_wrap[scroll_direction] + distance;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t/////////////////////////////////\r\n\t\t\t\r\n\t\t\tif(hideOnIdle) {\r\n\t\t\t\t$track.addClass('idle-hide');\r\n\t\t\t}\r\n\t\t\tif(observeContent) {\r\n\t\t\t\t$track.on('mouseenter.ace_scroll', function() {\r\n\t\t\t\t\tinsideTrack = true;\r\n\t\t\t\t\tcheckContentChanges(false);\r\n\t\t\t\t}).on('mouseleave.ace_scroll', function() {\r\n\t\t\t\t\tinsideTrack = false;\r\n\t\t\t\t\tif(mouse_track == false) hideScrollbars();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\t\r\n\t\t\t//some mobile browsers don't have mouseenter\r\n\t\t\tthis.$element.on('mouseenter.ace_scroll touchstart.ace_scroll', function(e) {\r\n\t\t\t\tis_dirty = true;\r\n\t\t\t\tif(observeContent) checkContentChanges(true);\r\n\t\t\t\telse if(settings.hoverReset) self.reset(true);\r\n\t\t\t\t\r\n\t\t\t\t$track.addClass('scroll-hover');\r\n\t\t\t}).on('mouseleave.ace_scroll touchend.ace_scroll', function() {\r\n\t\t\t\t$track.removeClass('scroll-hover');\r\n\t\t\t});\r\n\t\t\t//\r\n\r\n\t\t\tif(!vertical) $content_wrap.children(0).css(css_size, this.size);//the extra wrapper\r\n\t\t\t$content_wrap.css(max_css_size , this.size);\r\n\t\t\t\r\n\t\t\tdisabled = false;\r\n\t\t\tcreated = true;\r\n\t\t}\r\n\t\tthis.is_active = function() {\r\n\t\t\treturn active;\r\n\t\t}\r\n\t\tthis.is_enabled = function() {\r\n\t\t\treturn !disabled;\r\n\t\t}\r\n\t\tthis.move_bar = function($move) {\r\n\t\t\tmove_bar = $move;\r\n\t\t}\r\n\t\t\r\n\t\tthis.get_track = function() {\r\n\t\t\treturn track;\r\n\t\t}\r\n\r\n\t\tthis.reset = function(innert_call) {\r\n\t\t\tif(disabled) return;// this;\r\n\t\t\tif(!created) this.create();\r\n\t\t\t/////////////////////\r\n\t\t\tvar size = this.size;\r\n\t\t\t\r\n\t\t\tif(innert_call && !is_dirty) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tis_dirty = false;\r\n\r\n\t\t\tif(detached) {\r\n\t\t\t\tvar border_size = parseInt(Math.round( (parseInt($content_wrap.css('border-top-width')) + parseInt($content_wrap.css('border-bottom-width'))) / 2.5 ));//(2.5 from trial?!)\r\n\t\t\t\tsize -= border_size;//only if detached\r\n\t\t\t}\r\n\t\r\n\t\t\tvar content_size   = vertical ? content_wrap[scroll_size] : size;\r\n\t\t\tif( (vertical && content_size == 0) || (!vertical && this.element.scrollWidth == 0) ) {\r\n\t\t\t\t//element is hidden\r\n\t\t\t\t//this.$element.addClass('scroll-hidden');\r\n\t\t\t\t$track.removeClass('scroll-active')\r\n\t\t\t\treturn;// this;\r\n\t\t\t}\r\n\r\n\t\t\tvar available_space = vertical ? size : content_wrap.clientWidth;\r\n\r\n\t\t\tif(!vertical) $content_wrap.children(0).css(css_size, size);//the extra wrapper\r\n\t\t\t$content_wrap.css(max_css_size , this.size);\r\n\t\t\t\r\n\r\n\t\t\tif(content_size > available_space) {\r\n\t\t\t\tactive = true;\r\n\t\t\t\t$track.css(css_size, available_space).show();\r\n\r\n\t\t\t\tratio = parseFloat((available_space / content_size).toFixed(5))\r\n\t\t\t\t\r\n\t\t\t\tbar_size = parseInt(Math.round(available_space * ratio));\r\n\t\t\t\tbar_size_2 = parseInt(Math.round(bar_size / 2));\r\n\r\n\t\t\t\tbar_max_pos = available_space - bar_size;\r\n\t\t\t\tbar_pos = parseInt(Math.round(content_wrap[scroll_direction] * ratio));\r\n\r\n\t\t\t\tbar_style[css_size] = bar_size + 'px';\r\n\t\t\t\tbar_style[css_pos] = bar_pos + 'px';\r\n\t\t\t\t\r\n\t\t\t\t$track.addClass('scroll-active');\r\n\t\t\t\t\r\n\t\t\t\tif(trackSize == 0) {\r\n\t\t\t\t\tgetTrackSize();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!reset_once) {\r\n\t\t\t\t\t//this.$element.removeClass('scroll-hidden');\r\n\t\t\t\t\tif(settings.reset) {\r\n\t\t\t\t\t\t//reset scrollbar to zero position at first\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tcontent_wrap[scroll_direction] = 0;\r\n\t\t\t\t\t\tbar_style[css_pos] = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treset_once = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(detached) setTrackPos();\r\n\t\t\t} else {\r\n\t\t\t\tactive = false;\r\n\t\t\t\t$track.hide();\r\n\t\t\t\t$track.removeClass('scroll-active');\r\n\t\t\t\t$content_wrap.css(max_css_size , '');\r\n\t\t\t}\r\n\r\n\t\t\treturn;// this;\r\n\t\t}\r\n\t\tthis.disable = function() {\r\n\t\t\tcontent_wrap[scroll_direction] = 0;\r\n\t\t\tbar_style[css_pos] = 0;\r\n\r\n\t\t\tdisabled = true;\r\n\t\t\tactive = false;\r\n\t\t\t$track.hide();\r\n\t\t\t\r\n\t\t\tthis.$element.addClass('scroll-disabled');\r\n\t\t\t\r\n\t\t\t$track.removeClass('scroll-active');\r\n\t\t\t$content_wrap.css(max_css_size , '');\r\n\t\t}\r\n\t\tthis.enable = function() {\r\n\t\t\tdisabled = false;\r\n\t\t\tthis.$element.removeClass('scroll-disabled');\r\n\t\t}\r\n\t\tthis.destroy = function() {\r\n\t\t\tactive = false;\r\n\t\t\tdisabled = false;\r\n\t\t\tcreated = false;\r\n\t\t\t\r\n\t\t\tthis.$element.removeClass('ace-scroll scroll-disabled scroll-active');\r\n\t\t\tthis.$element.off('.ace_scroll')\r\n\r\n\t\t\tif(!detached) {\r\n\t\t\t\tif(!vertical) {\r\n\t\t\t\t\t//remove the extra wrapping div\r\n\t\t\t\t\t$content_wrap.find('> div').children().unwrap();\r\n\t\t\t\t}\r\n\t\t\t\t$content_wrap.children().unwrap();\r\n\t\t\t\t$content_wrap.remove();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$track.remove();\r\n\t\t\t\r\n\t\t\tif(inline_style !== false) this.element.style.position = inline_style;\r\n\t\t\t\r\n\t\t\tif(idleTimer != null) {\r\n\t\t\t\tclearTimeout(idleTimer);\r\n\t\t\t\tidleTimer = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.modify = function(_settings) {\r\n\t\t\tif(_settings) settings = $.extend({}, settings, _settings);\r\n\t\t\t\r\n\t\t\tthis.destroy();\r\n\t\t\tthis.create();\r\n\t\t\tis_dirty = true;\r\n\t\t\tthis.reset(true);\r\n\t\t}\r\n\t\tthis.update = function(_settings) {\r\n\t\t\tif(_settings) settings = $.extend({}, settings, _settings);\r\n\r\n\t\t\tthis.size = settings.size || this.size;\r\n\t\t\t\r\n\t\t\tthis.lock = settings.mouseWheelLock || this.lock;\r\n\t\t\tthis.lock_anyway = settings.lockAnyway || this.lock_anyway;\r\n\t\t\t\r\n\t\t\thideOnIdle = settings.hideOnIdle || hideOnIdle;\r\n\t\t\thideDelay = settings.hideDelay || hideDelay;\r\n\t\t\tobserveContent = settings.observeContent || false;\r\n\t\t\t\r\n\t\t\tdragEvent = settings.dragEvent || false;\r\n\t\t\t\r\n\t\t\tif(typeof _settings.styleClass !== 'undefined') {\r\n\t\t\t\tif(styleClass) $track.removeClass(styleClass);\r\n\t\t\t\tstyleClass = _settings.styleClass;\r\n\t\t\t\tif(styleClass) $track.addClass(styleClass);\r\n\t\t\t\ttrackFlip = !!styleClass.match(/scroll\\-left|scroll\\-top/);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.start = function() {\r\n\t\t\tcontent_wrap[scroll_direction] = 0;\r\n\t\t}\r\n\t\tthis.end = function() {\r\n\t\t\tcontent_wrap[scroll_direction] = content_wrap[scroll_size];\r\n\t\t}\r\n\t\t\r\n\t\tthis.hide = function() {\r\n\t\t\t$track.hide();\r\n\t\t}\r\n\t\tthis.show = function() {\r\n\t\t\t$track.show();\r\n\t\t}\r\n\r\n\t\t\r\n\t\tthis.update_scroll = function() {\r\n\t\t\tmove_bar = false;\r\n\t\t\tbar_style[css_pos] = bar_pos + 'px';\r\n\t\t\tcontent_wrap[scroll_direction] = parseInt(Math.round(bar_pos / ratio));\r\n\t\t}\r\n\r\n\t\tfunction mouse_down_track(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\t\t\r\n\t\t\tvar track_offset = $track.offset();\r\n\t\t\tvar track_pos = track_offset[css_pos];//top for vertical, left for horizontal\r\n\t\t\tvar mouse_pos = vertical ? e.pageY : e.pageX;\r\n\t\t\t\r\n\t\t\tif(mouse_pos > track_pos + bar_pos) {\r\n\t\t\t\tbar_pos = mouse_pos - track_pos - bar_size + bar_size_2;\r\n\t\t\t\tif(bar_pos > bar_max_pos) {\t\t\t\t\t\t\r\n\t\t\t\t\tbar_pos = bar_max_pos;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tbar_pos = mouse_pos - track_pos - bar_size_2;\r\n\t\t\t\tif(bar_pos < 0) bar_pos = 0;\r\n\t\t\t}\r\n\r\n\t\t\tself.update_scroll()\r\n\t\t}\r\n\r\n\t\tvar mouse_pos1 = -1, mouse_pos2 = -1;\r\n\t\tfunction mouse_down_bar(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tif(vertical) {\r\n\t\t\t\tmouse_pos2 = mouse_pos1 = e.pageY;\r\n\t\t\t} else {\r\n\t\t\t\tmouse_pos2 = mouse_pos1 = e.pageX;\r\n\t\t\t}\r\n\r\n\t\t\tmouse_track = true;\r\n\t\t\t$('html').off('mousemove.ace_scroll').on('mousemove.ace_scroll', mouse_move_bar)\r\n\t\t\t$(mouse_release_target).off('mouseup.ace_scroll').on('mouseup.ace_scroll', mouse_up_bar);\r\n\t\t\t\r\n\t\t\t$track.addClass('active');\r\n\t\t\tif(dragEvent) self.$element.trigger('drag.start');\r\n\t\t}\r\n\t\tfunction mouse_move_bar(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tif(vertical) {\r\n\t\t\t\tmouse_pos2 = e.pageY;\r\n\t\t\t} else {\r\n\t\t\t\tmouse_pos2 = e.pageX;\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\tif(mouse_pos2 - mouse_pos1 + bar_pos > bar_max_pos) {\r\n\t\t\t\tmouse_pos2 = mouse_pos1 + bar_max_pos - bar_pos;\r\n\t\t\t} else if(mouse_pos2 - mouse_pos1 + bar_pos < 0) {\r\n\t\t\t\tmouse_pos2 = mouse_pos1 - bar_pos;\r\n\t\t\t}\r\n\t\t\tbar_pos = bar_pos + (mouse_pos2 - mouse_pos1);\r\n\r\n\t\t\tmouse_pos1 = mouse_pos2;\r\n\r\n\t\t\tif(bar_pos < 0) {\r\n\t\t\t\tbar_pos = 0;\r\n\t\t\t}\r\n\t\t\telse if(bar_pos > bar_max_pos) {\r\n\t\t\t\tbar_pos = bar_max_pos;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself.update_scroll()\r\n\t\t}\r\n\t\tfunction mouse_up_bar(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\t\r\n\t\t\tmouse_track = false;\r\n\t\t\t$('html').off('.ace_scroll')\r\n\t\t\t$(mouse_release_target).off('.ace_scroll');\r\n\r\n\t\t\t$track.removeClass('active');\r\n\t\t\tif(dragEvent) self.$element.trigger('drag.end');\r\n\t\t\t\r\n\t\t\tif(active && hideOnIdle && !insideTrack) hideScrollbars();\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tvar idleTimer = null;\r\n\t\tvar prevCheckTime = 0;\r\n\t\tfunction checkContentChanges(hideSoon) {\r\n\t\t\t//check if content size has been modified since last time?\r\n\t\t\t//and with at least 1s delay\r\n\t\t\tvar newCheck = +new Date();\r\n\t\t\tif(observeContent && newCheck - prevCheckTime > 1000) {\r\n\t\t\t\tvar newSize = content_wrap[scroll_size];\r\n\t\t\t\tif(prevContentSize != newSize) {\r\n\t\t\t\t\tprevContentSize = newSize;\r\n\t\t\t\t\tis_dirty = true;\r\n\t\t\t\t\tself.reset(true);\r\n\t\t\t\t}\r\n\t\t\t\tprevCheckTime = newCheck;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//show scrollbars when not idle anymore i.e. triggered by mousewheel, dragging, etc\r\n\t\t\tif(active && hideOnIdle) {\r\n\t\t\t\tif(idleTimer != null) {\r\n\t\t\t\t\tclearTimeout(idleTimer);\r\n\t\t\t\t\tidleTimer = null;\r\n\t\t\t\t}\r\n\t\t\t\t$track.addClass('not-idle');\r\n\t\t\t\r\n\t\t\t\tif(!insideTrack && hideSoon == true) {\r\n\t\t\t\t\t//hideSoon is false when mouse enters track\r\n\t\t\t\t\thideScrollbars();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction hideScrollbars() {\r\n\t\t\tif(idleTimer != null) {\r\n\t\t\t\tclearTimeout(idleTimer);\r\n\t\t\t\tidleTimer = null;\r\n\t\t\t}\r\n\t\t\tidleTimer = setTimeout(function() {\r\n\t\t\t\tidleTimer = null;\r\n\t\t\t\t$track.removeClass('not-idle');\r\n\t\t\t} , hideDelay);\r\n\t\t}\r\n\t\t\r\n\t\t//for detached scrollbars\r\n\t\tfunction getTrackSize() {\r\n\t\t\t$track.css('visibility', 'hidden').addClass('scroll-hover');\r\n\t\t\tif(vertical) trackSize = parseInt($track.outerWidth()) || 0;\r\n\t\t\t else trackSize = parseInt($track.outerHeight()) || 0;\r\n\t\t\t$track.css('visibility', '').removeClass('scroll-hover');\r\n\t\t}\r\n\t\tthis.track_size = function() {\r\n\t\t\tif(trackSize == 0) getTrackSize();\r\n\t\t\treturn trackSize;\r\n\t\t}\r\n\t\t\r\n\t\t//for detached scrollbars\r\n\t\tfunction setTrackPos() {\r\n\t\t\tif(updatePos === false) return;\r\n\t\t\r\n\t\t\tvar off = $content_wrap.offset();//because we want it relative to parent not document\r\n\t\t\tvar left = off.left;\r\n\t\t\tvar top = off.top;\r\n\r\n\t\t\tif(vertical) {\r\n\t\t\t\tif(!trackFlip) {\r\n\t\t\t\t\tleft += ($content_wrap.outerWidth() - trackSize)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif(!trackFlip) {\r\n\t\t\t\t\ttop += ($content_wrap.outerHeight() - trackSize)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(updatePos === true) $track.css({top: parseInt(top), left: parseInt(left)});\r\n\t\t\telse if(updatePos === 'left') $track.css('left', parseInt(left));\r\n\t\t\telse if(updatePos === 'top') $track.css('top', parseInt(top));\r\n\t\t}\r\n\t\t\r\n\r\n\r\n\t\tthis.create();\r\n\t\tis_dirty = true;\r\n\t\tthis.reset(true);\r\n\t\tprevContentSize = content_wrap[scroll_size];\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t\r\n\t$.fn.ace_scroll = function (option,value) {\r\n\t\tvar retval;\r\n\r\n\t\tvar $set = this.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tvar data = $this.data('ace_scroll');\r\n\t\t\tvar options = typeof option === 'object' && option;\r\n\r\n\t\t\tif (!data) $this.data('ace_scroll', (data = new Ace_Scroll(this, options)));\r\n\t\t\t //else if(typeof options == 'object') data['modify'](options);\r\n\t\t\tif (typeof option === 'string') retval = data[option](value);\r\n\t\t});\r\n\r\n\t\treturn (retval === undefined) ? $set : retval;\r\n\t};\r\n\r\n\r\n\t$.fn.ace_scroll.defaults = {\r\n\t\t'size' : 200,\r\n\t\t'horizontal': false,\r\n\t\t'mouseWheel': true,\r\n\t\t'mouseWheelLock': false,\r\n\t\t'lockAnyway': false,\r\n\t\t'styleClass' : false,\r\n\t\t\r\n\t\t'observeContent': false,\r\n\t\t'hideOnIdle': false,\r\n\t\t'hideDelay': 1500,\r\n\t\t\r\n\t\t'hoverReset': true //reset scrollbar sizes on mouse hover because of possible sizing changes\r\n\t\t,\r\n\t\t'reset': false //true= set scrollTop = 0\r\n\t\t,\r\n\t\t'dragEvent': false\r\n\t\t,\r\n\t\t'touchDrag': true\r\n\t\t,\r\n\t\t'touchSwipe': false\r\n\t\t,\r\n\t\t'scrollEvent': false //trigger scroll event\r\n\r\n\t\t,\r\n\t\t'detached': false\r\n\t\t,\r\n\t\t'updatePos': true\r\n\t\t/**\r\n\t\t,\t\t\r\n\t\t'track' : true,\r\n\t\t'show' : false,\r\n\t\t'dark': false,\r\n\t\t'alwaysVisible': false,\r\n\t\t'margin': false,\r\n\t\t'thin': false,\r\n\t\t'position': 'right'\r\n\t\t*/\r\n     }\r\n\r\n\t/**\r\n\t$(document).on('ace.settings.ace_scroll', function(e, name) {\r\n\t\tif(name == 'sidebar_collapsed') $('.ace-scroll').scroller('reset');\r\n\t});\r\n\t$(window).on('resize.ace_scroll', function() {\r\n\t\t$('.ace-scroll').scroller('reset');\r\n\t});\r\n\t*/\r\n\r\n})(window.jQuery);;/**\r\n <b>Custom color picker element</b>. Converts html select elements to a dropdown color picker.\r\n*/\r\n(function($ , undefined) {\r\n\tvar Ace_Colorpicker = function(element, _options) {\r\n\r\n\t\tvar attrib_values = ace.helper.getAttrSettings(element, $.fn.ace_colorpicker.defaults);\r\n\t\tvar options = $.extend({}, $.fn.ace_colorpicker.defaults, _options, attrib_values);\r\n\r\n\r\n\t\tvar $element = $(element);\r\n\t\tvar color_list = '';\r\n\t\tvar color_selected = '';\r\n\t\tvar selection = null;\r\n\t\tvar color_array = [];\r\n\t\t\r\n\t\t$element.addClass('hide').find('option').each(function() {\r\n\t\t\tvar $class = 'colorpick-btn';\r\n\t\t\tvar color = this.value.replace(/[^\\w\\s,#\\(\\)\\.]/g, '');\r\n\t\t\tif(color.indexOf('number') >= 0) return;//ng\r\n\t\t\tif(this.value != color) this.value = color;\r\n\t\t\tif(this.selected) {\r\n\t\t\t\t$class += ' selected';\r\n\t\t\t\tcolor_selected = color;\r\n\t\t\t}\r\n\t\t\tcolor_array.push(color)\r\n\t\t\tcolor_list += '<li><a class=\"'+$class+'\" style=\"background-color:'+color+';\" data-color=\"'+color+'\"></a></li>';\r\n\t\t}).\r\n\t\tend()\r\n\t\t.on('change.color', function(){\r\n\t\t\t$element.next().find('.btn-colorpicker').css('background-color', this.value);\r\n\t\t})\r\n\t\t.after('<div class=\"dropdown dropdown-colorpicker\">\\\r\n\t\t<a data-toggle=\"dropdown\" class=\"dropdown-toggle\" '+(options.auto_pos ? 'data-position=\"auto\"' : '')+'><span class=\"btn-colorpicker\" style=\"background-color:'+color_selected+'\"></span></a><ul class=\"dropdown-menu'+(options.caret? ' dropdown-caret' : '')+(options.pull_right ? ' dropdown-menu-right' : '')+'\">'+color_list+'</ul></div>')\r\n\t\t\r\n\t\t\r\n\t\tvar dropdown = $element.next().find('.dropdown-menu')\r\n\t\tdropdown.on(ace.click_event, function(e, inner_call) {\r\n\t\t\tvar a = $(e.target);\r\n\t\t\tif(!a.is('.colorpick-btn')) return false;\r\n\r\n\t\t\tif(selection) selection.removeClass('selected');\r\n\t\t\tselection = a;\r\n\t\t\tselection.addClass('selected');\r\n\t\t\tvar color = selection.data('color');\r\n\r\n\t\t\tif(inner_call !== true) $element.val(color).trigger('change');\r\n\t\t\t$element.next().find('.btn-colorpicker').css('background-color', color);\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\treturn true;//to hide dropdown\r\n\t\t})\r\n\t\tselection = $element.next().find('a.selected');\r\n\r\n\t\tthis.pick = function(index, insert) {\r\n\t\t\tif(typeof index === 'number') {\r\n\t\t\t\tif(index >= color_array.length) return;\r\n\t\t\t\telement.selectedIndex = index;\r\n\t\t\t\tdropdown.find('a:eq('+index+')').trigger(ace.click_event, [true]);\r\n\t\t\t}\r\n\t\t\telse if(typeof index === 'string') {\r\n\t\t\t\tvar color = index.replace(/[^\\w\\s,#\\(\\)\\.]/g, '');\r\n\t\t\t\tindex = color_array.indexOf(color);\r\n\t\t\t\t\r\n\t\t\t\t//add this color if it doesn't exist\r\n\t\t\t\tif(index == -1 && insert === true) {\r\n\t\t\t\t\tcolor_array.push(color);\r\n\t\t\t\t\t\r\n\t\t\t\t\t$('<option />')\r\n\t\t\t\t\t.appendTo($element)\r\n\t\t\t\t\t.val(color);\r\n\t\t\t\t\t\r\n\t\t\t\t\t$('<li><a class=\"colorpick-btn\"></a></li>')\r\n\t\t\t\t\t.appendTo(dropdown)\r\n\t\t\t\t\t.find('a')\r\n\t\t\t\t\t.css('background-color', color)\r\n\t\t\t\t\t.data('color', color);\r\n\t\t\t\t\t\r\n\t\t\t\t\tindex = color_array.length - 1;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(index == -1) return;\r\n\t\t\t\tdropdown.find('a:eq('+index+')').trigger(ace.click_event, [true]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.destroy = function() {\r\n\t\t\t$element.removeClass('hide')//.off('change.color')\r\n\t\t\t.next().remove();\r\n\t\t\tcolor_array = [];\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t$.fn.ace_colorpicker = function(option, value) {\r\n\t\tvar retval;\r\n\r\n\t\tvar $set = this.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tvar data = $this.data('ace_colorpicker');\r\n\t\t\tvar options = typeof option === 'object' && option;\r\n\r\n\t\t\tif (!data) $this.data('ace_colorpicker', (data = new Ace_Colorpicker(this, options)));\r\n\t\t\tif (typeof option === 'string') retval = data[option](value);\r\n\t\t});\r\n\r\n\t\treturn (retval === undefined) ? $set : retval;\r\n\t}\r\n\t\r\n\t$.fn.ace_colorpicker.defaults = {\r\n\t\t'pull_right' : false,\r\n\t\t'caret': true,\r\n\t\t'auto_pos': true\r\n\t}\r\n\t\r\n})(window.jQuery);;/**\r\n <b>Ace file input element</b>. Custom, simple file input element to style browser's default file input.\r\n*/\r\n(function($ , undefined) {\r\n\tvar multiplible = 'multiple' in document.createElement('INPUT');\r\n\tvar hasFileList = 'FileList' in window;//file list enabled in modern browsers\r\n\tvar hasFileReader = 'FileReader' in window;\r\n\tvar hasFile = 'File' in window;\r\n\r\n\tvar Ace_File_Input = function(element , settings) {\r\n\t\tvar self = this;\r\n\t\t\r\n\t\tvar attrib_values = ace.helper.getAttrSettings(element, $.fn.ace_file_input.defaults);\r\n\t\tthis.settings = $.extend({}, $.fn.ace_file_input.defaults, settings, attrib_values);\r\n\r\n\t\tthis.$element = $(element);\r\n\t\tthis.element = element;\r\n\t\tthis.disabled = false;\r\n\t\tthis.can_reset = true;\r\n\t\t\r\n\r\n\t\tthis.$element\r\n\t\t.off('change.ace_inner_call')\r\n\t\t.on('change.ace_inner_call', function(e , ace_inner_call){\r\n\t\t\tif(self.disabled) return;\r\n\t\t\r\n\t\t\tif(ace_inner_call === true) return;//this change event is called from above drop event and extra checkings are taken care of there\r\n\t\t\treturn handle_on_change.call(self);\r\n\t\t\t//if(ret === false) e.preventDefault();\r\n\t\t});\r\n\r\n\t\tvar parent_label = this.$element.closest('label').css({'display':'block'})\r\n\t\tvar tagName = parent_label.length == 0 ? 'label' : 'span';//if not inside a \"LABEL\" tag, use \"LABEL\" tag, otherwise use \"SPAN\"\r\n\t\tthis.$element.wrap('<'+tagName+' class=\"ace-file-input\" />');\r\n\r\n\t\tthis.apply_settings();\r\n\t\tthis.reset_input_field();//for firefox as it keeps selected file after refresh\r\n\t}\r\n\tAce_File_Input.error = {\r\n\t\t'FILE_LOAD_FAILED' : 1,\r\n\t\t'IMAGE_LOAD_FAILED' : 2,\r\n\t\t'THUMBNAIL_FAILED' : 3\r\n\t};\r\n\r\n\r\n\tAce_File_Input.prototype.apply_settings = function() {\r\n\t\tvar self = this;\r\n\r\n\t\tthis.multi = this.$element.attr('multiple') && multiplible;\r\n\t\tthis.well_style = this.settings.style == 'well';\r\n\r\n\t\tif(this.well_style) {\r\n\t\t\tif( !this.settings.thumbnail ) this.settings.thumbnail = 'small';\r\n\t\t\tthis.$element.parent().addClass('ace-file-multiple');\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.$element.parent().removeClass('ace-file-multiple');\r\n\t\t}\r\n\r\n\r\n\t\tthis.$element.parent().find(':not(input[type=file])').remove();//remove all except our input, good for when changing settings\r\n\t\tthis.$element.after('<span class=\"ace-file-container\" data-title=\"'+this.settings.btn_choose+'\"><span class=\"ace-file-name\" data-title=\"'+this.settings.no_file+'\">'+(this.settings.no_icon ? '<i class=\"'+ ace.vars['icon'] + this.settings.no_icon+'\"></i>' : '')+'</span></span>');\r\n\t\tthis.$label = this.$element.next();\r\n\t\tthis.$container = this.$element.closest('.ace-file-input');\r\n\r\n\t\tvar remove_btn = !!this.settings.icon_remove;\r\n\t\tif(remove_btn) {\r\n\t\t\tvar btn = \r\n\t\t\t$('<a class=\"remove\" href=\"#\"><i class=\"'+ ace.vars['icon'] + this.settings.icon_remove+'\"></i></a>')\r\n\t\t\t.appendTo(this.$element.parent());\r\n\r\n\t\t\tbtn.on(ace.click_event, function(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\tif( !self.can_reset ) return false;\r\n\t\t\t\t\r\n\t\t\t\tvar ret = true;\r\n\t\t\t\tif(self.settings.before_remove) ret = self.settings.before_remove.call(self.element);\r\n\t\t\t\tif(!ret) return false;\r\n\r\n\t\t\t\tvar r = self.reset_input();\r\n\t\t\t\treturn false;\r\n\t\t\t});\r\n\t\t}\r\n\r\n\r\n\t\tif(this.settings.droppable && hasFileList) {\r\n\t\t\tenable_drop_functionality.call(this);\r\n\t\t}\r\n\t}\r\n\r\n\tAce_File_Input.prototype.show_file_list = function($files , inner_call) {\r\n\t\tvar files = typeof $files === \"undefined\" ? this.$element.data('ace_input_files') : $files;\r\n\t\tif(!files || files.length == 0) return;\r\n\t\t\r\n\t\t//////////////////////////////////////////////////////////////////\r\n\t\t\r\n\t\tif(this.well_style) {\r\n\t\t\tthis.$label.find('.ace-file-name').remove();\r\n\t\t\tif(!this.settings.btn_change) this.$label.addClass('hide-placeholder');\r\n\t\t}\r\n\t\tthis.$label.attr('data-title', this.settings.btn_change).addClass('selected');\r\n\t\t\r\n\t\tfor (var i = 0; i < files.length; i++) {\r\n\t\t\tvar filename = '', format = false;\r\n\t\t\tif(typeof files[i] === \"string\") filename = files[i];\r\n\t\t\telse if(hasFile && files[i] instanceof File) filename = $.trim( files[i].name );\r\n\t\t\telse if(files[i] instanceof Object && files[i].hasOwnProperty('name')) {\r\n\t\t\t\t//format & name specified by user (pre-displaying name, etc)\r\n\t\t\t\tfilename = files[i].name;\r\n\t\t\t\tif(files[i].hasOwnProperty('type')) format = files[i].type;\r\n\t\t\t\tif(!files[i].hasOwnProperty('path')) files[i].path = files[i].name;\r\n\t\t\t}\r\n\t\t\telse continue;\r\n\t\t\t\r\n\t\t\tvar index = filename.lastIndexOf(\"\\\\\") + 1;\r\n\t\t\tif(index == 0)index = filename.lastIndexOf(\"/\") + 1;\r\n\t\t\tfilename = filename.substr(index);\r\n\t\t\t\r\n\t\t\tif(format == false) {\r\n\t\t\t\tif((/\\.(jpe?g|png|gif|svg|bmp|tiff?)$/i).test(filename)) {\t\t\t\t\r\n\t\t\t\t\tformat = 'image';\r\n\t\t\t\t}\r\n\t\t\t\telse if((/\\.(mpe?g|flv|mov|avi|swf|mp4|mkv|webm|wmv|3gp)$/i).test(filename)) {\r\n\t\t\t\t\tformat = 'video';\r\n\t\t\t\t}\r\n\t\t\t\telse if((/\\.(mp3|ogg|wav|wma|amr|aac)$/i).test(filename)) {\r\n\t\t\t\t\tformat = 'audio';\r\n\t\t\t\t}\r\n\t\t\t\telse format = 'file';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar fileIcons = {\r\n\t\t\t\t'file' : 'fa fa-file',\r\n\t\t\t\t'image' : 'fa fa-picture-o file-image',\r\n\t\t\t\t'video' : 'fa fa-film file-video',\r\n\t\t\t\t'audio' : 'fa fa-music file-audio'\r\n\t\t\t};\r\n\t\t\tvar fileIcon = fileIcons[format];\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tif(!this.well_style) this.$label.find('.ace-file-name').attr({'data-title':filename}).find(ace.vars['.icon']).attr('class', ace.vars['icon'] + fileIcon);\r\n\t\t\telse {\r\n\t\t\t\tthis.$label.append('<span class=\"ace-file-name\" data-title=\"'+filename+'\"><i class=\"'+ ace.vars['icon'] + fileIcon+'\"></i></span>');\r\n\t\t\t\tvar type = (inner_call === true && hasFile && files[i] instanceof File) ? $.trim(files[i].type) : '';\r\n\t\t\t\tvar can_preview = hasFileReader && this.settings.thumbnail \r\n\t\t\t\t\t\t&&\r\n\t\t\t\t\t\t( (type.length > 0 && type.match('image')) || (type.length == 0 && format == 'image') )//the second one is for older Android's default browser which gives an empty text for file.type\r\n\t\t\t\tif(can_preview) {\r\n\t\t\t\t\tvar self = this;\r\n\t\t\t\t\t$.when(preview_image.call(this, files[i])).fail(function(result){\r\n\t\t\t\t\t\t//called on failure to load preview\r\n\t\t\t\t\t\tif(self.settings.preview_error) self.settings.preview_error.call(self, filename, result.code);\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\tAce_File_Input.prototype.reset_input = function() {\r\n\t    this.reset_input_ui();\r\n\t\tthis.reset_input_field();\r\n\t}\r\n\t\r\n\tAce_File_Input.prototype.reset_input_ui = function() {\r\n\t\t this.$label.attr({'data-title':this.settings.btn_choose, 'class':'ace-file-container'})\r\n\t\t\t.find('.ace-file-name:first').attr({'data-title':this.settings.no_file , 'class':'ace-file-name'})\r\n\t\t\t.find(ace.vars['.icon']).attr('class', ace.vars['icon'] + this.settings.no_icon)\r\n\t\t\t.prev('img').remove();\r\n\t\t\tif(!this.settings.no_icon) this.$label.find(ace.vars['.icon']).remove();\r\n\t\t\r\n\t\tthis.$label.find('.ace-file-name').not(':first').remove();\r\n\t\t\r\n\t\tthis.reset_input_data();\r\n\t\t\r\n\t\t//if(ace.vars['old_ie']) ace.helper.redraw(this.$container[0]);\r\n\t}\r\n\tAce_File_Input.prototype.reset_input_field = function() {\r\n\t\t//http://stackoverflow.com/questions/1043957/clearing-input-type-file-using-jquery/13351234#13351234\r\n\t\tthis.$element.wrap('<form>').parent().get(0).reset();\r\n\t\tthis.$element.unwrap();\r\n\t\t\r\n\t\t//strangely when reset is called on this temporary inner form\r\n\t\t//only **IE9/10** trigger 'reset' on the outer form as well\r\n\t\t//and as we have mentioned to reset input on outer form reset\r\n\t\t//it causes infinite recusrsion by coming back to reset_input_field\r\n\t\t//thus calling reset again and again and again\r\n\t\t//so because when \"reset\" button of outer form is hit, file input is automatically reset\r\n\t\t//we just reset_input_ui to avoid recursion\r\n\t}\r\n\tAce_File_Input.prototype.reset_input_data = function() {\r\n\t\tif(this.$element.data('ace_input_files')) {\r\n\t\t\tthis.$element.removeData('ace_input_files');\r\n\t\t\tthis.$element.removeData('ace_input_method');\r\n\t\t}\r\n\t}\r\n\r\n\tAce_File_Input.prototype.enable_reset = function(can_reset) {\r\n\t\tthis.can_reset = can_reset;\r\n\t}\r\n\r\n\tAce_File_Input.prototype.disable = function() {\r\n\t\tthis.disabled = true;\r\n\t\tthis.$element.attr('disabled', 'disabled').addClass('disabled');\r\n\t}\r\n\tAce_File_Input.prototype.enable = function() {\r\n\t\tthis.disabled = false;\r\n\t\tthis.$element.removeAttr('disabled').removeClass('disabled');\r\n\t}\r\n\r\n\tAce_File_Input.prototype.files = function() {\r\n\t\treturn $(this).data('ace_input_files') || null;\r\n\t}\r\n\tAce_File_Input.prototype.method = function() {\r\n\t\treturn $(this).data('ace_input_method') || '';\r\n\t}\r\n\t\r\n\tAce_File_Input.prototype.update_settings = function(new_settings) {\r\n\t\tthis.settings = $.extend({}, this.settings, new_settings);\r\n\t\tthis.apply_settings();\r\n\t}\r\n\t\r\n\tAce_File_Input.prototype.loading = function(is_loading) {\r\n\t\tif(is_loading === false) {\r\n\t\t\tthis.$container.find('.ace-file-overlay').remove();\r\n\t\t\tthis.element.removeAttribute('readonly');\r\n\t\t}\r\n\t\telse {\r\n\t\t\tvar inside = typeof is_loading === 'string' ? is_loading : '<i class=\"overlay-content fa fa-spin fa-spinner orange2 fa-2x\"></i>';\r\n\t\t\tvar loader = this.$container.find('.ace-file-overlay');\r\n\t\t\tif(loader.length == 0) {\r\n\t\t\t\tloader = $('<div class=\"ace-file-overlay\"></div>').appendTo(this.$container);\r\n\t\t\t\tloader.on('click tap', function(e) {\r\n\t\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tthis.element.setAttribute('readonly' , 'true');//for IE\r\n\t\t\t}\r\n\t\t\tloader.empty().append(inside);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\tvar enable_drop_functionality = function() {\r\n\t\tvar self = this;\r\n\t\t\r\n\t\tvar dropbox = this.$element.parent();\r\n\t\tdropbox\r\n\t\t.off('dragenter')\r\n\t\t.on('dragenter', function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t})\r\n\t\t.off('dragover')\r\n\t\t.on('dragover', function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t})\r\n\t\t.off('drop')\r\n\t\t.on('drop', function(e){\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tif(self.disabled) return;\r\n\t\t\r\n\t\t\tvar dt = e.originalEvent.dataTransfer;\r\n\t\t\tvar file_list = dt.files;\r\n\t\t\tif(!self.multi && file_list.length > 1) {//single file upload, but dragged multiple files\r\n\t\t\t\tvar tmpfiles = [];\r\n\t\t\t\ttmpfiles.push(file_list[0]);\r\n\t\t\t\tfile_list = tmpfiles;//keep only first file\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tfile_list = processFiles.call(self, file_list, true);//true means files have been selected, not dropped\r\n\t\t\tif(file_list === false) return false;\r\n\r\n\t\t\tself.$element.data('ace_input_method', 'drop');\r\n\t\t\tself.$element.data('ace_input_files', file_list);//save files data to be used later by user\r\n\r\n\t\t\tself.show_file_list(file_list , true);\r\n\t\t\t\r\n\t\t\tself.$element.triggerHandler('change' , [true]);//true means ace_inner_call\r\n\t\t\treturn true;\r\n\t\t});\r\n\t}\r\n\t\r\n\t\r\n\tvar handle_on_change = function() {\r\n\t\tvar file_list = this.element.files || [this.element.value];/** make it an array */\r\n\t\t\r\n\t\tfile_list = processFiles.call(this, file_list, false);//false means files have been selected, not dropped\r\n\t\tif(file_list === false) return false;\r\n\t\t\r\n\t\tthis.$element.data('ace_input_method', 'select');\r\n\t\tthis.$element.data('ace_input_files', file_list);\r\n\t\t\r\n\t\tthis.show_file_list(file_list , true);\r\n\t\t\r\n\t\treturn true;\r\n\t}\r\n\r\n\r\n\r\n\tvar preview_image = function(file) {\r\n\t\tvar self = this;\r\n\t\tvar $span = self.$label.find('.ace-file-name:last');//it should be out of onload, otherwise all onloads may target the same span because of delays\r\n\t\t\r\n\t\tvar deferred = new $.Deferred;\r\n\t\t\r\n\t\tvar getImage = function(src, $file) {\r\n\t\t\t$span.prepend(\"<img class='middle' style='display:none;' />\");\r\n\t\t\tvar img = $span.find('img:last').get(0);\r\n\t\t\r\n\t\t\t$(img).one('load', function() {\r\n\t\t\t\timgLoaded.call(null, img, $file);\r\n\t\t\t}).one('error', function() {\r\n\t\t\t\timgFailed.call(null, img);\r\n\t\t\t});\r\n\r\n\t\t\timg.src = src;\r\n\t\t}\r\n\t\tvar imgLoaded = function(img, $file) {\r\n\t\t\t//if image loaded successfully\r\n\t\t\t\r\n\t\t\tvar size = self.settings['previewSize'];\r\n\t\t\t\r\n\t\t\tif(!size) {\r\n\t\t\t\tif(self.settings['previewWidth'] || self.settings['previewHeight']) {\r\n\t\t\t\t\tsize = {previewWidth: self.settings['previewWidth'], previewHeight: self.settings['previewHeight']}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsize = 50;\r\n\t\t\t\t\tif(self.settings.thumbnail == 'large') size = 150;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif(self.settings.thumbnail == 'fit') size = $span.width();\r\n\t\t\telse if(typeof size == 'number') size = parseInt(Math.min(size, $span.width()));\r\n\r\n\r\n\t\t\tvar thumb = get_thumbnail(img, size/**, file.type*/);\r\n\t\t\tif(thumb == null) {\r\n\t\t\t\t//if making thumbnail fails\r\n\t\t\t\t$(this).remove();\r\n\t\t\t\tdeferred.reject({code:Ace_File_Input.error['THUMBNAIL_FAILED']});\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tvar showPreview = true;\r\n\t\t\t//add width/height info to \"file\" and trigger preview finished event for each image!\r\n\t\t\tif($file && $file instanceof File) {\r\n\t\t\t\t$file.width = thumb.width;\r\n\t\t\t\t$file.height = thumb.height;\r\n\t\t\t\tself.$element.trigger('file.preview.ace', {'file': $file});\r\n\t\t\t\t\r\n\t\t\t\tvar event\r\n\t\t\t\tself.$element.trigger( event = new $.Event('file.preview.ace'), {'file': $file} );\r\n\t\t\t\tif ( event.isDefaultPrevented() ) showPreview = false;\r\n\t\t\t}\r\n\r\n\r\n\t\t\tif(showPreview) {\r\n\t\t\t\tvar w = thumb.previewWidth, h = thumb.previewHeight;\r\n\t\t\t\tif(self.settings.thumbnail == 'small') {w=h=parseInt(Math.max(w,h))}\r\n\t\t\t\telse $span.addClass('large');\r\n\r\n\t\t\t\t$(img).css({'background-image':'url('+thumb.src+')' , width:w, height:h})\r\n\t\t\t\t\t\t.data('thumb', thumb.src)\r\n\t\t\t\t\t\t.attr({src:'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVQImWNgYGBgAAAABQABh6FO1AAAAABJRU5ErkJggg=='})\r\n\t\t\t\t\t\t.show()\r\n\t\t\t}\r\n\r\n\t\t\t///////////////////\r\n\t\t\tdeferred.resolve();\r\n\t\t}\r\n\t\tvar imgFailed = function(img) {\r\n\t\t\t//for example when a file has image extenstion, but format is something else\r\n\t\t\t$span.find('img').remove();\r\n\t\t\tdeferred.reject({code:Ace_File_Input.error['IMAGE_LOAD_FAILED']});\r\n\t\t}\r\n\t\t\r\n\t\tif(hasFile && file instanceof File) {\r\n\t\t\tvar reader = new FileReader();\r\n\t\t\treader.onload = function (e) {\r\n\t\t\t\tgetImage(e.target.result, file);\r\n\t\t\t}\r\n\t\t\treader.onerror = function (e) {\r\n\t\t\t\tdeferred.reject({code:Ace_File_Input.error['FILE_LOAD_FAILED']});\r\n\t\t\t}\r\n\t\t\treader.readAsDataURL(file);\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif(file instanceof Object && file.hasOwnProperty('path')) {\r\n\t\t\t\tgetImage(file.path, null);//file is a file name (path) --- this is used to pre-show user-selected image\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn deferred.promise();\r\n\t}\r\n\r\n\tvar get_thumbnail = function(img, size, type) {\r\n\t\tvar imgWidth = img.width, imgHeight = img.height;\r\n\t\t\r\n\t\t//**IE10** is not giving correct width using img.width so we use $(img).width()\r\n\t\timgWidth = imgWidth > 0 ? imgWidth : $(img).width()\r\n\t\timgHeight = imgHeight > 0 ? imgHeight : $(img).height()\r\n\r\n\t\tvar previewSize = false, previewHeight = false, previewWidth = false;\r\n\t\tif(typeof size == 'number') previewSize = size;\r\n\t\telse if(size instanceof Object) {\r\n\t\t\tif(size['previewWidth'] && !size['previewHeight']) previewWidth = size['previewWidth'];\r\n\t\t\telse if(size['previewHeight'] && !size['previewWidth']) previewHeight = size['previewHeight'];\r\n\t\t\telse if(size['previewWidth'] && size['previewHeight']) {\r\n\t\t\t\tpreviewWidth = size['previewWidth'];\r\n\t\t\t\tpreviewHeight = size['previewHeight'];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(previewSize) {\r\n\t\t\tif(imgWidth > imgHeight) {\r\n\t\t\t\tpreviewWidth = previewSize;\r\n\t\t\t\tpreviewHeight = parseInt(imgHeight/imgWidth * previewWidth);\r\n\t\t\t} else {\r\n\t\t\t\tpreviewHeight = previewSize;\r\n\t\t\t\tpreviewWidth = parseInt(imgWidth/imgHeight * previewHeight);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tif(!previewHeight && previewWidth) {\r\n\t\t\t\tpreviewHeight = parseInt(imgHeight/imgWidth * previewWidth);\r\n\t\t\t}\r\n\t\t\telse if(previewHeight && !previewWidth) {\r\n\t\t\t\tpreviewWidth = parseInt(imgWidth/imgHeight * previewHeight);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\r\n\t\tvar dataURL\r\n\t\ttry {\r\n\t\t\tvar canvas = document.createElement('canvas');\r\n\t\t\tcanvas.width = previewWidth; canvas.height = previewHeight;\r\n\t\t\tvar context = canvas.getContext('2d');\r\n\t\t\tcontext.drawImage(img, 0, 0, imgWidth, imgHeight, 0, 0, previewWidth, previewHeight);\r\n\t\t\tdataURL = canvas.toDataURL(/*type == 'image/jpeg' ? type : 'image/png', 10*/)\r\n\t\t} catch(e) {\r\n\t\t\tdataURL = null;\r\n\t\t}\r\n\t\tif(! dataURL) return null;\r\n\t\t\r\n\r\n\t\t//there was only one image that failed in firefox completely randomly! so let's double check things\r\n\t\tif( !( /^data\\:image\\/(png|jpe?g|gif);base64,[0-9A-Za-z\\+\\/\\=]+$/.test(dataURL)) ) dataURL = null;\r\n\t\tif(! dataURL) return null;\r\n\t\t\r\n\r\n\t\treturn {src: dataURL, previewWidth: previewWidth, previewHeight: previewHeight, width: imgWidth, height: imgHeight};\r\n\t}\r\n\t\r\n\r\n\t\r\n\tvar processFiles = function(file_list, dropped) {\r\n\t\tvar ret = checkFileList.call(this, file_list, dropped);\r\n\t\tif(ret === -1) {\r\n\t\t\tthis.reset_input();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif( !ret || ret.length == 0 ) {\r\n\t\t\tif( !this.$element.data('ace_input_files') ) this.reset_input();\r\n\t\t\t//if nothing selected before, reset because of the newly unacceptable (ret=false||length=0) selection\r\n\t\t\t//otherwise leave the previous selection intact?!!!\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif (ret instanceof Array || (hasFileList && ret instanceof FileList)) file_list = ret;\r\n\t\t\r\n\t\t\r\n\t\tret = true;\r\n\t\tif(this.settings.before_change) ret = this.settings.before_change.call(this.element, file_list, dropped);\r\n\t\tif(ret === -1) {\r\n\t\t\tthis.reset_input();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\tif(!ret || ret.length == 0) {\r\n\t\t\tif( !this.$element.data('ace_input_files') ) this.reset_input();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t//inside before_change you can return a modified File Array as result\r\n\t\tif (ret instanceof Array || (hasFileList && ret instanceof FileList)) file_list = ret;\r\n\t\t\r\n\t\treturn file_list;\r\n\t}\r\n\t\r\n\t\r\n\tvar getExtRegex = function(ext) {\r\n\t\tif(!ext) return null;\r\n\t\tif(typeof ext === 'string') ext = [ext];\r\n\t\tif(ext.length == 0) return null;\r\n\t\treturn new RegExp(\"\\.(?:\"+ext.join('|')+\")$\", \"i\");\r\n\t}\r\n\tvar getMimeRegex = function(mime) {\r\n\t\tif(!mime) return null;\r\n\t\tif(typeof mime === 'string') mime = [mime];\r\n\t\tif(mime.length == 0) return null;\r\n\t\treturn new RegExp(\"^(?:\"+mime.join('|').replace(/\\//g, \"\\\\/\")+\")$\", \"i\");\r\n\t}\r\n\tvar checkFileList = function(files, dropped) {\r\n\t\tvar allowExt   = getExtRegex(this.settings.allowExt);\r\n\r\n\t\tvar denyExt    = getExtRegex(this.settings.denyExt);\r\n\t\t\r\n\t\tvar allowMime  = getMimeRegex(this.settings.allowMime);\r\n\r\n\t\tvar denyMime   = getMimeRegex(this.settings.denyMime);\r\n\r\n\t\tvar maxSize    = this.settings.maxSize || false;\r\n\t\t\r\n\t\tif( !(allowExt || denyExt || allowMime || denyMime || maxSize) ) return true;//no checking required\r\n\r\n\r\n\t\tvar safe_files = [];\r\n\t\tvar error_list = {}\r\n\t\tfor(var f = 0; f < files.length; f++) {\r\n\t\t\tvar file = files[f];\r\n\t\t\t\r\n\t\t\t//file is either a string(file name) or a File object\r\n\t\t\tvar filename = !hasFile ? file : file.name;\r\n\t\t\tif( allowExt && !allowExt.test(filename) ) {\r\n\t\t\t\t//extension not matching whitelist, so drop it\r\n\t\t\t\tif(!('ext' in error_list)) error_list['ext'] = [];\r\n\t\t\t\t error_list['ext'].push(filename);\r\n\t\t\t\t\r\n\t\t\t\tcontinue;\r\n\t\t\t} else if( denyExt && denyExt.test(filename) ) {\r\n\t\t\t\t//extension is matching blacklist, so drop it\r\n\t\t\t\tif(!('ext' in error_list)) error_list['ext'] = [];\r\n\t\t\t\t error_list['ext'].push(filename);\r\n\t\t\t\t\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tvar type;\r\n\t\t\tif( !hasFile ) {\r\n\t\t\t\t//in browsers that don't support FileReader API\r\n\t\t\t\tsafe_files.push(file);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\t\t\telse if((type = $.trim(file.type)).length > 0) {\r\n\t\t\t\t//there is a mimetype for file so let's check against are rules\r\n\t\t\t\tif( allowMime && !allowMime.test(type) ) {\r\n\t\t\t\t\t//mimeType is not matching whitelist, so drop it\r\n\t\t\t\t\tif(!('mime' in error_list)) error_list['mime'] = [];\r\n\t\t\t\t\t error_list['mime'].push(filename);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\telse if( denyMime && denyMime.test(type) ) {\r\n\t\t\t\t\t//mimeType is matching blacklist, so drop it\r\n\t\t\t\t\tif(!('mime' in error_list)) error_list['mime'] = [];\r\n\t\t\t\t\t error_list['mime'].push(filename);\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tif( maxSize && file.size > maxSize ) {\r\n\t\t\t\t//file size is not acceptable\r\n\t\t\t\tif(!('size' in error_list)) error_list['size'] = [];\r\n\t\t\t\t error_list['size'].push(filename);\r\n\t\t\t\tcontinue;\r\n\t\t\t}\r\n\r\n\t\t\tsafe_files.push(file)\r\n\t\t}\r\n\t\t\r\n\t\r\n\t\t\r\n\t\tif(safe_files.length == files.length) return files;//return original file list if all are valid\r\n\r\n\t\t/////////\r\n\t\tvar error_count = {'ext': 0, 'mime': 0, 'size': 0}\r\n\t\tif( 'ext' in error_list ) error_count['ext'] = error_list['ext'].length;\r\n\t\tif( 'mime' in error_list ) error_count['mime'] = error_list['mime'].length;\r\n\t\tif( 'size' in error_list ) error_count['size'] = error_list['size'].length;\r\n\t\t\r\n\t\tvar event\r\n\t\tthis.$element.trigger(\r\n\t\t\tevent = new $.Event('file.error.ace'), \r\n\t\t\t{\r\n\t\t\t\t'file_count': files.length,\r\n\t\t\t\t'invalid_count' : files.length - safe_files.length,\r\n\t\t\t\t'error_list' : error_list,\r\n\t\t\t\t'error_count' : error_count,\r\n\t\t\t\t'dropped': dropped\r\n\t\t\t}\r\n\t\t);\r\n\t\tif ( event.isDefaultPrevented() ) return -1;//it will reset input\r\n\t\t//////////\r\n\r\n\t\treturn safe_files;//return safe_files\r\n\t}\r\n\r\n\r\n\r\n\t///////////////////////////////////////////\r\n\t$.fn.aceFileInput = $.fn.ace_file_input = function (option,value) {\r\n\t\tvar retval;\r\n\r\n\t\tvar $set = this.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tvar data = $this.data('ace_file_input');\r\n\t\t\tvar options = typeof option === 'object' && option;\r\n\r\n\t\t\tif (!data) $this.data('ace_file_input', (data = new Ace_File_Input(this, options)));\r\n\t\t\tif (typeof option === 'string') retval = data[option](value);\r\n\t\t});\r\n\r\n\t\treturn (retval === undefined) ? $set : retval;\r\n\t};\r\n\r\n\r\n\t$.fn.ace_file_input.defaults = {\r\n\t\tstyle: false,\r\n\t\tno_file: 'No File ...',\r\n\t\tno_icon: 'fa fa-upload',\r\n\t\tbtn_choose: 'Choose',\r\n\t\tbtn_change: 'Change',\r\n\t\ticon_remove: 'fa fa-times',\r\n\t\tdroppable: false,\r\n\t\tthumbnail: false,//large, fit, small\r\n\t\t\r\n\t\tallowExt: null,\r\n\t\tdenyExt: null,\r\n\t\tallowMime: null,\r\n\t\tdenyMime: null,\r\n\t\tmaxSize: false,\r\n\t\t\r\n\t\tpreviewSize: false,\r\n\t\tpreviewWidth: false,\r\n\t\tpreviewHeight: false,\r\n\t\t\r\n\t\t//callbacks\r\n\t\tbefore_change: null,\r\n\t\tbefore_remove: null,\r\n\t\tpreview_error: null\r\n     }\r\n\r\n\r\n})(window.jQuery);\r\n;/**\r\n  <b>Bootstrap 2 typeahead plugin.</b> With Bootstrap <u>3</u> it's been dropped in favor of a more advanced separate plugin.\r\n  Pretty good for simple cases such as autocomplete feature of the search box and required for <u class=\"text-danger\">Tag input</u> plugin.\r\n*/\r\n\r\n/* =============================================================\r\n * bootstrap-typeahead.js v2.3.2\r\n * http://twitter.github.com/bootstrap/javascript.html#typeahead\r\n * =============================================================\r\n * Copyright 2012 Twitter, Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n * ============================================================ */\r\n\r\n\r\n!function($){\r\n\r\n  \"use strict\"; // jshint ;_;\r\n\r\n\r\n /* TYPEAHEAD PUBLIC CLASS DEFINITION\r\n  * ================================= */\r\n\r\n  var Typeahead = function (element, options) {\r\n    this.$element = $(element)\r\n    this.options = $.extend({}, $.fn.bs_typeahead.defaults, options)\r\n    this.matcher = this.options.matcher || this.matcher\r\n    this.sorter = this.options.sorter || this.sorter\r\n    this.highlighter = this.options.highlighter || this.highlighter\r\n    this.updater = this.options.updater || this.updater\r\n    this.source = this.options.source\r\n    this.$menu = $(this.options.menu)\r\n    this.shown = false\r\n    this.listen()\r\n  }\r\n\r\n  Typeahead.prototype = {\r\n\r\n    constructor: Typeahead\r\n\r\n  , select: function () {\r\n      var val = this.$menu.find('.active').attr('data-value')\r\n      this.$element\r\n        .val(this.updater(val))\r\n        .change()\r\n      return this.hide()\r\n    }\r\n\r\n  , updater: function (item) {\r\n      return item\r\n    }\r\n\r\n  , show: function () {\r\n      var pos = $.extend({}, this.$element.position(), {\r\n        height: this.$element[0].offsetHeight\r\n      })\r\n\r\n      this.$menu\r\n        .insertAfter(this.$element)\r\n        .css({\r\n          top: pos.top + pos.height\r\n        , left: pos.left\r\n        })\r\n        .show()\r\n\r\n      this.shown = true\r\n      return this\r\n    }\r\n\r\n  , hide: function () {\r\n      this.$menu.hide()\r\n      this.shown = false\r\n      return this\r\n    }\r\n\r\n  , lookup: function (event) {\r\n      var items\r\n\r\n      this.query = this.$element.val()\r\n\r\n      if (!this.query || this.query.length < this.options.minLength) {\r\n        return this.shown ? this.hide() : this\r\n      }\r\n\r\n      items = $.isFunction(this.source) ? this.source(this.query, $.proxy(this.process, this)) : this.source\r\n\r\n      return items ? this.process(items) : this\r\n    }\r\n\r\n  , process: function (items) {\r\n      var that = this\r\n\r\n      items = $.grep(items, function (item) {\r\n        return that.matcher(item)\r\n      })\r\n\r\n      items = this.sorter(items)\r\n\r\n      if (!items.length) {\r\n        return this.shown ? this.hide() : this\r\n      }\r\n\r\n      return this.render(items.slice(0, this.options.items)).show()\r\n    }\r\n\r\n  , matcher: function (item) {\r\n      return ~item.toLowerCase().indexOf(this.query.toLowerCase())\r\n    }\r\n\r\n  , sorter: function (items) {\r\n      var beginswith = []\r\n        , caseSensitive = []\r\n        , caseInsensitive = []\r\n        , item\r\n\r\n      while (item = items.shift()) {\r\n        if (!item.toLowerCase().indexOf(this.query.toLowerCase())) beginswith.push(item)\r\n        else if (~item.indexOf(this.query)) caseSensitive.push(item)\r\n        else caseInsensitive.push(item)\r\n      }\r\n\r\n      return beginswith.concat(caseSensitive, caseInsensitive)\r\n    }\r\n\r\n  , highlighter: function (item) {\r\n      var query = this.query.replace(/[\\-\\[\\]{}()*+?.,\\\\\\^$|#\\s]/g, '\\\\$&')\r\n      return item.replace(new RegExp('(' + query + ')', 'ig'), function ($1, match) {\r\n        return '<strong>' + match + '</strong>'\r\n      })\r\n    }\r\n\r\n  , render: function (items) {\r\n      var that = this\r\n\r\n      items = $(items).map(function (i, item) {\r\n        i = $(that.options.item).attr('data-value', item)\r\n        i.find('a').html(that.highlighter(item))\r\n        return i[0]\r\n      })\r\n\r\n      items.first().addClass('active')\r\n      this.$menu.html(items)\r\n      return this\r\n    }\r\n\r\n  , next: function (event) {\r\n      var active = this.$menu.find('.active').removeClass('active')\r\n        , next = active.next()\r\n\r\n      if (!next.length) {\r\n        next = $(this.$menu.find('li')[0])\r\n      }\r\n\r\n      next.addClass('active')\r\n    }\r\n\r\n  , prev: function (event) {\r\n      var active = this.$menu.find('.active').removeClass('active')\r\n        , prev = active.prev()\r\n\r\n      if (!prev.length) {\r\n        prev = this.$menu.find('li').last()\r\n      }\r\n\r\n      prev.addClass('active')\r\n    }\r\n\r\n  , listen: function () {\r\n      this.$element\r\n        .on('focus',    $.proxy(this.focus, this))\r\n        .on('blur',     $.proxy(this.blur, this))\r\n        .on('keypress', $.proxy(this.keypress, this))\r\n        .on('keyup',    $.proxy(this.keyup, this))\r\n\r\n      if (this.eventSupported('keydown')) {\r\n        this.$element.on('keydown', $.proxy(this.keydown, this))\r\n      }\r\n\r\n      this.$menu\r\n        .on('click', $.proxy(this.click, this))\r\n        .on('mouseenter', 'li', $.proxy(this.mouseenter, this))\r\n        .on('mouseleave', 'li', $.proxy(this.mouseleave, this))\r\n    }\r\n\r\n  , eventSupported: function(eventName) {\r\n      var isSupported = eventName in this.$element\r\n      if (!isSupported) {\r\n        this.$element.setAttribute(eventName, 'return;')\r\n        isSupported = typeof this.$element[eventName] === 'function'\r\n      }\r\n      return isSupported\r\n    }\r\n\r\n  , move: function (e) {\r\n      if (!this.shown) return\r\n\r\n      switch(e.keyCode) {\r\n        case 9: // tab\r\n        case 13: // enter\r\n        case 27: // escape\r\n          e.preventDefault()\r\n          break\r\n\r\n        case 38: // up arrow\r\n          e.preventDefault()\r\n          this.prev()\r\n          break\r\n\r\n        case 40: // down arrow\r\n          e.preventDefault()\r\n          this.next()\r\n          break\r\n      }\r\n\r\n      e.stopPropagation()\r\n    }\r\n\r\n  , keydown: function (e) {\r\n      this.suppressKeyPressRepeat = ~$.inArray(e.keyCode, [40,38,9,13,27])\r\n      this.move(e)\r\n    }\r\n\r\n  , keypress: function (e) {\r\n      if (this.suppressKeyPressRepeat) return\r\n      this.move(e)\r\n    }\r\n\r\n  , keyup: function (e) {\r\n      switch(e.keyCode) {\r\n        case 40: // down arrow\r\n        case 38: // up arrow\r\n        case 16: // shift\r\n        case 17: // ctrl\r\n        case 18: // alt\r\n          break\r\n\r\n        case 9: // tab\r\n        case 13: // enter\r\n          if (!this.shown) return\r\n          this.select()\r\n          break\r\n\r\n        case 27: // escape\r\n          if (!this.shown) return\r\n          this.hide()\r\n          break\r\n\r\n        default:\r\n          this.lookup()\r\n      }\r\n\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n  }\r\n\r\n  , focus: function (e) {\r\n      this.focused = true\r\n    }\r\n\r\n  , blur: function (e) {\r\n      this.focused = false\r\n      if (!this.mousedover && this.shown) this.hide()\r\n    }\r\n\r\n  , click: function (e) {\r\n      e.stopPropagation()\r\n      e.preventDefault()\r\n      this.select()\r\n      this.$element.focus()\r\n    }\r\n\r\n  , mouseenter: function (e) {\r\n      this.mousedover = true\r\n      this.$menu.find('.active').removeClass('active')\r\n      $(e.currentTarget).addClass('active')\r\n    }\r\n\r\n  , mouseleave: function (e) {\r\n      this.mousedover = false\r\n      if (!this.focused && this.shown) this.hide()\r\n    }\r\n\r\n  }\r\n\r\n\r\n  /* TYPEAHEAD PLUGIN DEFINITION\r\n   * =========================== */\r\n\r\n  var old = $.fn.bs_typeahead\r\n\r\n  $.fn.bs_typeahead = function (option) {\r\n    return this.each(function () {\r\n      var $this = $(this)\r\n        , data = $this.data('bs_typeahead')\r\n        , options = typeof option == 'object' && option\r\n      if (!data) $this.data('bs_typeahead', (data = new Typeahead(this, options)))\r\n      if (typeof option == 'string') data[option]()\r\n    })\r\n  }\r\n\r\n  $.fn.bs_typeahead.defaults = {\r\n    source: []\r\n  , items: 8\r\n  , menu: '<ul class=\"typeahead dropdown-menu\"></ul>'\r\n  , item: '<li><a href=\"#\"></a></li>'\r\n  , minLength: 1\r\n  }\r\n\r\n  $.fn.bs_typeahead.Constructor = Typeahead\r\n\r\n\r\n /* TYPEAHEAD NO CONFLICT\r\n  * =================== */\r\n\r\n  $.fn.bs_typeahead.noConflict = function () {\r\n    $.fn.bs_typeahead = old\r\n    return this\r\n  }\r\n\r\n\r\n /* TYPEAHEAD DATA-API\r\n  * ================== */\r\n\r\n  $(document).on('focus.bs_typeahead.data-api', '[data-provide=\"bs_typeahead\"]', function (e) {\r\n    var $this = $(this)\r\n    if ($this.data('bs_typeahead')) return\r\n    $this.bs_typeahead($this.data())\r\n  })\r\n\r\n}(window.jQuery);;/**\r\n <b>Wysiwyg</b>. A wrapper for Bootstrap wyswiwyg plugin.\r\n It's just a wrapper so you still need to include Bootstrap wysiwyg script first.\r\n*/\r\n(function($ , undefined) {\r\n\t$.fn.ace_wysiwyg = function($options , undefined) {\r\n\t\tvar options = $.extend( {\r\n\t\t\tspeech_button:true,\r\n\t\t\twysiwyg:{}\r\n        }, $options);\r\n\r\n\t\tvar color_values = [\r\n\t\t\t'#ac725e','#d06b64','#f83a22','#fa573c','#ff7537','#ffad46',\r\n\t\t\t'#42d692','#16a765','#7bd148','#b3dc6c','#fbe983','#fad165',\r\n\t\t\t'#92e1c0','#9fe1e7','#9fc6e7','#4986e7','#9a9cff','#b99aff',\r\n\t\t\t'#c2c2c2','#cabdbf','#cca6ac','#f691b2','#cd74e6','#a47ae2',\r\n\t\t\t'#444444'\r\n\t\t]\r\n\r\n\t\tvar button_defaults =\r\n\t\t{\r\n\t\t\t'font' : {\r\n\t\t\t\tvalues:['Arial', 'Courier', 'Comic Sans MS', 'Helvetica', 'Open Sans', 'Tahoma', 'Verdana'],\r\n\t\t\t\ticon:'fa fa-font',\r\n\t\t\t\ttitle:'Font'\r\n\t\t\t},\r\n\t\t\t'fontSize' : {\r\n\t\t\t\tvalues:{5:'Huge', 3:'Normal', 1:'Small'},\r\n\t\t\t\ticon:'fa fa-text-height',\r\n\t\t\t\ttitle:'Font Size'\r\n\t\t\t},\r\n\t\t\t'bold' : {\r\n\t\t\t\ticon : 'fa fa-bold',\r\n\t\t\t\ttitle : 'Bold (Ctrl/Cmd+B)'\r\n\t\t\t},\r\n\t\t\t'italic' : {\r\n\t\t\t\ticon : 'fa fa-italic',\r\n\t\t\t\ttitle : 'Italic (Ctrl/Cmd+I)'\r\n\t\t\t},\r\n\t\t\t'strikethrough' : {\r\n\t\t\t\ticon : 'fa fa-strikethrough',\r\n\t\t\t\ttitle : 'Strikethrough'\r\n\t\t\t},\r\n\t\t\t'underline' : {\r\n\t\t\t\ticon : 'fa fa-underline',\r\n\t\t\t\ttitle : 'Underline'\r\n\t\t\t},\r\n\t\t\t'insertunorderedlist' : {\r\n\t\t\t\ticon : 'fa fa-list-ul',\r\n\t\t\t\ttitle : 'Bullet list'\r\n\t\t\t},\r\n\t\t\t'insertorderedlist' : {\r\n\t\t\t\ticon : 'fa fa-list-ol',\r\n\t\t\t\ttitle : 'Number list'\r\n\t\t\t},\r\n\t\t\t'outdent' : {\r\n\t\t\t\ticon : 'fa fa-outdent',\r\n\t\t\t\ttitle : 'Reduce indent (Shift+Tab)'\r\n\t\t\t},\r\n\t\t\t'indent' : {\r\n\t\t\t\ticon : 'fa fa-indent',\r\n\t\t\t\ttitle : 'Indent (Tab)'\r\n\t\t\t},\r\n\t\t\t'justifyleft' : {\r\n\t\t\t\ticon : 'fa fa-align-left',\r\n\t\t\t\ttitle : 'Align Left (Ctrl/Cmd+L)'\r\n\t\t\t},\r\n\t\t\t'justifycenter' : {\r\n\t\t\t\ticon : 'fa fa-align-center',\r\n\t\t\t\ttitle : 'Center (Ctrl/Cmd+E)'\r\n\t\t\t},\r\n\t\t\t'justifyright' : {\r\n\t\t\t\ticon : 'fa fa-align-right',\r\n\t\t\t\ttitle : 'Align Right (Ctrl/Cmd+R)'\r\n\t\t\t},\r\n\t\t\t'justifyfull' : {\r\n\t\t\t\ticon : 'fa fa-align-justify',\r\n\t\t\t\ttitle : 'Justify (Ctrl/Cmd+J)'\r\n\t\t\t},\r\n\t\t\t'createLink' : {\r\n\t\t\t\ticon : 'fa fa-link',\r\n\t\t\t\ttitle : 'Hyperlink',\r\n\t\t\t\tbutton_text : 'Add',\r\n\t\t\t\tplaceholder : 'URL',\r\n\t\t\t\tbutton_class : 'btn-primary'\r\n\t\t\t},\r\n\t\t\t'unlink' : {\r\n\t\t\t\ticon : 'fa fa-chain-broken',\r\n\t\t\t\ttitle : 'Remove Hyperlink'\r\n\t\t\t},\r\n\t\t\t'insertImage' : {\r\n\t\t\t\ticon : 'fa fa-picture-o',\r\n\t\t\t\ttitle : 'Insert picture',\r\n\t\t\t\tbutton_text : '<i class=\"'+ ace.vars['icon'] + 'fa fa-file\"></i> Choose Image &hellip;',\r\n\t\t\t\tplaceholder : 'Image URL',\r\n\t\t\t\tbutton_insert : 'Insert',\r\n\t\t\t\tbutton_class : 'btn-success',\r\n\t\t\t\tbutton_insert_class : 'btn-primary',\r\n\t\t\t\tchoose_file: true //show the choose file button?\r\n\t\t\t},\r\n\t\t\t'foreColor' : {\r\n\t\t\t\tvalues : color_values,\r\n\t\t\t\ttitle : 'Change Color'\r\n\t\t\t},\r\n\t\t\t'backColor' : {\r\n\t\t\t\tvalues : color_values,\r\n\t\t\t\ttitle : 'Change Background Color'\r\n\t\t\t},\r\n\t\t\t'undo' : {\r\n\t\t\t\ticon : 'fa fa-undo',\r\n\t\t\t\ttitle : 'Undo (Ctrl/Cmd+Z)'\r\n\t\t\t},\r\n\t\t\t'redo' : {\r\n\t\t\t\ticon : 'fa fa-repeat',\r\n\t\t\t\ttitle : 'Redo (Ctrl/Cmd+Y)'\r\n\t\t\t},\r\n\t\t\t'viewSource' : {\r\n\t\t\t\ticon : 'fa fa-code',\r\n\t\t\t\ttitle : 'View Source'\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tvar toolbar_buttons =\r\n\t\toptions.toolbar ||\r\n\t\t[\r\n\t\t\t'font',\r\n\t\t\tnull,\r\n\t\t\t'fontSize',\r\n\t\t\tnull,\r\n\t\t\t'bold',\r\n\t\t\t'italic',\r\n\t\t\t'strikethrough',\r\n\t\t\t'underline',\r\n\t\t\tnull,\r\n\t\t\t'insertunorderedlist',\r\n\t\t\t'insertorderedlist',\r\n\t\t\t'outdent',\r\n\t\t\t'indent',\r\n\t\t\tnull,\r\n\t\t\t'justifyleft',\r\n\t\t\t'justifycenter',\r\n\t\t\t'justifyright',\r\n\t\t\t'justifyfull',\r\n\t\t\tnull,\r\n\t\t\t'createLink',\r\n\t\t\t'unlink',\r\n\t\t\tnull,\r\n\t\t\t'insertImage',\r\n\t\t\tnull,\r\n\t\t\t'foreColor',\r\n\t\t\tnull,\r\n\t\t\t'undo',\r\n\t\t\t'redo',\r\n\t\t\tnull,\r\n\t\t\t'viewSource'\r\n\t\t]\r\n\r\n\r\n\t\tthis.each(function() {\r\n\t\t\tvar toolbar = ' <div class=\"wysiwyg-toolbar btn-toolbar center\"> <div class=\"btn-group\"> ';\r\n\r\n\t\t\tfor(var tb in toolbar_buttons) if(toolbar_buttons.hasOwnProperty(tb)) {\r\n\t\t\t\tvar button = toolbar_buttons[tb];\r\n\t\t\t\tif(button === null){\r\n\t\t\t\t\ttoolbar += ' </div> <div class=\"btn-group\"> ';\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(typeof button == \"string\" && button in button_defaults) {\r\n\t\t\t\t\tbutton = button_defaults[button];\r\n\t\t\t\t\tbutton.name = toolbar_buttons[tb];\r\n\t\t\t\t} else if(typeof button == \"object\" && button.name in button_defaults) {\r\n\t\t\t\t\tbutton = $.extend(button_defaults[button.name] , button);\r\n\t\t\t\t}\r\n\t\t\t\telse continue;\r\n\t\t\t\t\r\n\t\t\t\tvar className = \"className\" in button ? button.className : 'btn-default';\r\n\t\t\t\tswitch(button.name) {\r\n\t\t\t\t\tcase 'font':\r\n\t\t\t\t\t\ttoolbar += ' <a class=\"btn btn-sm '+className+' dropdown-toggle\" data-toggle=\"dropdown\" title=\"'+button.title+'\"><i class=\"'+ ace.vars['icon'] + button.icon+'\"></i><i class=\"' + ace.vars['icon'] + 'fa fa-angle-down icon-on-right\"></i></a> ';\r\n\t\t\t\t\t\ttoolbar += ' <ul class=\"dropdown-menu dropdown-light dropdown-caret\">';\r\n\t\t\t\t\t\tfor(var font in button.values)\r\n\t\t\t\t\t\t\tif(button.values.hasOwnProperty(font))\r\n\t\t\t\t\t\t\t\ttoolbar += ' <li><a data-edit=\"fontName ' + button.values[font] +'\" style=\"font-family:\\''+ button.values[font]  +'\\'\">'+button.values[font]  + '</a></li> '\r\n\t\t\t\t\t\ttoolbar += ' </ul>';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'fontSize':\r\n\t\t\t\t\t\ttoolbar += ' <a class=\"btn btn-sm '+className+' dropdown-toggle\" data-toggle=\"dropdown\" title=\"'+button.title+'\"><i class=\"'+ ace.vars['icon'] + button.icon+'\"></i>&nbsp;<i class=\"'+ ace.vars['icon'] + 'fa fa-angle-down icon-on-right\"></i></a> ';\r\n\t\t\t\t\t\ttoolbar += ' <ul class=\"dropdown-menu dropdown-light dropdown-caret\"> ';\r\n\t\t\t\t\t\tfor(var size in button.values)\r\n\t\t\t\t\t\t\tif(button.values.hasOwnProperty(size))\r\n\t\t\t\t\t\t\t\ttoolbar += ' <li><a data-edit=\"fontSize '+size+'\"><font size=\"'+size+'\">'+ button.values[size] +'</font></a></li> '\r\n\t\t\t\t\t\ttoolbar += ' </ul> ';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'createLink':\r\n\t\t\t\t\t\ttoolbar += ' <div class=\"btn-group\"> <a class=\"btn btn-sm '+className+' dropdown-toggle\" data-toggle=\"dropdown\" title=\"'+button.title+'\"><i class=\"'+ ace.vars['icon'] + button.icon+'\"></i></a> ';\r\n\t\t\t\t\t\ttoolbar += ' <div class=\"dropdown-menu dropdown-caret dropdown-menu-right\">\\\r\n\t\t\t\t\t\t\t <div class=\"input-group\">\\\r\n\t\t\t\t\t\t\t\t<input class=\"form-control\" placeholder=\"'+button.placeholder+'\" type=\"text\" data-edit=\"'+button.name+'\" />\\\r\n\t\t\t\t\t\t\t\t<span class=\"input-group-btn\">\\\r\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn-sm '+button.button_class+'\" type=\"button\">'+button.button_text+'</button>\\\r\n\t\t\t\t\t\t\t\t</span>\\\r\n\t\t\t\t\t\t\t </div>\\\r\n\t\t\t\t\t\t</div> </div>';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'insertImage':\r\n\t\t\t\t\t\ttoolbar += ' <div class=\"btn-group\"> <a class=\"btn btn-sm '+className+' dropdown-toggle\" data-toggle=\"dropdown\" title=\"'+button.title+'\"><i class=\"'+ ace.vars['icon'] + button.icon+'\"></i></a> ';\r\n\t\t\t\t\t\ttoolbar += ' <div class=\"dropdown-menu dropdown-caret dropdown-menu-right\">\\\r\n\t\t\t\t\t\t\t <div class=\"input-group\">\\\r\n\t\t\t\t\t\t\t\t<input class=\"form-control\" placeholder=\"'+button.placeholder+'\" type=\"text\" data-edit=\"'+button.name+'\" />\\\r\n\t\t\t\t\t\t\t\t<span class=\"input-group-btn\">\\\r\n\t\t\t\t\t\t\t\t\t<button class=\"btn btn-sm '+button.button_insert_class+'\" type=\"button\">'+button.button_insert+'</button>\\\r\n\t\t\t\t\t\t\t\t</span>\\\r\n\t\t\t\t\t\t\t </div>';\r\n\t\t\t\t\t\t\tif( button.choose_file && 'FileReader' in window ) toolbar +=\r\n\t\t\t\t\t\t\t '<div class=\"space-2\"></div>\\\r\n\t\t\t\t\t\t\t <label class=\"center block no-margin-bottom\">\\\r\n\t\t\t\t\t\t\t\t<button class=\"btn btn-sm '+button.button_class+' wysiwyg-choose-file\" type=\"button\">'+button.button_text+'</button>\\\r\n\t\t\t\t\t\t\t\t<input type=\"file\" data-edit=\"'+button.name+'\" />\\\r\n\t\t\t\t\t\t\t  </label>'\r\n\t\t\t\t\t\ttoolbar += ' </div> </div>';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'foreColor':\r\n\t\t\t\t\tcase 'backColor':\r\n\t\t\t\t\t\ttoolbar += ' <select class=\"hide wysiwyg_colorpicker\" title=\"'+button.title+'\"> ';\r\n\t\t\t\t\t\t$.each(button.values, function (_, color) {\r\n                            toolbar += ' <option value=\"' + color + '\">' + color + '</option> ';\r\n                        });\r\n\t\t\t\t\t\ttoolbar += ' </select> ';\r\n\t\t\t\t\t\ttoolbar += ' <input style=\"display:none;\" disabled class=\"hide\" type=\"text\" data-edit=\"'+button.name+'\" /> ';\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t\t\tcase 'viewSource':\r\n\t\t\t\t\t\ttoolbar += ' <a class=\"btn btn-sm '+className+'\" data-view=\"source\" title=\"'+button.title+'\"><i class=\"'+ ace.vars['icon'] + button.icon+'\"></i></a> ';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\tdefault:\r\n\t\t\t\t\t\ttoolbar += ' <a class=\"btn btn-sm '+className+'\" data-edit=\"'+button.name+'\" title=\"'+button.title+'\"><i class=\"'+ ace.vars['icon'] + button.icon+'\"></i></a> ';\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\ttoolbar += ' </div> ';\r\n\t\t\t////////////\r\n\t\t\tvar speech_input;\r\n\t\t\tif (options.speech_button && 'onwebkitspeechchange' in (speech_input = document.createElement('input'))) {\r\n\t\t\t\ttoolbar += ' <input class=\"wysiwyg-speech-input\" type=\"text\" data-edit=\"inserttext\" x-webkit-speech />';\r\n\t\t\t}\r\n\t\t\tspeech_input = null;\r\n\t\t\t////////////\r\n\t\t\ttoolbar += ' </div> ';\r\n\r\n\r\n\t\t\t//if we have a function to decide where to put the toolbar, then call that\r\n\t\t\tif(options.toolbar_place) toolbar = options.toolbar_place.call(this, toolbar);\r\n\t\t\t//otherwise put it just before our DIV\r\n\t\t\telse toolbar = $(this).before(toolbar).prev();\r\n\r\n\t\t\tif($.fn.tooltip) toolbar.find('a[title]').tooltip({animation:false, container:'body'});\r\n\t\t\t\r\n\t\t\ttoolbar.find('.dropdown-menu input[type=text]').on('click', function() {return false})\r\n\t\t    .on('change', function() {$(this).closest('.dropdown-menu').siblings('.dropdown-toggle').dropdown('toggle')})\r\n\t\t\t.on('keydown', function (e) {\r\n\t\t\t\tif(e.which == 27) {\r\n\t\t\t\t\tthis.value = '';\r\n\t\t\t\t\t$(this).change();\r\n\t\t\t\t}\r\n\t\t\t\telse if(e.which == 13) {\r\n\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t$(this).change();\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\ttoolbar.find('input[type=file]').prev().on(ace.click_event, function (e) { \r\n\t\t\t\t$(this).next().click();\r\n\t\t\t});\r\n\t\t\ttoolbar.find('.wysiwyg_colorpicker').each(function() {\r\n\t\t\t\tvar el = $(this).ace_colorpicker({pull_right:true}).change(function(){\r\n\t\t\t\t\t$(this).nextAll('input').eq(0).val(this.value).change();\r\n\t\t\t\t}).next().find('.btn-colorpicker')\r\n\t\t\t\t\r\n\t\t\t\tif($.fn.tooltip) el.tooltip({title: this.title, animation:false, container:'body'})\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tvar self = $(this);\r\n\t\t\t//view source\r\n\t\t\tvar view_source = false;\r\n\t\t\ttoolbar.find('a[data-view=source]').on('click', function(e){\r\n\t\t\t\te.preventDefault();\r\n\t\t\t\t\r\n\t\t\t\tif(!view_source) {\r\n\t\t\t\t\t$('<textarea />')\r\n\t\t\t\t\t.css({'width':self.outerWidth(), 'height':self.outerHeight()})\r\n\t\t\t\t\t.val(self.html())\r\n\t\t\t\t\t.insertAfter(self)\r\n\t\t\t\t\tself.hide();\r\n\t\t\t\t\t\r\n\t\t\t\t\t$(this).addClass('active');\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tvar textarea = self.next();\r\n\t\t\t\t\tself.html(textarea.val()).show();\r\n\t\t\t\t\ttextarea.remove();\r\n\t\t\t\t\t\r\n\t\t\t\t\t$(this).removeClass('active');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tview_source = !view_source;\r\n\t\t\t});\r\n\r\n\r\n\t\t\tvar $options = $.extend({}, { activeToolbarClass: 'active' , toolbarSelector : toolbar }, options.wysiwyg || {})\r\n\t\t\t$(this).wysiwyg( $options );\r\n\t\t});\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\r\n})(window.jQuery);\r\n\r\n;/**\r\n <b>Spinner</b>. A wrapper for FuelUX spinner element.\r\n It's just a wrapper so you still need to include FuelUX spinner script first.\r\n*/\r\n(function($ , undefined) {\r\n\t//a wrapper for fuelux spinner\r\n\tfunction Ace_Spinner(element , _options) {\r\n\t\tvar attrib_values = ace.helper.getAttrSettings(element, $.fn.ace_spinner.defaults);\r\n\t\tvar options = $.extend({}, $.fn.ace_spinner.defaults, _options, attrib_values);\r\n\t\r\n\t\tvar max = options.max\r\n\t\tmax = (''+max).length\r\n\t\tvar width = parseInt(Math.max((max * 20 + 40) , 90))\r\n\r\n\t\tvar $element = $(element);\r\n\t\t\r\n\t\tvar btn_class = 'btn-sm';//default\r\n\t\tvar sizing = 2;\r\n\t\tif($element.hasClass('input-sm')) {\r\n\t\t\tbtn_class = 'btn-xs';\r\n\t\t\tsizing = 1;\r\n\t\t}\r\n\t\telse if($element.hasClass('input-lg')) {\r\n\t\t\tbtn_class = 'btn-lg';\r\n\t\t\tsizing = 3;\r\n\t\t}\r\n\t\t\r\n\t\tif(sizing == 2) width += 25;\r\n\t\telse if(sizing == 3) width += 50;\r\n\t\t\r\n\t\t$element.addClass('spinbox-input form-control text-center').wrap('<div class=\"ace-spinner middle\">')\r\n\r\n\t\tvar $parent_div = $element.closest('.ace-spinner').spinbox(options).wrapInner(\"<div class='input-group'></div>\")\r\n\t\tvar $spinner = $parent_div.data('fu.spinbox');\r\n\t\t\r\n\t\tif(options.on_sides)\r\n\t\t{\r\n\t\t\t$element\r\n\t\t\t.before('<div class=\"spinbox-buttons input-group-btn\">\\\r\n\t\t\t\t\t<button type=\"button\" class=\"btn spinbox-down '+btn_class+' '+options.btn_down_class+'\">\\\r\n\t\t\t\t\t\t<i class=\"icon-only '+ ace.vars['icon'] + options.icon_down+'\"></i>\\\r\n\t\t\t\t\t</button>\\\r\n\t\t\t\t</div>')\r\n\t\t\t.after('<div class=\"spinbox-buttons input-group-btn\">\\\r\n\t\t\t\t\t<button type=\"button\" class=\"btn spinbox-up '+btn_class+' '+options.btn_up_class+'\">\\\r\n\t\t\t\t\t\t<i class=\"icon-only '+ ace.vars['icon'] + options.icon_up+'\"></i>\\\r\n\t\t\t\t\t</button>\\\r\n\t\t\t\t</div>');\r\n\r\n\t\t\t$parent_div.addClass('touch-spinner')\r\n\t\t\t$parent_div.css('width' , width+'px')\r\n\t\t}\r\n\t\telse {\r\n\t\t\t $element\r\n\t\t\t .after('<div class=\"spinbox-buttons input-group-btn\">\\\r\n\t\t\t\t\t<button type=\"button\" class=\"btn spinbox-up '+btn_class+' '+options.btn_up_class+'\">\\\r\n\t\t\t\t\t\t<i class=\"icon-only '+ ace.vars['icon'] + options.icon_up+'\"></i>\\\r\n\t\t\t\t\t</button>\\\r\n\t\t\t\t\t<button type=\"button\" class=\"btn spinbox-down '+btn_class+' '+options.btn_down_class+'\">\\\r\n\t\t\t\t\t\t<i class=\"icon-only '+ ace.vars['icon'] + options.icon_down+'\"></i>\\\r\n\t\t\t\t\t</button>\\\r\n\t\t\t\t</div>')\r\n\r\n\t\t\tif(ace.vars['touch'] || options.touch_spinner) {\r\n\t\t\t\t$parent_div.addClass('touch-spinner')\r\n\t\t\t\t$parent_div.css('width' , width+'px')\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$element.next().addClass('btn-group-vertical');\r\n\t\t\t\t$parent_div.css('width' , width+'px')\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\t$parent_div.on('changed', function(){\r\n\t\t\t$element.trigger('change')//trigger the input's change event\r\n\t\t});\r\n\r\n\t\tthis._call = function(name, arg) {\r\n\t\t\t$spinner[name](arg);\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t$.fn.ace_spinner = function(option, value) {\r\n\t\tvar retval;\r\n\r\n\t\tvar $set = this.each(function() {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tvar data = $this.data('ace_spinner');\r\n\t\t\tvar options = typeof option === 'object' && option;\r\n\r\n\t\t\tif (!data) {\r\n\t\t\t\toptions = $.extend({}, $.fn.ace_spinner.defaults, option);\r\n\t\t\t\t$this.data('ace_spinner', (data = new Ace_Spinner(this, options)));\r\n\t\t\t}\r\n\t\t\tif (typeof option === 'string') retval = data._call(option, value);\r\n\t\t});\r\n\r\n\t\treturn (retval === undefined) ? $set : retval;\r\n\t}\r\n\t\r\n\t$.fn.ace_spinner.defaults = {\r\n\t\t'icon_up' : 'fa fa-chevron-up',\r\n\t\t'icon_down': 'fa fa-chevron-down',\r\n\t\t\r\n\t\t'on_sides': false,\t\t\r\n\t\t'btn_up_class': '',\r\n\t\t'btn_down_class' : '',\r\n\t\t\r\n\t\t'max' : 999,\r\n\t\t'touch_spinner': false\r\n     }\r\n\r\n\r\n})(window.jQuery);\r\n;/**\r\n <b>Treeview</b>. A wrapper for FuelUX treeview element.\r\n It's just a wrapper so you still need to include FuelUX treeview script first.\r\n*/\r\n(function($ , undefined) {\r\n\r\n\t$.fn.aceTree = $.fn.ace_tree = function(options) {\r\n\t\tvar $defaults = {\r\n\t\t\t'open-icon' : ace.vars['icon'] + 'fa fa-folder-open',\r\n\t\t\t'close-icon' : ace.vars['icon'] + 'fa fa-folder',\r\n\t\t\t'toggle-icon': ace.vars['icon'] + 'fa fa-play',\r\n\t\t\t'selected-icon' : ace.vars['icon'] + 'fa fa-check',\r\n\t\t\t'unselected-icon' : ace.vars['icon'] + 'fa fa-times',\r\n\t\t\t'base-icon' : ace.vars['icon'] + 'fa',\r\n\t\t\t'folder-open-icon' : 'fa fa-plus-square-o',\r\n\t\t\t'folder-close-icon' : 'fa fa-plus-minus-o',\r\n\t\t\t'loadingHTML': 'Loading...'\r\n\t\t}\r\n\r\n\t\tthis.each(function() {\r\n\t\t\r\n\t\t\tvar attrib_values = ace.helper.getAttrSettings(this, $defaults);\r\n\t\t\tvar $options = $.extend({}, $defaults, options, attrib_values);\r\n\r\n\t\t\tvar $this = $(this);\r\n\t\t\t$this.addClass('tree').attr('role', 'tree');\r\n\t\t\t$this.html(\r\n\t\t\t'<li class=\"tree-branch hide\" data-template=\"treebranch\" role=\"treeitem\" aria-expanded=\"false\">\\\r\n\t\t\t\t'+($options['folderSelect'] ? '<i class=\"icon-caret '+$options['folder-open-icon']+'\"></i>&nbsp;' : '')+'\\\r\n\t\t\t\t<div class=\"tree-branch-header\">\\\r\n\t\t\t\t\t<span class=\"tree-branch-name\">\\\r\n\t\t\t\t\t\t<i class=\"icon-folder '+$options['close-icon']+'\"></i>\\\r\n\t\t\t\t\t\t<span class=\"tree-label\"></span>\\\r\n\t\t\t\t\t</span>\\\r\n\t\t\t\t</div>\\\r\n\t\t\t\t<ul class=\"tree-branch-children\" role=\"group\"></ul>\\\r\n\t\t\t\t<div class=\"tree-loader\" role=\"alert\">'+$options['loadingHTML']+'</div>\\\r\n\t\t\t</li>\\\r\n\t\t\t<li class=\"tree-item hide\" data-template=\"treeitem\" role=\"treeitem\">\\\r\n\t\t\t\t<span class=\"tree-item-name\">\\\r\n\t\t\t\t  '+($options['unselected-icon'] == null ? '' : '<i class=\"icon-item '+$options['unselected-icon']+'\"></i>')+'\\\r\n\t\t\t\t  <span class=\"tree-label\"></span>\\\r\n\t\t\t\t</span>\\\r\n\t\t\t</li>');\r\n\t\t\t\r\n\t\t\t$this.addClass($options['selectable'] == true ? 'tree-selectable' : 'tree-unselectable');\r\n\t\t\t\r\n\t\t\t$this.tree($options);\r\n\t\t});\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n})(window.jQuery);\r\n;/**\r\n <b>Wizard</b>. A wrapper for FuelUX wizard element.\r\n It's just a wrapper so you still need to include FuelUX wizard script first.\r\n*/\r\n(function($ , undefined) {\r\n\t$.fn.aceWizard = $.fn.ace_wizard = function(options) {\r\n\r\n\t\tthis.each(function() {\r\n\t\t\tvar $this = $(this);\r\n\t\t\t$this.wizard();\r\n\t\t\t\r\n\t\t\tif(ace.vars['old_ie']) $this.find('ul.steps > li').last().addClass('last-child');\r\n\r\n\t\t\tvar buttons = (options && options['buttons']) ? $(options['buttons']) : $this.siblings('.wizard-actions').eq(0);\r\n\t\t\tvar $wizard = $this.data('fu.wizard');\r\n\t\t\t$wizard.$prevBtn.remove();\r\n\t\t\t$wizard.$nextBtn.remove();\r\n\t\t\t\r\n\t\t\t$wizard.$prevBtn = buttons.find('.btn-prev').eq(0).on(ace.click_event,  function(){\r\n\t\t\t\t$wizard.previous();\r\n\t\t\t}).attr('disabled', 'disabled');\r\n\t\t\t$wizard.$nextBtn = buttons.find('.btn-next').eq(0).on(ace.click_event,  function(){\r\n\t\t\t\t$wizard.next();\r\n\t\t\t}).removeAttr('disabled');\r\n\t\t\t$wizard.nextText = $wizard.$nextBtn.text();\r\n\t\t\t\r\n\t\t\tvar step = options && ((options.selectedItem && options.selectedItem.step) || options.step);\r\n\t\t\tif(step) {\r\n\t\t\t\t$wizard.currentStep = step;\r\n\t\t\t\t$wizard.setState();\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n})(window.jQuery);\r\n;/**\r\n <b>Content Slider</b>. with custom content and elements based on Bootstrap modals.\r\n*/\r\n(function($ , undefined) {\r\n\tvar $window = $(window);\r\n\r\n\tfunction Aside(modal, settings) {\r\n\t\tvar self = this;\r\n\t\r\n\t\tvar $modal = $(modal);\r\n\t\tvar placement = 'right', vertical = false;\r\n\t\tvar hasFade = $modal.hasClass('fade');//Bootstrap enables transition only when modal is \".fade\"\r\n\r\n\t\tvar attrib_values = ace.helper.getAttrSettings(modal, $.fn.ace_aside.defaults);\r\n\t\tthis.settings = $.extend({}, $.fn.ace_aside.defaults, settings, attrib_values);\r\n\t\t\r\n\t\t//if no scroll style specified and modal has dark background, let's make scrollbars 'white'\r\n\t\tif(this.settings.background && !settings.scroll_style && !attrib_values.scroll_style) { \r\n\t\t\tthis.settings.scroll_style = 'scroll-white no-track';\r\n\t\t}\r\n\r\n\t\t\r\n\t\tthis.container = this.settings.container;\r\n\t\tif(this.container) {\r\n\t\t\ttry {\r\n\t\t\t\tif( $(this.container).get(0) == document.body ) this.container = null;\r\n\t\t\t} catch(e) {}\r\n\t\t}\r\n\t\tif(this.container) {\r\n\t\t\tthis.settings.backdrop = false;//no backdrop when inside another element?\r\n\t\t\t$modal.addClass('aside-contained');\r\n\t\t}\r\n\r\n\t\t\r\n\t\tvar dialog = $modal.find('.modal-dialog');\r\n\t\tvar content = $modal.find('.modal-content');\r\n\t\tvar delay = 300;\r\n\t\t\r\n\t\tthis.initiate = function() {\r\n\t\t\tmodal.className = modal.className.replace(/(\\s|^)aside\\-(right|top|left|bottom)(\\s|$)/ig , '$1$3');\r\n\r\n\t\t\tplacement = this.settings.placement;\r\n\t\t\tif(placement) placement = $.trim(placement.toLowerCase());\r\n\t\t\tif(!placement || !(/right|top|left|bottom/.test(placement))) placement = 'right';\r\n\r\n\t\t\t$modal.attr('data-placement', placement);\r\n\t\t\t$modal.addClass('aside-' + placement);\r\n\t\t\t\r\n\t\t\tif( /right|left/.test(placement) ) {\r\n\t\t\t\tvertical = true;\r\n\t\t\t\t$modal.addClass('aside-vc');//vertical\r\n\t\t\t}\r\n\t\t\telse $modal.addClass('aside-hz');//horizontal\r\n\t\t\t\r\n\t\t\tif( this.settings.fixed ) $modal.addClass('aside-fixed');\r\n\t\t\tif( this.settings.background ) $modal.addClass('aside-dark');\r\n\t\t\tif( this.settings.offset ) $modal.addClass('navbar-offset');\r\n\t\t\t\r\n\t\t\tif( !this.settings.transition ) $modal.addClass('transition-off');\r\n\t\t\t\r\n\t\t\t$modal.addClass('aside-hidden');\r\n\r\n\t\t\tthis.insideContainer();\r\n\t\t\t\r\n\t\t\t/////////////////////////////\r\n\t\t\t\r\n\t\t\tdialog = $modal.find('.modal-dialog');\r\n\t\t\tcontent = $modal.find('.modal-content');\r\n\t\t\t\r\n\t\t\tif(!this.settings.body_scroll) {\r\n\t\t\t\t//don't allow body scroll when modal is open\r\n\t\t\t\t$modal.on('mousewheel.aside DOMMouseScroll.aside touchmove.aside pointermove.aside', function(e) {\r\n\t\t\t\t\tif( !$.contains(content[0], e.target) ) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\treturn false;\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif( this.settings.backdrop == false ) {\r\n\t\t\t\t$modal.addClass('no-backdrop');\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.show = function() {\r\n\t\t\tif(this.settings.backdrop == false) {\r\n\t\t\t  try {\r\n\t\t\t\t$modal.data('bs.modal').$backdrop.remove();\r\n\t\t\t  } catch(e){}\r\n\t\t\t}\r\n\t\r\n\t\t\tif(this.container) $(this.container).addClass('overflow-hidden');\r\n\t\t\telse $modal.css('position', 'fixed')\r\n\t\t\t\r\n\t\t\t$modal.removeClass('aside-hidden');\r\n\t\t}\r\n\t\t\r\n\t\tthis.hide = function() {\r\n\t\t\tif(this.container) {\r\n\t\t\t\tthis.container.addClass('overflow-hidden');\r\n\t\t\t\t\r\n\t\t\t\tif(ace.vars['firefox']) {\r\n\t\t\t\t\t//firefox needs a bit of forcing re-calculation\r\n\t\t\t\t\tmodal.offsetHeight;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\r\n\t\t\ttoggleButton();\r\n\t\t\t\r\n\t\t\tif(ace.vars['transition'] && !hasFade) {\r\n\t\t\t\t$modal.one('bsTransitionEnd', function() {\r\n\t\t\t\t\t$modal.addClass('aside-hidden');\r\n\t\t\t\t\t$modal.css('position', '');\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(self.container) self.container.removeClass('overflow-hidden');\r\n\t\t\t\t}).emulateTransitionEnd(delay);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.shown = function() {\r\n\t\t\ttoggleButton();\r\n\t\t\t$('body').removeClass('modal-open').css('padding-right', '');\r\n\t\t\t\r\n\t\t\tif( this.settings.backdrop == 'invisible' ) {\r\n\t\t\t  try {\r\n\t\t\t\t$modal.data('bs.modal').$backdrop.css('opacity', 0);\r\n\t\t\t  } catch(e){}\r\n\t\t\t}\r\n\r\n\t\t\tvar size = !vertical ? dialog.height() : content.height();\r\n\t\t\tif(!ace.vars['touch']) {\r\n\t\t\t\tif(!content.hasClass('ace-scroll')) {\r\n\t\t\t\t\tcontent.ace_scroll({\r\n\t\t\t\t\t\t\tsize: size,\r\n\t\t\t\t\t\t\treset: true,\r\n\t\t\t\t\t\t\tmouseWheelLock: true,\r\n\t\t\t\t\t\t\tlockAnyway: !this.settings.body_scroll,\r\n\t\t\t\t\t\t\tstyleClass: this.settings.scroll_style,\r\n\t\t\t\t\t\t\t'observeContent': true,\r\n\t\t\t\t\t\t\t'hideOnIdle': !ace.vars['old_ie'],\r\n\t\t\t\t\t\t\t'hideDelay': 1500\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcontent.addClass('overflow-scroll').css('max-height', size+'px');\r\n\t\t\t}\r\n\r\n\t\t\t$window\r\n\t\t\t.off('resize.modal.aside')\r\n\t\t\t.on('resize.modal.aside', function() {\r\n\t\t\t\tif(!ace.vars['touch']) {\r\n\t\t\t\t  content.ace_scroll('disable');//to get correct size when going from small window size to large size\r\n\t\t\t\t\tvar size = !vertical ? dialog.height() : content.height();\r\n\t\t\t\t\tcontent\r\n\t\t\t\t\t.ace_scroll('update', {'size': size})\r\n\t\t\t\t\t.ace_scroll('enable')\r\n\t\t\t\t\t.ace_scroll('reset');\r\n\t\t\t\t}\r\n\t\t\t\telse content.css('max-height', (!vertical ? dialog.height() : content.height())+'px');\r\n\t\t\t}).triggerHandler('resize.modal.aside');\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t///////////////////////////////////////////////////////////////////////////\r\n\t\t\tif(self.container && ace.vars['transition'] && !hasFade) {\r\n\t\t\t\t$modal.one('bsTransitionEnd', function() {\r\n\t\t\t\t\tself.container.removeClass('overflow-hidden')\r\n\t\t\t\t}).emulateTransitionEnd(delay);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.hidden = function() {\r\n\t\t\t$window.off('.aside')\r\n\t\t\t//$modal.off('.aside')\r\n\t\t\t//\t\t\t\r\n\t\t\tif( !ace.vars['transition'] || hasFade ) {\r\n\t\t\t\t$modal.addClass('aside-hidden');\r\n\t\t\t\t$modal.css('position', '');\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.insideContainer = function() {\r\n\t\t\tvar container = $('.main-container');\r\n\r\n\t\t\tvar dialog = $modal.find('.modal-dialog');\r\n\t\t\tdialog.css({'right': '', 'left': ''});\r\n\t\t\tif( container.hasClass('container') ) {\r\n\t\t\t\tvar flag = false;\r\n\t\t\t\tif(vertical == true) {\r\n\t\t\t\t\tdialog.css( placement, parseInt(($window.width() - container.width()) / 2) );\r\n\t\t\t\t\tflag = true;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//strange firefox issue, not redrawing properly on window resize (zoom in/out)!!!!\r\n\t\t\t\t//--- firefix is still having issue!\r\n\t\t\t\tif(flag && ace.vars['firefox']) {\r\n\t\t\t\t\tace.helper.redraw(container[0]);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.flip = function() {\r\n\t\t\tvar flipSides = {right : 'left', left : 'right', top: 'bottom', bottom: 'top'};\r\n\t\t\t$modal.removeClass('aside-'+placement).addClass('aside-'+flipSides[placement]);\r\n\t\t\tplacement = flipSides[placement];\r\n\t\t}\r\n\r\n\t\tvar toggleButton = function() {\r\n\t\t\tvar btn = $modal.find('.aside-trigger');\r\n\t\t\tif(btn.length == 0) return;\r\n\t\t\tbtn.toggleClass('open');\r\n\t\t\t\r\n\t\t\tvar icon = btn.find(ace.vars['.icon']);\r\n\t\t\tif(icon.length == 0) return;\r\n\t\t\ticon.toggleClass(icon.attr('data-icon1') + \" \" + icon.attr('data-icon2'));\r\n\t\t}\r\n\t\t\r\n\r\n\t\tthis.initiate();\r\n\t\t\r\n\t\tif(this.container) this.container = $(this.container);\r\n\t\t$modal.appendTo(this.container || 'body'); \r\n\t}\r\n\r\n\r\n\t$(document)\r\n\t.on('show.bs.modal', '.modal.aside', function(e) {\r\n\t\t$('.aside.in').modal('hide');//??? hide previous open ones?\r\n\t\t$(this).ace_aside('show');\r\n\t})\r\n\t.on('hide.bs.modal', '.modal.aside', function(e) {\r\n\t\t$(this).ace_aside('hide');\r\n\t})\r\n\t.on('shown.bs.modal', '.modal.aside', function(e) {\r\n\t\t$(this).ace_aside('shown');\r\n\t})\r\n\t.on('hidden.bs.modal', '.modal.aside', function(e) {\r\n\t\t$(this).ace_aside('hidden');\r\n\t})\r\n\t\r\n\t\r\n\r\n\t\r\n\t$(window).on('resize.aside_container', function() {\r\n\t\t$('.modal.aside').ace_aside('insideContainer');\r\n\t});\r\n\t$(document).on('settings.ace.aside', function(e, event_name) {\r\n\t\tif(event_name == 'main_container_fixed') $('.modal.aside').ace_aside('insideContainer');\r\n\t});\r\n\r\n\t$.fn.aceAside = $.fn.ace_aside = function (option, value) {\r\n\t\tvar method_call;\r\n\r\n\t\tvar $set = this.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tvar data = $this.data('ace_aside');\r\n\t\t\tvar options = typeof option === 'object' && option;\r\n\r\n\t\t\tif (!data) $this.data('ace_aside', (data = new Aside(this, options)));\r\n\t\t\tif (typeof option === 'string' && typeof data[option] === 'function') {\r\n\t\t\t\tif(value instanceof Array) method_call = data[option].apply(data, value);\r\n\t\t\t\telse method_call = data[option](value);\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\treturn (method_call === undefined) ? $set : method_call;\r\n\t}\r\n\t\r\n\t$.fn.ace_aside.defaults = {\r\n\t\tfixed: false,\r\n\t\tbackground: false,\r\n\t\toffset: false,\r\n\t\tbody_scroll: false,\r\n\t\ttransition: true,\r\n\t\tscroll_style: 'scroll-dark no-track',\r\n\t\tcontainer: null,\r\n\t\tbackdrop: false,\r\n\t\tplacement: 'right'\r\n     }\r\n\r\n})(window.jQuery);"],"sourceRoot":"/source/"}