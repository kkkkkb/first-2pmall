{"version":3,"sources":["elements.scroller.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"elements.scroller.js","sourcesContent":["/**\r\n <b>Ace custom scroller</b>. It is not as feature-rich as plugins such as NiceScroll but it's good enough for most cases.\r\n*/\r\n(function($ , undefined) {\r\n\tvar Ace_Scroll = function(element , _settings) {\r\n\t\tvar self = this;\r\n\t\t\r\n\t\tvar attrib_values = ace.helper.getAttrSettings(element, $.fn.ace_scroll.defaults);\r\n\t\tvar settings = $.extend({}, $.fn.ace_scroll.defaults, _settings, attrib_values);\r\n\t\r\n\t\tthis.size = 0;\r\n\t\tthis.lock = false;\r\n\t\tthis.lock_anyway = false;\r\n\t\t\r\n\t\tthis.$element = $(element);\r\n\t\tthis.element = element;\r\n\t\t\r\n\t\tvar vertical = true;\r\n\r\n\t\tvar disabled = false;\r\n\t\tvar active = false;\r\n\t\tvar created = false;\r\n\r\n\t\t\r\n\t\tvar $content_wrap = null, content_wrap = null;\r\n\t\tvar $track = null, $bar = null, track = null, bar = null;\r\n\t\tvar bar_style = null;\r\n\t\t\r\n\t\tvar bar_size = 0, bar_pos = 0, bar_max_pos = 0, bar_size_2 = 0, move_bar = true;\r\n\t\tvar reset_once = false;\r\n\t\t\r\n\t\tvar styleClass = '';\r\n\t\tvar trackFlip = false;//vertical on left or horizontal on top\r\n\t\tvar trackSize = 0;\r\n\r\n\t\tvar css_pos,\r\n\t\t\tcss_size,\r\n\t\t\tmax_css_size,\r\n\t\t\tclient_size,\r\n\t\t\tscroll_direction,\r\n\t\t\tscroll_size;\r\n\r\n\t\tvar ratio = 1;\r\n\t\tvar inline_style = false;\r\n\t\tvar mouse_track = false;\r\n\t\tvar mouse_release_target = 'onmouseup' in window ? window : 'html';\r\n\t\tvar dragEvent = settings.dragEvent || false;\r\n\t\t\r\n\t\tvar trigger_scroll = _settings.scrollEvent || false;\r\n\t\t\r\n\t\t\r\n\t\tvar detached = settings.detached || false;//when detached, hideOnIdle as well?\r\n\t\tvar updatePos = settings.updatePos || false;//default is true\r\n\t\t\r\n\t\tvar hideOnIdle = settings.hideOnIdle || false;\r\n\t\tvar hideDelay = settings.hideDelay || 1500;\r\n\t\tvar insideTrack = false;//used to hide scroll track when mouse is up and outside of track\r\n\t\tvar observeContent = settings.observeContent || false;\r\n\t\tvar prevContentSize = 0;\r\n\t\t\r\n\t\tvar is_dirty = true;//to prevent consecutive 'reset' calls\r\n\t\t\r\n\t\tthis.ref = function() {\r\n\t\t\treturn this;\r\n\t\t}\r\n\t\t\r\n\t\tthis.create = function(_settings) {\r\n\t\t\tif(created) return;\r\n\r\n\t\t\tif(_settings) settings = $.extend({}, $.fn.ace_scroll.defaults, _settings);\r\n\r\n\t\t\tthis.size = parseInt(this.$element.attr('data-size')) || settings.size || 200;\r\n\t\t\tvertical = !settings['horizontal'];\r\n\r\n\t\t\tcss_pos = vertical ? 'top' : 'left';//'left' for horizontal\r\n\t\t\tcss_size = vertical ? 'height' : 'width';//'width' for horizontal\r\n\t\t\tmax_css_size = vertical ? 'maxHeight' : 'maxWidth';\r\n\r\n\t\t\tclient_size = vertical ? 'clientHeight' : 'clientWidth';\r\n\t\t\tscroll_direction = vertical ? 'scrollTop' : 'scrollLeft';\r\n\t\t\tscroll_size = vertical ? 'scrollHeight' : 'scrollWidth';\r\n\r\n\r\n\r\n\t\t\tthis.$element.addClass('ace-scroll');\r\n\t\t\tif(this.$element.css('position') == 'static') {\r\n\t\t\t\tinline_style = this.element.style.position;\r\n\t\t\t\tthis.element.style.position = 'relative';\r\n\t\t\t} else inline_style = false;\r\n\r\n\t\t\tvar scroll_bar = null;\r\n\t\t\tif(!detached) {\r\n\t\t\t\tthis.$element.wrapInner('<div class=\"scroll-content\" />');\r\n\t\t\t\tthis.$element.prepend('<div class=\"scroll-track\"><div class=\"scroll-bar\"></div></div>');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tscroll_bar = $('<div class=\"scroll-track scroll-detached\"><div class=\"scroll-bar\"></div></div>').appendTo('body');\r\n\t\t\t}\r\n\r\n\r\n\t\t\t$content_wrap = this.$element;\r\n\t\t\tif(!detached) $content_wrap = this.$element.find('.scroll-content').eq(0);\r\n\t\t\t\r\n\t\t\tif(!vertical) $content_wrap.wrapInner('<div />');\r\n\t\t\t\r\n\t\t\tcontent_wrap = $content_wrap.get(0);\r\n\t\t\tif(detached) {\r\n\t\t\t\t//set position for detached scrollbar\r\n\t\t\t\t$track = scroll_bar;\r\n\t\t\t\tsetTrackPos();\r\n\t\t\t}\r\n\t\t\telse $track = this.$element.find('.scroll-track').eq(0);\r\n\t\t\t\r\n\t\t\t$bar = $track.find('.scroll-bar').eq(0);\r\n\t\t\ttrack = $track.get(0);\r\n\t\t\tbar = $bar.get(0);\r\n\t\t\tbar_style = bar.style;\r\n\r\n\t\t\t//add styling classes and horizontalness\r\n\t\t\tif(!vertical) $track.addClass('scroll-hz');\r\n\t\t\tif(settings.styleClass) {\r\n\t\t\t\tstyleClass = settings.styleClass;\r\n\t\t\t\t$track.addClass(styleClass);\r\n\t\t\t\ttrackFlip = !!styleClass.match(/scroll\\-left|scroll\\-top/);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//calculate size of track!\r\n\t\t\tif(trackSize == 0) {\r\n\t\t\t\t$track.show();\r\n\t\t\t\tgetTrackSize();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$track.hide();\r\n\t\t\t\r\n\r\n\t\t\t//if(!touchDrag) {\r\n\t\t\t$track.on('mousedown', mouse_down_track);\r\n\t\t\t$bar.on('mousedown', mouse_down_bar);\r\n\t\t\t//}\r\n\r\n\t\t\t$content_wrap.on('scroll', function() {\r\n\t\t\t\tif(move_bar) {\r\n\t\t\t\t\tbar_pos = parseInt(Math.round(this[scroll_direction] * ratio));\r\n\t\t\t\t\tbar_style[css_pos] = bar_pos + 'px';\r\n\t\t\t\t}\r\n\t\t\t\tmove_bar = false;\r\n\t\t\t\tif(trigger_scroll) this.$element.trigger('scroll', [content_wrap]);\r\n\t\t\t})\r\n\r\n\r\n\t\t\tif(settings.mouseWheel) {\r\n\t\t\t\tthis.lock = settings.mouseWheelLock;\r\n\t\t\t\tthis.lock_anyway = settings.lockAnyway;\r\n\r\n\t\t\t\t//mousewheel library available?\r\n\t\t\t\tthis.$element.on(!!$.event.special.mousewheel ? 'mousewheel.ace_scroll' : 'mousewheel.ace_scroll DOMMouseScroll.ace_scroll', function(event) {\r\n\t\t\t\t\tif(disabled) return;\r\n\t\t\t\t\tcheckContentChanges(true);\r\n\r\n\t\t\t\t\tif(!active) return !self.lock_anyway;\r\n\r\n\t\t\t\t\tif(mouse_track) {\r\n\t\t\t\t\t\tmouse_track = false;\r\n\t\t\t\t\t\t$('html').off('.ace_scroll')\r\n\t\t\t\t\t\t$(mouse_release_target).off('.ace_scroll');\r\n\t\t\t\t\t\tif(dragEvent) self.$element.trigger('drag.end');\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\r\n\t\t\t\t\tevent.deltaY = event.deltaY || 0;\r\n\t\t\t\t\tvar delta = (event.deltaY > 0 || event.originalEvent.detail < 0 || event.originalEvent.wheelDelta > 0) ? 1 : -1\r\n\t\t\t\t\tvar scrollEnd = false//have we reached the end of scrolling?\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar clientSize = content_wrap[client_size], scrollAmount = content_wrap[scroll_direction];\r\n\t\t\t\t\tif( !self.lock ) {\r\n\t\t\t\t\t\tif(delta == -1)\tscrollEnd = (content_wrap[scroll_size] <= scrollAmount + clientSize);\r\n\t\t\t\t\t\telse scrollEnd = (scrollAmount == 0);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tself.move_bar(true);\r\n\r\n\t\t\t\t\t//var step = parseInt( Math.min(Math.max(parseInt(clientSize / 8) , 80) , self.size) ) + 1;\r\n\t\t\t\t\tvar step = parseInt(clientSize / 8);\r\n\t\t\t\t\tif(step < 80) step = 80;\r\n\t\t\t\t\tif(step > self.size) step = self.size;\r\n\t\t\t\t\tstep += 1;\r\n\t\t\t\t\t\r\n\t\t\t\t\tcontent_wrap[scroll_direction] = scrollAmount - (delta * step);\r\n\r\n\r\n\t\t\t\t\treturn scrollEnd && !self.lock_anyway;\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t//swipe not available yet\r\n\t\t\tvar touchDrag = ace.vars['touch'] && 'ace_drag' in $.event.special && settings.touchDrag //&& !settings.touchSwipe;\r\n\t\t\t//add drag event for touch devices to scroll\r\n\t\t\tif(touchDrag/** || ($.fn.swipe && settings.touchSwipe)*/) {\r\n\t\t\t\tvar dir = '', event_name = touchDrag ? 'ace_drag' : 'swipe';\r\n\t\t\t\tthis.$element.on(event_name + '.ace_scroll', function(event) {\r\n\t\t\t\t\tif(disabled) {\r\n\t\t\t\t\t\tevent.retval.cancel = true;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tcheckContentChanges(true);\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(!active) {\r\n\t\t\t\t\t\tevent.retval.cancel = this.lock_anyway;\r\n\t\t\t\t\t\treturn;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tdir = event.direction;\r\n\t\t\t\t\tif( (vertical && (dir == 'up' || dir == 'down'))\r\n\t\t\t\t\t\t||\r\n\t\t\t\t\t\t(!vertical && (dir == 'left' || dir == 'right'))\r\n\t\t\t\t\t   )\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tvar distance = vertical ? event.dy : event.dx;\r\n\r\n\t\t\t\t\t\tif(distance != 0) {\r\n\t\t\t\t\t\t\tif(Math.abs(distance) > 20 && touchDrag) distance = distance * 2;\r\n\r\n\t\t\t\t\t\t\tself.move_bar(true);\r\n\t\t\t\t\t\t\tcontent_wrap[scroll_direction] = content_wrap[scroll_direction] + distance;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t/////////////////////////////////\r\n\t\t\t\r\n\t\t\tif(hideOnIdle) {\r\n\t\t\t\t$track.addClass('idle-hide');\r\n\t\t\t}\r\n\t\t\tif(observeContent) {\r\n\t\t\t\t$track.on('mouseenter.ace_scroll', function() {\r\n\t\t\t\t\tinsideTrack = true;\r\n\t\t\t\t\tcheckContentChanges(false);\r\n\t\t\t\t}).on('mouseleave.ace_scroll', function() {\r\n\t\t\t\t\tinsideTrack = false;\r\n\t\t\t\t\tif(mouse_track == false) hideScrollbars();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\r\n\t\t\t\r\n\t\t\t//some mobile browsers don't have mouseenter\r\n\t\t\tthis.$element.on('mouseenter.ace_scroll touchstart.ace_scroll', function(e) {\r\n\t\t\t\tis_dirty = true;\r\n\t\t\t\tif(observeContent) checkContentChanges(true);\r\n\t\t\t\telse if(settings.hoverReset) self.reset(true);\r\n\t\t\t\t\r\n\t\t\t\t$track.addClass('scroll-hover');\r\n\t\t\t}).on('mouseleave.ace_scroll touchend.ace_scroll', function() {\r\n\t\t\t\t$track.removeClass('scroll-hover');\r\n\t\t\t});\r\n\t\t\t//\r\n\r\n\t\t\tif(!vertical) $content_wrap.children(0).css(css_size, this.size);//the extra wrapper\r\n\t\t\t$content_wrap.css(max_css_size , this.size);\r\n\t\t\t\r\n\t\t\tdisabled = false;\r\n\t\t\tcreated = true;\r\n\t\t}\r\n\t\tthis.is_active = function() {\r\n\t\t\treturn active;\r\n\t\t}\r\n\t\tthis.is_enabled = function() {\r\n\t\t\treturn !disabled;\r\n\t\t}\r\n\t\tthis.move_bar = function($move) {\r\n\t\t\tmove_bar = $move;\r\n\t\t}\r\n\t\t\r\n\t\tthis.get_track = function() {\r\n\t\t\treturn track;\r\n\t\t}\r\n\r\n\t\tthis.reset = function(innert_call) {\r\n\t\t\tif(disabled) return;// this;\r\n\t\t\tif(!created) this.create();\r\n\t\t\t/////////////////////\r\n\t\t\tvar size = this.size;\r\n\t\t\t\r\n\t\t\tif(innert_call && !is_dirty) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tis_dirty = false;\r\n\r\n\t\t\tif(detached) {\r\n\t\t\t\tvar border_size = parseInt(Math.round( (parseInt($content_wrap.css('border-top-width')) + parseInt($content_wrap.css('border-bottom-width'))) / 2.5 ));//(2.5 from trial?!)\r\n\t\t\t\tsize -= border_size;//only if detached\r\n\t\t\t}\r\n\t\r\n\t\t\tvar content_size   = vertical ? content_wrap[scroll_size] : size;\r\n\t\t\tif( (vertical && content_size == 0) || (!vertical && this.element.scrollWidth == 0) ) {\r\n\t\t\t\t//element is hidden\r\n\t\t\t\t//this.$element.addClass('scroll-hidden');\r\n\t\t\t\t$track.removeClass('scroll-active')\r\n\t\t\t\treturn;// this;\r\n\t\t\t}\r\n\r\n\t\t\tvar available_space = vertical ? size : content_wrap.clientWidth;\r\n\r\n\t\t\tif(!vertical) $content_wrap.children(0).css(css_size, size);//the extra wrapper\r\n\t\t\t$content_wrap.css(max_css_size , this.size);\r\n\t\t\t\r\n\r\n\t\t\tif(content_size > available_space) {\r\n\t\t\t\tactive = true;\r\n\t\t\t\t$track.css(css_size, available_space).show();\r\n\r\n\t\t\t\tratio = parseFloat((available_space / content_size).toFixed(5))\r\n\t\t\t\t\r\n\t\t\t\tbar_size = parseInt(Math.round(available_space * ratio));\r\n\t\t\t\tbar_size_2 = parseInt(Math.round(bar_size / 2));\r\n\r\n\t\t\t\tbar_max_pos = available_space - bar_size;\r\n\t\t\t\tbar_pos = parseInt(Math.round(content_wrap[scroll_direction] * ratio));\r\n\r\n\t\t\t\tbar_style[css_size] = bar_size + 'px';\r\n\t\t\t\tbar_style[css_pos] = bar_pos + 'px';\r\n\t\t\t\t\r\n\t\t\t\t$track.addClass('scroll-active');\r\n\t\t\t\t\r\n\t\t\t\tif(trackSize == 0) {\r\n\t\t\t\t\tgetTrackSize();\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif(!reset_once) {\r\n\t\t\t\t\t//this.$element.removeClass('scroll-hidden');\r\n\t\t\t\t\tif(settings.reset) {\r\n\t\t\t\t\t\t//reset scrollbar to zero position at first\t\t\t\t\t\t\t\r\n\t\t\t\t\t\tcontent_wrap[scroll_direction] = 0;\r\n\t\t\t\t\t\tbar_style[css_pos] = 0;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treset_once = true;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(detached) setTrackPos();\r\n\t\t\t} else {\r\n\t\t\t\tactive = false;\r\n\t\t\t\t$track.hide();\r\n\t\t\t\t$track.removeClass('scroll-active');\r\n\t\t\t\t$content_wrap.css(max_css_size , '');\r\n\t\t\t}\r\n\r\n\t\t\treturn;// this;\r\n\t\t}\r\n\t\tthis.disable = function() {\r\n\t\t\tcontent_wrap[scroll_direction] = 0;\r\n\t\t\tbar_style[css_pos] = 0;\r\n\r\n\t\t\tdisabled = true;\r\n\t\t\tactive = false;\r\n\t\t\t$track.hide();\r\n\t\t\t\r\n\t\t\tthis.$element.addClass('scroll-disabled');\r\n\t\t\t\r\n\t\t\t$track.removeClass('scroll-active');\r\n\t\t\t$content_wrap.css(max_css_size , '');\r\n\t\t}\r\n\t\tthis.enable = function() {\r\n\t\t\tdisabled = false;\r\n\t\t\tthis.$element.removeClass('scroll-disabled');\r\n\t\t}\r\n\t\tthis.destroy = function() {\r\n\t\t\tactive = false;\r\n\t\t\tdisabled = false;\r\n\t\t\tcreated = false;\r\n\t\t\t\r\n\t\t\tthis.$element.removeClass('ace-scroll scroll-disabled scroll-active');\r\n\t\t\tthis.$element.off('.ace_scroll')\r\n\r\n\t\t\tif(!detached) {\r\n\t\t\t\tif(!vertical) {\r\n\t\t\t\t\t//remove the extra wrapping div\r\n\t\t\t\t\t$content_wrap.find('> div').children().unwrap();\r\n\t\t\t\t}\r\n\t\t\t\t$content_wrap.children().unwrap();\r\n\t\t\t\t$content_wrap.remove();\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$track.remove();\r\n\t\t\t\r\n\t\t\tif(inline_style !== false) this.element.style.position = inline_style;\r\n\t\t\t\r\n\t\t\tif(idleTimer != null) {\r\n\t\t\t\tclearTimeout(idleTimer);\r\n\t\t\t\tidleTimer = null;\r\n\t\t\t}\r\n\t\t}\r\n\t\tthis.modify = function(_settings) {\r\n\t\t\tif(_settings) settings = $.extend({}, settings, _settings);\r\n\t\t\t\r\n\t\t\tthis.destroy();\r\n\t\t\tthis.create();\r\n\t\t\tis_dirty = true;\r\n\t\t\tthis.reset(true);\r\n\t\t}\r\n\t\tthis.update = function(_settings) {\r\n\t\t\tif(_settings) settings = $.extend({}, settings, _settings);\r\n\r\n\t\t\tthis.size = settings.size || this.size;\r\n\t\t\t\r\n\t\t\tthis.lock = settings.mouseWheelLock || this.lock;\r\n\t\t\tthis.lock_anyway = settings.lockAnyway || this.lock_anyway;\r\n\t\t\t\r\n\t\t\thideOnIdle = settings.hideOnIdle || hideOnIdle;\r\n\t\t\thideDelay = settings.hideDelay || hideDelay;\r\n\t\t\tobserveContent = settings.observeContent || false;\r\n\t\t\t\r\n\t\t\tdragEvent = settings.dragEvent || false;\r\n\t\t\t\r\n\t\t\tif(typeof _settings.styleClass !== 'undefined') {\r\n\t\t\t\tif(styleClass) $track.removeClass(styleClass);\r\n\t\t\t\tstyleClass = _settings.styleClass;\r\n\t\t\t\tif(styleClass) $track.addClass(styleClass);\r\n\t\t\t\ttrackFlip = !!styleClass.match(/scroll\\-left|scroll\\-top/);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.start = function() {\r\n\t\t\tcontent_wrap[scroll_direction] = 0;\r\n\t\t}\r\n\t\tthis.end = function() {\r\n\t\t\tcontent_wrap[scroll_direction] = content_wrap[scroll_size];\r\n\t\t}\r\n\t\t\r\n\t\tthis.hide = function() {\r\n\t\t\t$track.hide();\r\n\t\t}\r\n\t\tthis.show = function() {\r\n\t\t\t$track.show();\r\n\t\t}\r\n\r\n\t\t\r\n\t\tthis.update_scroll = function() {\r\n\t\t\tmove_bar = false;\r\n\t\t\tbar_style[css_pos] = bar_pos + 'px';\r\n\t\t\tcontent_wrap[scroll_direction] = parseInt(Math.round(bar_pos / ratio));\r\n\t\t}\r\n\r\n\t\tfunction mouse_down_track(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\t\t\r\n\t\t\tvar track_offset = $track.offset();\r\n\t\t\tvar track_pos = track_offset[css_pos];//top for vertical, left for horizontal\r\n\t\t\tvar mouse_pos = vertical ? e.pageY : e.pageX;\r\n\t\t\t\r\n\t\t\tif(mouse_pos > track_pos + bar_pos) {\r\n\t\t\t\tbar_pos = mouse_pos - track_pos - bar_size + bar_size_2;\r\n\t\t\t\tif(bar_pos > bar_max_pos) {\t\t\t\t\t\t\r\n\t\t\t\t\tbar_pos = bar_max_pos;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tbar_pos = mouse_pos - track_pos - bar_size_2;\r\n\t\t\t\tif(bar_pos < 0) bar_pos = 0;\r\n\t\t\t}\r\n\r\n\t\t\tself.update_scroll()\r\n\t\t}\r\n\r\n\t\tvar mouse_pos1 = -1, mouse_pos2 = -1;\r\n\t\tfunction mouse_down_bar(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tif(vertical) {\r\n\t\t\t\tmouse_pos2 = mouse_pos1 = e.pageY;\r\n\t\t\t} else {\r\n\t\t\t\tmouse_pos2 = mouse_pos1 = e.pageX;\r\n\t\t\t}\r\n\r\n\t\t\tmouse_track = true;\r\n\t\t\t$('html').off('mousemove.ace_scroll').on('mousemove.ace_scroll', mouse_move_bar)\r\n\t\t\t$(mouse_release_target).off('mouseup.ace_scroll').on('mouseup.ace_scroll', mouse_up_bar);\r\n\t\t\t\r\n\t\t\t$track.addClass('active');\r\n\t\t\tif(dragEvent) self.$element.trigger('drag.start');\r\n\t\t}\r\n\t\tfunction mouse_move_bar(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t\tif(vertical) {\r\n\t\t\t\tmouse_pos2 = e.pageY;\r\n\t\t\t} else {\r\n\t\t\t\tmouse_pos2 = e.pageX;\r\n\t\t\t}\r\n\t\t\t\r\n\r\n\t\t\tif(mouse_pos2 - mouse_pos1 + bar_pos > bar_max_pos) {\r\n\t\t\t\tmouse_pos2 = mouse_pos1 + bar_max_pos - bar_pos;\r\n\t\t\t} else if(mouse_pos2 - mouse_pos1 + bar_pos < 0) {\r\n\t\t\t\tmouse_pos2 = mouse_pos1 - bar_pos;\r\n\t\t\t}\r\n\t\t\tbar_pos = bar_pos + (mouse_pos2 - mouse_pos1);\r\n\r\n\t\t\tmouse_pos1 = mouse_pos2;\r\n\r\n\t\t\tif(bar_pos < 0) {\r\n\t\t\t\tbar_pos = 0;\r\n\t\t\t}\r\n\t\t\telse if(bar_pos > bar_max_pos) {\r\n\t\t\t\tbar_pos = bar_max_pos;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tself.update_scroll()\r\n\t\t}\r\n\t\tfunction mouse_up_bar(e) {\r\n\t\t\te.preventDefault();\r\n\t\t\te.stopPropagation();\r\n\t\t\t\r\n\t\t\tmouse_track = false;\r\n\t\t\t$('html').off('.ace_scroll')\r\n\t\t\t$(mouse_release_target).off('.ace_scroll');\r\n\r\n\t\t\t$track.removeClass('active');\r\n\t\t\tif(dragEvent) self.$element.trigger('drag.end');\r\n\t\t\t\r\n\t\t\tif(active && hideOnIdle && !insideTrack) hideScrollbars();\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tvar idleTimer = null;\r\n\t\tvar prevCheckTime = 0;\r\n\t\tfunction checkContentChanges(hideSoon) {\r\n\t\t\t//check if content size has been modified since last time?\r\n\t\t\t//and with at least 1s delay\r\n\t\t\tvar newCheck = +new Date();\r\n\t\t\tif(observeContent && newCheck - prevCheckTime > 1000) {\r\n\t\t\t\tvar newSize = content_wrap[scroll_size];\r\n\t\t\t\tif(prevContentSize != newSize) {\r\n\t\t\t\t\tprevContentSize = newSize;\r\n\t\t\t\t\tis_dirty = true;\r\n\t\t\t\t\tself.reset(true);\r\n\t\t\t\t}\r\n\t\t\t\tprevCheckTime = newCheck;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//show scrollbars when not idle anymore i.e. triggered by mousewheel, dragging, etc\r\n\t\t\tif(active && hideOnIdle) {\r\n\t\t\t\tif(idleTimer != null) {\r\n\t\t\t\t\tclearTimeout(idleTimer);\r\n\t\t\t\t\tidleTimer = null;\r\n\t\t\t\t}\r\n\t\t\t\t$track.addClass('not-idle');\r\n\t\t\t\r\n\t\t\t\tif(!insideTrack && hideSoon == true) {\r\n\t\t\t\t\t//hideSoon is false when mouse enters track\r\n\t\t\t\t\thideScrollbars();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tfunction hideScrollbars() {\r\n\t\t\tif(idleTimer != null) {\r\n\t\t\t\tclearTimeout(idleTimer);\r\n\t\t\t\tidleTimer = null;\r\n\t\t\t}\r\n\t\t\tidleTimer = setTimeout(function() {\r\n\t\t\t\tidleTimer = null;\r\n\t\t\t\t$track.removeClass('not-idle');\r\n\t\t\t} , hideDelay);\r\n\t\t}\r\n\t\t\r\n\t\t//for detached scrollbars\r\n\t\tfunction getTrackSize() {\r\n\t\t\t$track.css('visibility', 'hidden').addClass('scroll-hover');\r\n\t\t\tif(vertical) trackSize = parseInt($track.outerWidth()) || 0;\r\n\t\t\t else trackSize = parseInt($track.outerHeight()) || 0;\r\n\t\t\t$track.css('visibility', '').removeClass('scroll-hover');\r\n\t\t}\r\n\t\tthis.track_size = function() {\r\n\t\t\tif(trackSize == 0) getTrackSize();\r\n\t\t\treturn trackSize;\r\n\t\t}\r\n\t\t\r\n\t\t//for detached scrollbars\r\n\t\tfunction setTrackPos() {\r\n\t\t\tif(updatePos === false) return;\r\n\t\t\r\n\t\t\tvar off = $content_wrap.offset();//because we want it relative to parent not document\r\n\t\t\tvar left = off.left;\r\n\t\t\tvar top = off.top;\r\n\r\n\t\t\tif(vertical) {\r\n\t\t\t\tif(!trackFlip) {\r\n\t\t\t\t\tleft += ($content_wrap.outerWidth() - trackSize)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif(!trackFlip) {\r\n\t\t\t\t\ttop += ($content_wrap.outerHeight() - trackSize)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif(updatePos === true) $track.css({top: parseInt(top), left: parseInt(left)});\r\n\t\t\telse if(updatePos === 'left') $track.css('left', parseInt(left));\r\n\t\t\telse if(updatePos === 'top') $track.css('top', parseInt(top));\r\n\t\t}\r\n\t\t\r\n\r\n\r\n\t\tthis.create();\r\n\t\tis_dirty = true;\r\n\t\tthis.reset(true);\r\n\t\tprevContentSize = content_wrap[scroll_size];\r\n\r\n\t\treturn this;\r\n\t}\r\n\r\n\t\r\n\t$.fn.ace_scroll = function (option,value) {\r\n\t\tvar retval;\r\n\r\n\t\tvar $set = this.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tvar data = $this.data('ace_scroll');\r\n\t\t\tvar options = typeof option === 'object' && option;\r\n\r\n\t\t\tif (!data) $this.data('ace_scroll', (data = new Ace_Scroll(this, options)));\r\n\t\t\t //else if(typeof options == 'object') data['modify'](options);\r\n\t\t\tif (typeof option === 'string') retval = data[option](value);\r\n\t\t});\r\n\r\n\t\treturn (retval === undefined) ? $set : retval;\r\n\t};\r\n\r\n\r\n\t$.fn.ace_scroll.defaults = {\r\n\t\t'size' : 200,\r\n\t\t'horizontal': false,\r\n\t\t'mouseWheel': true,\r\n\t\t'mouseWheelLock': false,\r\n\t\t'lockAnyway': false,\r\n\t\t'styleClass' : false,\r\n\t\t\r\n\t\t'observeContent': false,\r\n\t\t'hideOnIdle': false,\r\n\t\t'hideDelay': 1500,\r\n\t\t\r\n\t\t'hoverReset': true //reset scrollbar sizes on mouse hover because of possible sizing changes\r\n\t\t,\r\n\t\t'reset': false //true= set scrollTop = 0\r\n\t\t,\r\n\t\t'dragEvent': false\r\n\t\t,\r\n\t\t'touchDrag': true\r\n\t\t,\r\n\t\t'touchSwipe': false\r\n\t\t,\r\n\t\t'scrollEvent': false //trigger scroll event\r\n\r\n\t\t,\r\n\t\t'detached': false\r\n\t\t,\r\n\t\t'updatePos': true\r\n\t\t/**\r\n\t\t,\t\t\r\n\t\t'track' : true,\r\n\t\t'show' : false,\r\n\t\t'dark': false,\r\n\t\t'alwaysVisible': false,\r\n\t\t'margin': false,\r\n\t\t'thin': false,\r\n\t\t'position': 'right'\r\n\t\t*/\r\n     }\r\n\r\n\t/**\r\n\t$(document).on('ace.settings.ace_scroll', function(e, name) {\r\n\t\tif(name == 'sidebar_collapsed') $('.ace-scroll').scroller('reset');\r\n\t});\r\n\t$(window).on('resize.ace_scroll', function() {\r\n\t\t$('.ace-scroll').scroller('reset');\r\n\t});\r\n\t*/\r\n\r\n})(window.jQuery);"],"sourceRoot":"/source/"}