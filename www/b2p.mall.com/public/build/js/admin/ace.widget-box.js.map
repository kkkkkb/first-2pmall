{"version":3,"sources":["ace.widget-box.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ace.widget-box.js","sourcesContent":["/**\r\n <b>Widget boxes</b>\r\n*/\r\n(function($ , undefined) {\r\n\r\n\tvar Widget_Box = function(box, options) {\r\n\t\tthis.$box = $(box);\r\n\t\tvar that = this;\r\n\t\t//this.options = $.extend({}, $.fn.widget_box.defaults, options);\r\n\r\n\t\tthis.reload = function() {\r\n\t\t\tvar $box = this.$box;\r\n\t\t\tvar $remove_position = false;\r\n\t\t\tif($box.css('position') == 'static') {\r\n\t\t\t\t$remove_position = true;\r\n\t\t\t\t$box.addClass('position-relative');\r\n\t\t\t}\r\n\t\t\t$box.append('<div class=\"widget-box-overlay\"><i class=\"'+ ace.vars['icon'] + 'loading-icon fa fa-spinner fa-spin fa-2x white\"></i></div>');\r\n\r\n\t\t\t$box.one('reloaded.ace.widget', function() {\r\n\t\t\t\t$box.find('.widget-box-overlay').remove();\r\n\t\t\t\tif($remove_position) $box.removeClass('position-relative');\r\n\t\t\t});\r\n\t\t}\r\n\r\n\t\tthis.closeFast = function() {\r\n\t\t\tthis.close(0);\r\n\t\t}\r\n\t\tthis.close = function(closeSpeed) {\r\n\t\t\tvar $box = this.$box;\r\n\t\t\tvar closeSpeed   = typeof closeSpeed === 'undefined' ? 300 : closeSpeed;\r\n\t\t\t$box.fadeOut(closeSpeed , function(){\r\n\t\t\t\t\t$box.trigger('closed.ace.widget');\r\n\t\t\t\t\t$box.remove();\r\n\t\t\t\t}\r\n\t\t\t)\r\n\t\t}\r\n\t\t\r\n\t\tthis.toggleFast = function() {\r\n\t\t\tthis.toggle(null, null, 0, 0);\r\n\t\t}\r\n\t\t\r\n\t\tthis.toggle = function(type, button, expandSpeed, collapseSpeed) {\r\n\t\t\tvar $box = this.$box;\r\n\t\t\tvar $body = $box.find('.widget-body').eq(0);\r\n\t\t\tvar $icon = null;\r\n\t\t\t\r\n\t\t\tvar event_name = type || ($box.hasClass('collapsed') ? 'show' : 'hide');\r\n\t\t\tvar event_complete_name = event_name == 'show' ? 'shown' : 'hidden';\r\n\r\n\t\t\tif( !button ) {\r\n\t\t\t\tbutton = $box.find('> .widget-header a[data-action=collapse]').eq(0);\r\n\t\t\t\tif(button.length == 0) button = null;\r\n\t\t\t}\r\n\r\n\t\t\tif(button) {\r\n\t\t\t\r\n\t\t\t\t$icon = button.find(ace.vars['.icon']).eq(0);\r\n\r\n\t\t\t\tvar $match\r\n\t\t\t\tvar $icon_down = null\r\n\t\t\t\tvar $icon_up = null\r\n\t\t\t\tif( ($icon_down = $icon.attr('data-icon-show')) ) {\r\n\t\t\t\t\t$icon_up = $icon.attr('data-icon-hide')\r\n\t\t\t\t}\r\n\t\t\t\telse if( $match = $icon.attr('class').match(/fa\\-(.*)\\-(up|down)/) ) {\r\n\t\t\t\t\t$icon_down = 'fa-'+$match[1]+'-down'\r\n\t\t\t\t\t$icon_up = 'fa-'+$match[1]+'-up'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\tvar expandSpeed   = typeof expandSpeed === 'undefined' ? 250 : expandSpeed;\r\n\t\t\tvar collapseSpeed = typeof collapseSpeed === 'undefined' ? 200 : collapseSpeed;\r\n\t\t\t\r\n\r\n\t\t\tif( event_name == 'show' ) {\r\n\t\t\t\tif($icon) $icon.removeClass($icon_down).addClass($icon_up);\r\n\r\n\t\t\t\t$body.hide();\r\n\t\t\t\t$box.removeClass('collapsed');\r\n\t\t\t\t$body.slideDown(expandSpeed, function(){\r\n\t\t\t\t\t$box.trigger(event_complete_name+'.ace.widget')\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif($icon) $icon.removeClass($icon_up).addClass($icon_down);\r\n\t\t\t\t$body.slideUp(collapseSpeed, function(){\r\n\t\t\t\t\t\t$box.addClass('collapsed')\r\n\t\t\t\t\t\t$box.trigger(event_complete_name+'.ace.widget')\r\n\t\t\t\t\t}\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t$box.trigger('toggled.ace.widget', [event_name]);\r\n\t\t}\r\n\t\t\r\n\t\tthis.hide = function() {\r\n\t\t\tthis.toggle('hide');\r\n\t\t}\r\n\t\tthis.show = function() {\r\n\t\t\tthis.toggle('show');\r\n\t\t}\r\n\t\t\r\n\t\tthis.hideFast = function() {\r\n\t\t\tthis.toggle('hide', null, 0, 0);\r\n\t\t}\r\n\t\tthis.showFast = function() {\r\n\t\t\tthis.toggle('show', null, 0, 0);\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tthis.fullscreen = function(makeFullscreen) {\r\n\t\t\tvar $icon = this.$box.find('> .widget-header a[data-action=fullscreen]').find(ace.vars['.icon']).eq(0);\r\n\t\t\tvar $icon_expand = null\r\n\t\t\tvar $icon_compress = null\r\n\t\t\tif( ($icon_expand = $icon.attr('data-icon1')) ) {\r\n\t\t\t\t$icon_compress = $icon.attr('data-icon2')\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$icon_expand = 'fa-expand';\r\n\t\t\t\t$icon_compress = 'fa-compress';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\tvar isAlreadyFull = this.$box.hasClass('fullscreen');\r\n\t\t\tvar noMakeFullscreenParam = makeFullscreen !== true && makeFullscreen !== false;//no true/false arguement provided for this function, so decide based on widget box classnames\r\n\t\t\t\r\n\t\t\t//make it fullscreen if:\r\n\t\t\t//1)we want to go full screen anyway\r\n\t\t\t//2)it is not fullscreen already\r\n\t\t\tif( makeFullscreen === true || (noMakeFullscreenParam && !isAlreadyFull) ) {\r\n\t\t\t\t$icon.removeClass($icon_expand).addClass($icon_compress);\r\n\t\t\t\tthis.$box.addClass('fullscreen');\r\n\t\t\t\t\r\n\t\t\t\tapplyScrollbars(this.$box, true);\r\n\t\t\t}\r\n\t\t\telse if(makeFullscreen === false || (noMakeFullscreenParam && isAlreadyFull) ) {\r\n\t\t\t\t$icon.addClass($icon_expand).removeClass($icon_compress);\r\n\t\t\t\tthis.$box.removeClass('fullscreen');\r\n\t\t\t\t\r\n\t\t\t\tapplyScrollbars(this.$box, false);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.$box.trigger('fullscreened.ace.widget')\r\n\t\t}\r\n\r\n\t}\r\n\t\r\n\t$.fn.widget_box = function (option, value) {\r\n\t\tvar method_call;\r\n\r\n\t\tvar $set = this.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tvar data = $this.data('widget_box');\r\n\t\t\tvar options = typeof option === 'object' && option;\r\n\r\n\t\t\tif (!data) $this.data('widget_box', (data = new Widget_Box(this, options)));\r\n\t\t\tif (typeof option === 'string') method_call = data[option](value);\r\n\t\t});\r\n\r\n\t\treturn (method_call === undefined) ? $set : method_call;\r\n\t};\r\n\r\n\r\n\t$(document).on(ace['click_event']+'.ace.widget', '.widget-header a[data-action]', function (ev) {\r\n\t\tev.preventDefault();\r\n\r\n\t\tvar $this = $(this);\r\n\t\tvar $box = $this.closest('.widget-box');\r\n\t\tif( $box.length == 0 || $box.hasClass('ui-sortable-helper') ) return;\r\n\r\n\t\tvar $widget_box = $box.data('widget_box');\r\n\t\tif (!$widget_box) {\r\n\t\t\t$box.data('widget_box', ($widget_box = new Widget_Box($box.get(0))));\r\n\t\t}\r\n\r\n\t\tvar $action = $this.data('action');\r\n\t\tif($action == 'collapse') {\r\n\t\t\tvar event_name = $box.hasClass('collapsed') ? 'show' : 'hide';\r\n\r\n\t\t\tvar event\r\n\t\t\t$box.trigger(event = $.Event(event_name+'.ace.widget'))\r\n\t\t\tif (event.isDefaultPrevented()) return\r\n\t\t\t\r\n\t\t\t$box.trigger(event = $.Event('toggle.ace.widget'), [event_name]);\r\n\r\n\t\t\t$widget_box.toggle(event_name, $this);\r\n\t\t}\r\n\t\telse if($action == 'close') {\r\n\t\t\tvar event\r\n\t\t\t$box.trigger(event = $.Event('close.ace.widget'))\r\n\t\t\tif (event.isDefaultPrevented()) return\r\n\r\n\t\t\t$widget_box.close();\r\n\t\t}\r\n\t\telse if($action == 'reload') {\r\n\t\t\t$this.blur();\r\n\t\t\tvar event\r\n\t\t\t$box.trigger(event = $.Event('reload.ace.widget'))\r\n\t\t\tif (event.isDefaultPrevented()) return\r\n\r\n\t\t\t$widget_box.reload();\r\n\t\t}\r\n\t\telse if($action == 'fullscreen') {\r\n\t\t\tvar event\r\n\t\t\t$box.trigger(event = $.Event('fullscreen.ace.widget'))\r\n\t\t\tif (event.isDefaultPrevented()) return\r\n\t\t\r\n\t\t\t$widget_box.fullscreen();\r\n\t\t}\r\n\t\telse if($action == 'settings') {\r\n\t\t\t$box.trigger('setting.ace.widget')\r\n\t\t}\r\n\r\n\t});\r\n\t\r\n\t\t\r\n\tfunction applyScrollbars($widget, enable) {\r\n\t\tvar $main = $widget.find('.widget-main').eq(0);\r\n\t\t$(window).off('resize.widget.scroll');\r\n\t\t\r\n\t\t//IE8 has an unresolvable issue!!! re-scrollbaring with unknown values?!\r\n\t\tvar nativeScrollbars = ace.vars['old_ie'] || ace.vars['touch'];\r\n\t\t\r\n\t\tif(enable) {\r\n\t\t\tvar ace_scroll = $main.data('ace_scroll');\r\n\t\t\tif( ace_scroll ) {\r\n\t\t\t\t$main.data('save_scroll', {size: ace_scroll['size'], lock: ace_scroll['lock'], lock_anyway: ace_scroll['lock_anyway']});\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar size = $widget.height() - $widget.find('.widget-header').height() - 10;//extra paddings\r\n\t\t\tsize = parseInt(size);\r\n\t\t\t\r\n\t\t\t$main.css('min-height', size);\r\n\t\t\tif( !nativeScrollbars ) {\r\n\t\t\t\tif( ace_scroll ) {\r\n\t\t\t\t\t$main.ace_scroll('update', {'size': size, 'mouseWheelLock': true, 'lockAnyway': true});\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t$main.ace_scroll({'size': size, 'mouseWheelLock': true, 'lockAnyway': true});\r\n\t\t\t\t}\r\n\t\t\t\t$main.ace_scroll('enable').ace_scroll('reset');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tif( ace_scroll ) $main.ace_scroll('disable');\r\n\t\t\t\t$main.css('max-height', size).addClass('overflow-scroll');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t$(window)\r\n\t\t\t.on('resize.widget.scroll', function() {\r\n\t\t\t\tvar size = $widget.height() - $widget.find('.widget-header').height() - 10;//extra paddings\r\n\t\t\t\tsize = parseInt(size);\r\n\t\t\t\t\r\n\t\t\t\t$main.css('min-height', size);\r\n\t\t\t\tif( !nativeScrollbars ) {\r\n\t\t\t\t\t$main.ace_scroll('update', {'size': size}).ace_scroll('reset');\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t$main.css('max-height', size).addClass('overflow-scroll');\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\telse  {\r\n\t\t\t$main.css('min-height', '');\r\n\t\t\tvar saved_scroll = $main.data('save_scroll');\r\n\t\t\tif(saved_scroll) {\r\n\t\t\t\t$main\r\n\t\t\t\t.ace_scroll('update', {'size': saved_scroll['size'], 'mouseWheelLock': saved_scroll['lock'], 'lockAnyway': saved_scroll['lock_anyway']})\r\n\t\t\t\t.ace_scroll('enable')\r\n\t\t\t\t.ace_scroll('reset');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif( !nativeScrollbars ) {\t\t\t\t\r\n\t\t\t\tif(!saved_scroll) $main.ace_scroll('disable');\t\t\t\t\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$main.css('max-height', '').removeClass('overflow-scroll');\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n})(window.jQuery);"],"sourceRoot":"/source/"}