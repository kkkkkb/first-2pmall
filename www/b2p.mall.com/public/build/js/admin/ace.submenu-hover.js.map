{"version":3,"sources":["ace.submenu-hover.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"ace.submenu-hover.js","sourcesContent":["/**\r\n <b>Submenu hover adjustment</b>. Automatically move up a submenu to fit into screen when some part of it goes beneath window.\r\n Pass a \"true\" value as an argument and submenu will have native browser scrollbars when necessary.\r\n*/\r\n\r\n(function($ , undefined) {\r\n\r\n if( ace.vars['very_old_ie'] ) return;\r\n //ignore IE7 & below\r\n\r\n var hasTouch = ace.vars['touch'];\r\n var nativeScroll = ace.vars['old_ie'] || hasTouch;\r\n \r\n\r\n var is_element_pos =\r\n\t'getComputedStyle' in window ?\r\n\t//el.offsetHeight is used to force redraw and recalculate 'el.style.position' esp. for webkit!\r\n\tfunction(el, pos) { el.offsetHeight; return window.getComputedStyle(el).position == pos }\r\n\t:\r\n\tfunction(el, pos) { el.offsetHeight; return $(el).css('position') == pos }\r\n\r\n\r\n\r\n $(window).on('resize.sidebar.ace_hover', function() {\r\n\t$('.sidebar[data-sidebar-hover=true]').ace_sidebar_hover('update_vars').ace_sidebar_hover('reset');\r\n })\r\n\r\n $(document).on('settings.ace.ace_hover', function(e, event_name, event_val) {\r\n\tif(event_name == 'sidebar_collapsed') $('.sidebar[data-sidebar-hover=true]').ace_sidebar_hover('reset');\r\n\telse if(event_name == 'navbar_fixed') $('.sidebar[data-sidebar-hover=true]').ace_sidebar_hover('update_vars');\r\n })\r\n \r\n var sidebars = [];\r\n\r\n function Sidebar_Hover(sidebar , settings) {\r\n\tvar self = this, that = this;\r\n\t\r\n\tvar attrib_values = ace.helper.getAttrSettings(sidebar, $.fn.ace_sidebar_hover.defaults);\r\n\tthis.settings = $.extend({}, $.fn.ace_sidebar_hover.defaults, settings, attrib_values);\r\n\t\r\n\r\n\tvar $sidebar = $(sidebar), nav_list = $sidebar.find('.nav-list').get(0);\r\n\t$sidebar.attr('data-sidebar-hover', 'true');\r\n\t\r\n\tsidebars.push($sidebar);\r\n\r\n\tvar sidebar_vars = {};\r\n\tvar old_ie = ace.vars['old_ie'];\r\n\r\n\t\r\n\t\r\n\tvar scroll_right = false;\r\n\t//scroll style class\r\n\tvar hasHoverDelay = self.settings.sub_hover_delay || false;\r\n\t\r\n\tif(hasTouch && hasHoverDelay) self.settings.sub_hover_delay = parseInt(Math.max(self.settings.sub_hover_delay, 2500));//for touch device, delay is at least 2.5sec\r\n\r\n\tvar $window = $(window);\r\n\t//navbar used for adding extra offset from top when adjusting submenu\r\n\tvar $navbar = $('.navbar').eq(0);\r\n\tvar navbar_fixed = $navbar.css('position') == 'fixed';\r\n\tthis.update_vars = function() {\r\n\t\tnavbar_fixed = $navbar.css('position') == 'fixed';\r\n\t}\r\n\r\n\tself.dirty = false;\r\n\t//on window resize or sidebar expand/collapse a previously \"pulled up\" submenu should be reset back to its default position\r\n\t//for example if \"pulled up\" in \"responsive-min\" mode, in \"fullmode\" should not remain \"pulled up\"\r\n\tthis.reset = function() {\r\n\t\tif( self.dirty == false ) return;\r\n\t\tself.dirty = false;//so don't reset is not called multiple times in a row!\r\n\t\r\n\t\t$sidebar.find('.submenu').each(function() {\r\n\t\t\tvar $sub = $(this), li = $sub.parent();\r\n\t\t\t$sub.css({'top': '', 'bottom': '', 'max-height': ''});\r\n\t\t\t\r\n\t\t\tif($sub.hasClass('ace-scroll')) {\r\n\t\t\t\t$sub.ace_scroll('disable');\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$sub.removeClass('sub-scroll');\r\n\t\t\t}\r\n\t\t\t \r\n\t\t\tif( is_element_pos(this, 'absolute') ) $sub.addClass('can-scroll');\r\n\t\t\telse $sub.removeClass('can-scroll');\r\n\r\n\t\t\tli.removeClass('pull_up').find('.menu-text:first').css('margin-top', '');\r\n\t\t})\r\n\r\n\t\t$sidebar.find('.hover-show').removeClass('hover-show hover-shown hover-flip');\r\n\t}\r\n\t\r\n\tthis.updateStyle = function(newStyle) {\r\n\t\tsub_scroll_style = newStyle;\r\n\t\t$sidebar.find('.submenu.ace-scroll').ace_scroll('update', {styleClass: newStyle});\r\n\t}\r\n\tthis.changeDir = function(dir) {\r\n\t\tscroll_right = (dir === 'right');\r\n\t}\r\n\t\r\n\t\r\n\t//update submenu scrollbars on submenu hide & show\r\n\r\n\tvar lastScrollHeight = -1;\r\n\t//hide scrollbars if it's going to be not needed anymore!\r\n\tif(!nativeScroll)\r\n\t$sidebar.on('hide.ace.submenu.sidebar_hover', '.submenu', function(e) {\r\n\t\tif(lastScrollHeight < 1) return;\r\n\r\n\t\te.stopPropagation();\r\n\t\tvar $sub = $(this).closest('.ace-scroll.can-scroll');\r\n\t\tif($sub.length == 0 || !is_element_pos($sub[0], 'absolute')) return;\r\n\r\n\t\tif($sub[0].scrollHeight - this.scrollHeight < lastScrollHeight) {\r\n\t\t\t$sub.ace_scroll('disable');\r\n\t\t}\r\n\t});\r\n\r\n\t\r\n\t\r\n\t\r\n\t//reset scrollbars \r\n\tif(!nativeScroll)\r\n\t$sidebar.on('shown.ace.submenu.sidebar_hover hidden.ace.submenu.sidebar_hover', '.submenu', function(e) {\r\n\t\tif(lastScrollHeight < 1) return;\r\n\t\r\n\t\tvar $sub = $(this).closest('.ace-scroll.can-scroll');\r\n\t\tif($sub.length == 0 || !is_element_pos($sub[0], 'absolute') ) return;\r\n\t\t\r\n\t\tvar sub_h = $sub[0].scrollHeight;\r\n\t\t\r\n\t\tif(lastScrollHeight > 14 && sub_h - lastScrollHeight > 4) {\r\n\t\t\t$sub.ace_scroll('enable').ace_scroll('reset');//don't update track position\r\n\t\t}\r\n\t\telse {\r\n\t\t\t$sub.ace_scroll('disable');\r\n\t\t}\r\n\t});\r\n\r\n\r\n\t///////////////////////\r\n\r\n\r\n\tvar currentScroll = -1;\r\n\r\n\t//some mobile browsers don't have mouseenter\r\n\tvar event_1 = !hasTouch ? 'mouseenter.sub_hover' : 'touchstart.sub_hover';// pointerdown.sub_hover';\r\n\tvar event_2 = !hasTouch ? 'mouseleave.sub_hover' : 'touchend.sub_hover touchcancel.sub_hover';// pointerup.sub_hover pointercancel.sub_hover';\r\n\t\r\n\t$sidebar.on(event_1, '.nav-list li, .sidebar-shortcuts', function (e) {\r\n\t\tsidebar_vars = $sidebar.ace_sidebar('vars');\r\n\t\t\r\n\t\r\n\t\t//ignore if collapsible mode (mobile view .navbar-collapse) so it doesn't trigger submenu movements\r\n\t\t//or return if horizontal but not mobile_view (style 1&3)\r\n\t\tif( sidebar_vars['collapsible'] /**|| sidebar_vars['horizontal']*/ ) return;\r\n\t\t\r\n\t\tvar $this = $(this);\r\n\r\n\t\tvar shortcuts = false;\r\n\t\tvar has_hover = $this.hasClass('hover');\r\n\t\t\r\n\t\tvar sub = $this.find('> .submenu').get(0);\r\n\t\tif( !(sub || ((this.parentNode == nav_list || has_hover || (shortcuts = $this.hasClass('sidebar-shortcuts'))) /**&& sidebar_vars['minimized']*/)) ) {\r\n\t\t\tif(sub) $(sub).removeClass('can-scroll');\r\n\t\t\treturn;//include .compact and .hover state as well?\r\n\t\t}\r\n\t\t\r\n\t\tvar target_element = sub, is_abs = false;\r\n\t\tif( !target_element && this.parentNode == nav_list ) target_element = $this.find('> a > .menu-text').get(0);\r\n\t\tif( !target_element && shortcuts ) target_element = $this.find('.sidebar-shortcuts-large').get(0);\r\n\t\tif( (!target_element || !(is_abs = is_element_pos(target_element, 'absolute'))) && !has_hover ) {\r\n\t\t\tif(sub) $(sub).removeClass('can-scroll');\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t\r\n\t\tvar sub_hide = hasHoverDelay ? getSubHide(this) : null;\r\n\t\t//var show_sub = false;\r\n\r\n\t\tif(sub) {\r\n\t\t if(is_abs) {\r\n\t\t\tself.dirty = true;\r\n\t\t\t\r\n\t\t\tvar newScroll = ace.helper.scrollTop();\r\n\t\t\t//if submenu is becoming visible for first time or document has been scrolled, then adjust menu\r\n\t\t\tif( (hasHoverDelay && !sub_hide.is_visible()) || (!hasTouch && newScroll != currentScroll) || old_ie ) {\r\n\t\t\t\t//try to move/adjust submenu if the parent is a li.hover or if submenu is minimized\r\n\t\t\t\t//if( is_element_pos(sub, 'absolute') ) {//for example in small device .hover > .submenu may not be absolute anymore!\r\n\t\t\t\t\t$(sub).addClass('can-scroll');\r\n\t\t\t\t\t//show_sub = true;\r\n\t\t\t\t\tif(!old_ie && !hasTouch) adjust_submenu.call(this, sub);\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\t//because ie8 needs some time for submenu to be displayed and real value of sub.scrollHeight be kicked in\r\n\t\t\t\t\t\tvar that = this;\r\n\t\t\t\t\t\tsetTimeout(function() {\tadjust_submenu.call(that, sub) }, 0)\r\n\t\t\t\t\t}\r\n\t\t\t\t//}\r\n\t\t\t\t//else $(sub).removeClass('can-scroll');\r\n\t\t\t}\r\n\t\t\tcurrentScroll = newScroll;\r\n\t\t }\r\n\t\t else {\r\n\t\t\t$(sub).removeClass('can-scroll');\r\n\t\t }\r\n\t\t}\r\n\t\t//if(show_sub) \r\n\t\thasHoverDelay && sub_hide.show();\r\n\t\t\r\n\t }).on(event_2, '.nav-list li, .sidebar-shortcuts', function (e) {\r\n\t\tsidebar_vars = $sidebar.ace_sidebar('vars');\r\n\t\t\r\n\t\tif( sidebar_vars['collapsible'] /**|| sidebar_vars['horizontal']*/ ) return;\r\n\r\n\t\tif( !$(this).hasClass('hover-show') ) return;\r\n\r\n\t\thasHoverDelay && getSubHide(this).hideDelay();\r\n\t });\r\n\t \r\n\t\r\n\tfunction subHide(li_sub) {\r\n\t\tvar self = li_sub, $self = $(self);\r\n\t\tvar timer = null;\r\n\t\tvar visible = false;\r\n\t\t\r\n\t\tthis.show = function() {\r\n\t\t\tif(timer != null) clearTimeout(timer);\r\n\t\t\ttimer = null;\t\t\r\n\r\n\t\t\t$self.addClass('hover-show hover-shown');\r\n\t\t\tvisible = true;\r\n\r\n\t\t\t//let's hide .hover-show elements that are not .hover-shown anymore (i.e. marked for hiding in hideDelay)\r\n\t\t\tfor(var i = 0; i < sidebars.length ; i++)\r\n\t\t\t{\r\n\t\t\t  sidebars[i].find('.hover-show').not('.hover-shown').each(function() {\r\n\t\t\t\tgetSubHide(this).hide();\r\n\t\t\t  })\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tthis.hide = function() {\r\n\t\t\tvisible = false;\r\n\t\t\t\r\n\t\t\t$self.removeClass('hover-show hover-shown hover-flip');\r\n\t\t\t\r\n\t\t\tif(timer != null) clearTimeout(timer);\r\n\t\t\ttimer = null;\r\n\t\t\t\r\n\t\t\tvar sub = $self.find('> .submenu').get(0);\r\n\t\t\tif(sub) getSubScroll(sub, 'hide');\r\n\t\t}\r\n\t\t\r\n\t\tthis.hideDelay = function(callback) {\r\n\t\t\tif(timer != null) clearTimeout(timer);\r\n\t\t\t\r\n\t\t\t$self.removeClass('hover-shown');//somehow marked for hiding\r\n\t\t\t\r\n\t\t\ttimer = setTimeout(function() {\r\n\t\t\t\tvisible = false;\r\n\t\t\t\t$self.removeClass('hover-show hover-flip');\r\n\t\t\t\ttimer = null;\r\n\t\t\t\t\r\n\t\t\t\tvar sub = $self.find('> .submenu').get(0);\r\n\t\t\t\tif(sub) getSubScroll(sub, 'hide');\r\n\t\t\t\t\r\n\t\t\t\tif(typeof callback === 'function') callback.call(this);\r\n\t\t\t}, that.settings.sub_hover_delay);\r\n\t\t}\r\n\t\t\r\n\t\tthis.is_visible = function() {\r\n\t\t\treturn visible;\r\n\t\t}\r\n\t}\r\n\tfunction getSubHide(el) {\r\n\t\tvar sub_hide = $(el).data('subHide');\r\n\t\tif(!sub_hide) $(el).data('subHide', (sub_hide = new subHide(el)));\r\n\t\treturn sub_hide;\r\n\t}\r\n\t\r\n\t\r\n\tfunction getSubScroll(el, func) {\r\n\t\tvar sub_scroll = $(el).data('ace_scroll');\r\n\t\tif(!sub_scroll) return false;\r\n\t\tif(typeof func === 'string') {\r\n\t\t\tsub_scroll[func]();\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\treturn sub_scroll;\r\n\t}\t\r\n\t\r\n\tfunction adjust_submenu(sub) {\r\n\t\tvar $li = $(this);\r\n\t\tvar $sub = $(sub);\r\n\t\tsub.style.top = '';\r\n\t\tsub.style.bottom = '';\r\n\r\n\r\n\t\tvar menu_text = null\r\n\t\tif( sidebar_vars['minimized'] && (menu_text = $li.find('.menu-text').get(0)) ) {\r\n\t\t\t//2nd level items don't have .menu-text\r\n\t\t\tmenu_text.style.marginTop = '';\r\n\t\t}\r\n\r\n\t\tvar scroll = ace.helper.scrollTop();\r\n\t\tvar navbar_height = 0;\r\n\r\n\t\tvar $scroll = scroll;\r\n\t\t\r\n\t\tif( navbar_fixed ) {\r\n\t\t\tnavbar_height = sidebar.offsetTop;//$navbar.height();\r\n\t\t\t$scroll += navbar_height + 1;\r\n\t\t\t//let's avoid our submenu from going below navbar\r\n\t\t\t//because of chrome z-index stacking issue and firefox's normal .submenu over fixed .navbar flicker issue\r\n\t\t}\r\n\r\n\r\n\r\n\r\n\t\tvar off = $li.offset();\r\n\t\toff.top = parseInt(off.top);\r\n\t\t\r\n\t\tvar extra = 0, parent_height;\r\n\t\t\r\n\t\tsub.style.maxHeight = '';//otherwise scrollHeight won't be consistent in consecutive calls!?\r\n\t\tvar sub_h = sub.scrollHeight;\r\n\t\tvar parent_height = $li.height();\r\n\t\tif(menu_text) {\r\n\t\t\textra = parent_height;\r\n\t\t\toff.top += extra;\r\n\t\t}\r\n\t\tvar sub_bottom = parseInt(off.top + sub_h)\r\n\r\n\t\tvar move_up = 0;\r\n\t\tvar winh = $window.height();\r\n\r\n\r\n\t\t//if the bottom of menu is going to go below visible window\r\n\r\n\t\tvar top_space = parseInt(off.top - $scroll - extra);//available space on top\r\n\t\tvar win_space = winh;//available window space\r\n\t\t\r\n\t\tvar horizontal = sidebar_vars['horizontal'], horizontal_sub = false;\r\n\t\tif(horizontal && this.parentNode == nav_list) {\r\n\t\t\tmove_up = 0;//don't move up first level submenu in horizontal mode\r\n\t\t\toff.top += $li.height();\r\n\t\t\thorizontal_sub = true;//first level submenu\r\n\t\t}\r\n\r\n\t\tif(!horizontal_sub && (move_up = (sub_bottom - (winh + scroll))) >= 0 ) {\r\n\t\t\t//don't move up more than available space\r\n\t\t\tmove_up = move_up < top_space ? move_up : top_space;\r\n\r\n\t\t\t//move it up a bit more if there's empty space\r\n\t\t\tif(move_up == 0) move_up = 20;\r\n\t\t\tif(top_space - move_up > 10) {\r\n\t\t\t\tmove_up += parseInt(Math.min(25, top_space - move_up));\r\n\t\t\t}\r\n\r\n\r\n\t\t\t//move it down if submenu's bottom is going above parent LI\r\n\t\t\tif(off.top + (parent_height - extra) > (sub_bottom - move_up)) {\r\n\t\t\t\tmove_up -= (off.top + (parent_height - extra) - (sub_bottom - move_up));\r\n\t\t\t}\r\n\r\n\t\t\tif(move_up > 0) {\r\n\t\t\t\tsub.style.top = -(move_up) + 'px';\r\n\t\t\t\tif( menu_text ) {\r\n\t\t\t\t\tmenu_text.style.marginTop = -(move_up) + 'px';\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(move_up < 0) move_up = 0;//when it goes below\r\n\t\t\r\n\t\tvar pull_up = move_up > 0 && move_up > parent_height - 20;\r\n\t\tif(pull_up) {\r\n\t\t\t$li.addClass('pull_up');\r\n\t\t}\r\n\t\telse $li.removeClass('pull_up');\r\n\t\t\r\n\t\t\r\n\t\t//flip submenu if out of window width\r\n\t\tif(horizontal) {\r\n\t\t\tif($li.parent().parent().hasClass('hover-flip')) $li.addClass('hover-flip');//if a parent is already flipped, flip it then!\r\n\t\t\telse {\r\n\t\t\t\tvar sub_off = $sub.offset();\r\n\t\t\t\tvar sub_w = $sub.width();\r\n\t\t\t\tvar win_w = $window.width();\r\n\t\t\t\tif(sub_off.left + sub_w > win_w) {\r\n\t\t\t\t\t$li.addClass('hover-flip');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\r\n\r\n\t\t//don't add scrollbars if it contains .hover menus\r\n\t\tvar has_hover = $li.hasClass('hover') && !sidebar_vars['mobile_view'];\r\n\t\tif(has_hover && $sub.find('> li > .submenu').length > 0) return;\r\n\r\n\t\r\n\t\t//if(  ) {\r\n\t\t\tvar scroll_height = (win_space - (off.top - scroll)) + (move_up);\r\n\t\t\t//if after scroll, the submenu is above parent LI, then move it down\r\n\t\t\tvar tmp = move_up - scroll_height;\r\n\t\t\tif(tmp > 0 && tmp < parent_height) scroll_height += parseInt(Math.max(parent_height, parent_height - tmp));\r\n\r\n\t\t\tscroll_height -= 5;\r\n\t\t\t\r\n\t\t\tif(scroll_height < 90) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar ace_scroll = false;\r\n\t\t\tif(!nativeScroll) {\r\n\t\t\t\tace_scroll = getSubScroll(sub);\r\n\t\t\t\tif(ace_scroll == false) {\r\n\t\t\t\t\t$sub.ace_scroll({\r\n\t\t\t\t\t\t//hideOnIdle: true,\r\n\t\t\t\t\t\tobserveContent: true,\r\n\t\t\t\t\t\tdetached: true,\r\n\t\t\t\t\t\tupdatePos: false,\r\n\t\t\t\t\t\treset: true,\r\n\t\t\t\t\t\tmouseWheelLock: true,\r\n\t\t\t\t\t\tstyleClass: self.settings.sub_scroll_style\r\n\t\t\t\t\t});\r\n\t\t\t\t\tace_scroll = getSubScroll(sub);\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar track = ace_scroll.get_track();\r\n\t\t\t\t\tif(track) {\r\n\t\t\t\t\t\t//detach it from body and insert it after submenu for better and cosistent positioning\r\n\t\t\t\t\t\t$sub.after(track);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tace_scroll.update({size: scroll_height});\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\t$sub\r\n\t\t\t\t.addClass('sub-scroll')\r\n\t\t\t\t.css('max-height', (scroll_height)+'px')\r\n\t\t\t}\r\n\r\n\r\n\t\t\tlastScrollHeight = scroll_height;\r\n\t\t\tif(!nativeScroll && ace_scroll) {\r\n\t\t\t\tif(scroll_height > 14 && sub_h - scroll_height > 4) {\r\n\t\t\t\t\tace_scroll.enable()\r\n\t\t\t\t\tace_scroll.reset();\r\n\t\t\t\t}\t\t\t\r\n\t\t\t\telse {\r\n\t\t\t\t\tace_scroll.disable();\r\n\t\t\t\t}\r\n\r\n\t\t\t\t//////////////////////////////////\r\n\t\t\t\tvar track = ace_scroll.get_track();\r\n\t\t\t\tif(track) {\r\n\t\t\t\t\ttrack.style.top = -(move_up - extra - 1) + 'px';\r\n\t\t\t\t\t\r\n\t\t\t\t\tvar off = $sub.position();\r\n\t\t\t\t\tvar left = off.left \r\n\t\t\t\t\tif( !scroll_right ) {\r\n\t\t\t\t\t\tleft += ($sub.outerWidth() - ace_scroll.track_size());\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tleft += 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttrack.style.left = parseInt(left) + 'px';\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(horizontal_sub) {//first level submenu\r\n\t\t\t\t\t\ttrack.style.left = parseInt(left - 2) + 'px';\r\n\t\t\t\t\t\ttrack.style.top = parseInt(off.top) + (menu_text ? extra - 2 : 0) + 'px';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t//}\r\n\r\n\r\n\t\t//again force redraw for safari!\r\n\t\tif( ace.vars['safari'] ) {\r\n\t\t\tace.helper.redraw(sub)\r\n\t\t}\r\n   }\r\n\r\n}\r\n \r\n \r\n \r\n /////////////////////////////////////////////\r\n $.fn.ace_sidebar_hover = function (option, value) {\r\n\tvar method_call;\r\n\r\n\tvar $set = this.each(function () {\r\n\t\tvar $this = $(this);\r\n\t\tvar data = $this.data('ace_sidebar_hover');\r\n\t\tvar options = typeof option === 'object' && option;\r\n\r\n\t\tif (!data) $this.data('ace_sidebar_hover', (data = new Sidebar_Hover(this, options)));\r\n\t\tif (typeof option === 'string' && typeof data[option] === 'function') {\r\n\t\t\tmethod_call = data[option](value);\r\n\t\t}\r\n\t});\r\n\r\n\treturn (method_call === undefined) ? $set : method_call;\r\n }\r\n \r\n  $.fn.ace_sidebar_hover.defaults = {\r\n\t'sub_hover_delay': 750,\r\n\t'sub_scroll_style': 'no-track scroll-thin'\r\n }\r\n \r\n\r\n})(window.jQuery);\r\n\r\n"],"sourceRoot":"/source/"}