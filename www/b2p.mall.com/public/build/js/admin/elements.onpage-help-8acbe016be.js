window.Onpage_Help=function(t){function e(){if(_){n(),h=document.body.scrollHeight-2,f=document.body.scrollWidth-2;for(var t in g)g.hasOwnProperty(t)&&i(t);for(var t in g)g.hasOwnProperty(t)&&a(t)}}function n(t){if(t===!0||0==m){t===!0&&x.find(".onpage-help-section").remove(),g={},b={},m=0;var e=c("*").contents().filter(function(){return 8==this.nodeType});c(e).each(function(){var t;if(t=c.trim(this.data).match(/#section\s*:\s*([\w\d\-\.\/]+)/i)){var e=t[1];e in g||(g[e]=this)}if(t=c.trim(this.data).match(/\/section\s*:\s*([\w\d\-\.\/]+)/i)){var e=t[1];!(e in b)&&e in g&&(b[e]=this,m++)}})}}function i(t){if(t in g&&t in b){for(var e=1e6,n=1e6,i=-1e6,a=-1e6,l=!1,o=[],s=g[t],d=b[t];s!=d&&(s=s.nextSibling,null!=s);)1==s.nodeType&&o.push(s);var r=o.length;if(r>0&&!C.settings.include_all&&(o=1==r?[o[0]]:[o[0],o[r-1]]),c(o).each(function(){var t=c(this);if(!t.is(":hidden")){var o=t.offset(),s=t.outerWidth(),d=t.outerHeight();o&&s&&d&&(l=!0,o.left<e&&(e=o.left),o.left+s>i&&(i=o.left+s),o.top<n&&(n=o.top),o.top+d>a&&(a=o.top+d))}}),!l)return void(v[t]={is_hidden:!0});e-=1,n-=1,i+=1,a+=1;var p=i-e,u=a-n;return e+p<2||e>f||n+u<2||n>h?void(v[t]={is_hidden:!0}):void(v[t]={left:parseInt(e),top:parseInt(n),width:parseInt(p),height:parseInt(u)})}}function a(t){if(t in v&&x){var e=x.find('.onpage-help-section[data-section="'+t+'"]').eq(0);0==e.length&&(e=c('<a class="onpage-help-section" href="#" />').appendTo(x),u&&e.append('<span class="ie-hover-fix" />'),C.settings.icon_1&&e.append('<i class="help-icon-1 '+C.settings.icon_1+'"></i>'),C.settings.icon_2&&e.append('<i class="help-icon-2 '+C.settings.icon_2+'"></i>'),e.attr("data-section",t),e.on("click",function(e){e.preventDefault(),s(t)}));var n=v[t];if(n.is_hidden===!0)return void e.addClass("hidden");e.css({left:n.left,top:n.top,width:n.width,height:n.height}),e.removeClass("hidden"),e.removeClass("help-section-small help-section-smaller"),n.height<55||n.width<55?e.addClass("help-section-smaller"):(n.height<75||n.width<75)&&e.addClass("help-section-small")}}function l(){if(O){var t=O[0],e=t.scrollHeight<=t.clientHeight,n=c.event.special.mousewheel?"mousewheel.ace.help":"mousewheel.ace.help DOMMouseScroll.ace.help";O.parent().off(n).on(n,function(n){if(e)n.preventDefault();else{n.deltaY=n.deltaY||0;var i=n.deltaY>0||n.originalEvent.detail<0||n.originalEvent.wheelDelta>0?1:-1;i==-1&&t.scrollTop+t.clientHeight>=t.scrollHeight?n.preventDefault():1==i&&t.scrollTop<=0&&n.preventDefault()}})}}function o(){if(O){var t=parseInt(S.find(".modal-dialog").css("margin-top"));t=t+110+parseInt(t/2),P=parseInt(c(window).innerHeight()-t+40),O.css({"max-height":P})}}function s(t,e){null==S&&(S=c('<div id="onpage-help-modal" class="modal onpage-help-modal" tabindex="-1" role="dialog" aria-labelledby="HelpModalDialog" aria-hidden="true">\t\t\t  <div class="modal-dialog modal-lg">\t\t\t\t<div class="modal-content">\t\t\t\t\t<div class="modal-header">\t\t\t\t\t  <div class="pull-right onpage-help-modal-buttons">\t\t\t\t\t\t<button aria-hidden="true" data-navdir="up" type="button" class="disabled btn btn-white btn-success btn-sm"><i class="ace-icon fa fa-level-up fa-flip-horizontal bigger-125 icon-only"></i></button>\t\t\t\t\t\t&nbsp;\t\t\t\t\t\t<button aria-hidden="true" data-navdir="back" type="button" class="disabled btn btn-white btn-info btn-sm"><i class="ace-icon fa fa-arrow-left icon-only"></i></button>\t\t\t\t\t\t<button aria-hidden="true" data-navdir="forward" type="button" class="disabled btn btn-white btn-info  btn-sm"><i class="ace-icon fa fa-arrow-right icon-only"></i></button>\t\t\t\t\t\t&nbsp;\t\t\t\t\t\t<button aria-hidden="true" data-dismiss="modal" class="btn btn-white btn-danger btn-sm" type="button"><i class="ace-icon fa fa-times icon-only"></i></button>\t\t\t\t\t  </div>\t\t\t\t\t  <h4 class="modal-title">Help Dialog</h4>\t\t\t\t\t</div>\t\t\t\t\t<div class="modal-body"><div class="onpage-help-content"></div></div>\t\t\t\t</div>\t\t\t  </div>\t\t\t</div>').appendTo("body"),O=S.find(".modal-body"),O.css({"overflow-y":"auto","overflow-x":"hidden"}),S.css({overflow:"hidden"}).on("show.bs.modal",function(){T()}).on("hidden.bs.modal",function(){I()}),S.find(".onpage-help-modal-buttons").on("click","button[data-navdir]",function(){var t=c(this).attr("data-navdir");if("back"==t)H>0&&(H--,s(D[H],!1));else if("forward"==t)H<D.length-1&&(H++,s(D[H],!1));else if("up"==t){var e,n=c(this);if(n.hasClass("disabled")||!(e=n.attr("data-url")))return;s(e,!0)}})),S.hasClass("in")||(document.body.lastChild!=S[0]&&c(document.body).append(S),S.modal("show"),o()),S.find(".modal-title").wrapInner("<span class='hidden' />").append('<i class="fa fa-spinner fa-spin blue bigger-125"></i>');var n=c(".onpage-help-content");n.addClass("hidden"),c(document.body).removeClass("modal-open");var i=t.match(/file\:(.*?)\:(.+)/i);return i&&3==i.length?void r(i[2],i[1],!1):(t=t.replace(/^#/g,""),"function"==typeof C.settings.section_url&&(url=C.settings.section_url.call(y,t)),void c.ajax({url:url,dataType:"text"}).done(function(i){var a="",o="";if("function"==typeof C.settings.section_title)a=C.settings.section_title.call(y,i,t,url);else for(var s=function(t){return t.replace(/[\-\.\(\)\=\"\'\\\/]/g,function(t,e){return"\\"+t})},r=t;0==a.length;){var p='\\<([a-z][a-z0-9]*)(?:\\s+)(?:[^\\<\\>]+?)data\\-id\\=\\"\\#'+s(r)+'\\"(?:[^\\>]*)\\>([\\s\\S]*?)</\\1>',h=(new RegExp(p,"im"),i.match(p));if(h&&h[2]){a=h[2];break}var f;if(!((f=r.lastIndexOf("."))>-1))break;r=r.substr(0,f)}if(S.find(".modal-title").html(c.trim(a)||"&nbsp;"),"function"==typeof C.settings.section_content)o=C.settings.section_content.call(y,i,t,url);else{var u="<!-- #section:"+t+" -->",g=i.indexOf(u),b=i.indexOf("<!-- /section:"+t+" -->",g);if(g==-1||b==-1)return void S.find(".modal-title").html("&nbsp;");o=i.substring(g+u.length+1,b)}if(o="function"==typeof C.settings.code_highlight?C.settings.code_highlight.call(y,o):o.replace(/\<pre((?:(?:.*?)(?:data\-language=["'](?:[\w\d]+)["'])(?:.*?))|(?:(?:.*?)(?:class=["'](?:.*?)language\-(?:[\w\d]+)(?:.*?)["'])(?:.*?)))\>([\s\S]+?)\<\/pre\>/gi,function(t,e,n){return"<pre"+e+">"+n.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")+"</pre>"}),"function"==typeof C.settings.img_url&&(o=o.replace(/\<img(?:(?:.*?)src=["']([^"']+)["'])/gi,function(t,e){var n=C.settings.img_url.call(y,e);return t.replace(e,n)})),n.empty().append(o),"function"==typeof C.settings.code_highlight)C.settings.code_highlight.call(y,n);else if("rainbow"===C.settings.code_highlight)try{Rainbow.color(n[0])}catch(v){}else if("prism"===C.settings.code_highlight)try{n.find('pre[class*="language-"],code[class*="language-"]').each(function(){Prism.highlightElement(this)})}catch(v){}if(C.settings.add_panels){n.find(C.settings.panel_content_selector).each(function(){var t=c(this).prevAll(C.settings.panel_content_title);return 0!=t.length&&(t=t.attr("class","panel-title").wrapInner('<a class="help-panel-toggle" href="#" data-parent="#" data-toggle="collapse" />').wrap('<div class="panel-heading" />').closest(".panel-heading"),c(this).wrap('<div class="panel panel-default panel-help"><div class="panel-collapse collapse"><div class="panel-body"></div></div></div>'),void c(this).closest(".panel").prepend(t))});var m=c(".panel-group").length;n.find(".panel").each(function(){if(!c(this).parent().hasClass("panel-group")){var t="panel-group-help-"+ ++m,e=c('<div class="panel-group" />').insertBefore(this);e.attr("id",t);var n=0;e.siblings(".panel").appendTo(e),e.find(".help-panel-toggle").append('<i class="pull-right ace-icon fa fa-plus" data-icon-show="ace-icon fa fa-plus" data-icon-hide="ace-icon fa fa-minus"></i>').attr("data-parent","#"+t).each(function(){n++,c(this).attr("data-target","#"+t+"-"+n),c(this).closest(".panel-heading").siblings(".panel-collapse").attr("id",t+"-"+n)})}}),c(document).off("click.help-panel-toggle",".help-panel-toggle").on("click.help-panel-toggle",".help-panel-toggle",function(t){t.preventDefault()})}n.removeClass("hidden");var w=n.find("img:visible");if(w.length>0){var _=0;w.off(".help_body_scroll").on("load.help_body_scroll error.help_body_scroll",function(){c(this).off(".help_body_scroll"),_++,_>=w.length&&l()})}l(),n.find(".panel > .panel-collapse").on("shown.bs.collapse hidden.bs.collapse",function(){l()}),d(t,e);var k=-1;(k=t.lastIndexOf("."))>-1?(t=t.substr(0,k),S.find("button[data-navdir=up]").removeClass("disabled").attr("data-url",t)):S.find("button[data-navdir=up]").addClass("disabled").removeAttr("data-url").blur()}).fail(function(){S.find(".modal-title").find(".fa-spin").remove().end().find(".hidden").children().unwrap()}))}function d(t,e){e!==!1&&(D.length>0&&(D=D.slice(0,H+1)),D[D.length-1]!=t&&(D.push(t),H=D.length-1)),0==H?S.find("button[data-navdir=back]").addClass("disabled").blur():S.find("button[data-navdir=back]").removeClass("disabled"),H==D.length-1?S.find("button[data-navdir=forward]").addClass("disabled").blur():S.find("button[data-navdir=forward]").removeClass("disabled")}function r(t,e,n){var i=t;"function"==typeof C.settings.file_url&&(t=C.settings.file_url.call(y,t,e)),c.ajax({url:t,dataType:"text"}).done(function(t){d("file:"+e+":"+i,n),S.find("button[data-navdir=up]").addClass("disabled").blur(),S.find(".modal-title").html(i).wrapInner("<code />"),"json"!=e?t="css"!=e?t.replace(/\n[\t]{1,}/g,function(t,e){return t.replace(/\t/g,"  ")}):t.replace(/\t/g,"  "):(e="javascript",t=JSON.stringify(JSON.parse(t),null,2)),t=t.replace(/\>/g,"&gt;").replace(/\</g,"&lt;");var a=c(".onpage-help-content");if(a.removeClass("hidden").empty(),"function"==typeof C.settings.code_highlight)t=C.settings.code_highlight.call(y,t,e),a.html(t);else if("rainbow"===C.settings.code_highlight)try{Rainbow.color(t,e,function(t){a.html(t).wrapInner('<pre data-language="'+e+'" />')})}catch(l){}else if("prism"===C.settings.code_highlight)try{t=Prism.highlight(t,Prism.languages[e],e),a.html(t).wrapInner('<pre class="language-'+e+'" />')}catch(l){}})}var c=window.jQuery||null;if(null!=c){t=t||{};var p={include_all:!0,icon_1:"fa fa-question",icon_2:"fa fa-lightbulb-o",base:"",code_highlight:window.Rainbow?"rainbow":window.Prism?"prism":null,add_panels:!0,panel_content_selector:".info-section",panel_content_title:".info-title"};this.settings=c.extend({},p,t);var h,f,u=(this.settings.base,document.all&&!window.atob),g={},b={},v={},m=0,w=!1,_=!1,y=this,C=this,k="",x=null,I=function(){if(x){var t=-1;c(document).off("focusin.ace.help").on("focusin.ace.help",function(e){x[0]==e.target||c.contains(x[0],e.target)||x.focus(),e.target==document&&t>-1&&(c("body,html").scrollTop(t),t=-1)}),c(window).on("blur.ace.help",function(){t=c(window).scrollTop()})}},T=function(){c(document).off("focusin.ace.help"),c(window).off("blur.ace.help")};this.toggle=function(){_?y.disable():y.enable()},this.enable=function(){_||"function"==typeof C.settings.before_enable&&C.settings.before_enable.call(y)===!1||(_=!0,c(".onpage-help-backdrop, .onpage-help-section").removeClass("hidden"),k=document.body.style.overflowX,document.body.style.overflowX="hidden",e(),I(),"function"==typeof C.settings.after_enable&&C.settings.after_enable.call(y))},this.disable=function(){_&&("function"==typeof C.settings.before_disable&&C.settings.before_disable.call(y)||(_=!1,c(".onpage-help-backdrop, .onpage-help-section").addClass("hidden"),document.body.style.overflowX=k,T(),"function"==typeof C.settings.after_disable&&C.settings.after_disable.call(y)))},this.is_active=function(){return _},this.show_section_help=function(t){s(t,!0)},this.init=function(){w||(x=c('<div class="onpage-help-container" id="onpage-help-container" tabindex="-1" />').appendTo("body"),x.append('<div class="onpage-help-backdrop hidden" />'),c(window).on("resize.onpage_help",function(){_&&(e(),null!=S&&S.hasClass("in")&&(o(),l()))}),w=!0)},this.init(),this.update_sections=function(){n(!0)};var D=[],H=-1,O=null,P=0,S=null;c(document).on("click",'.onpage-help-modal a[href^="http"]',function(){c(this).attr("target","_blank")}),c(document).on("click",".help-more",function(t){t.preventDefault();var e=c(this).attr("href");s(e)}),c(document).on("click",".open-file[data-open-file]",function(){S.find(".modal-title").wrapInner("<span class='hidden' />").append('<i class="fa fa-spinner fa-spin blue bigger-125"></i>'),c(".onpage-help-content").addClass("hidden");var t=c(this).attr("data-path")||c(this).text(),e=c(this).attr("data-open-file");r(t,e,!0)})}};