{"version":3,"sources":["elements.colorpicker.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"elements.colorpicker.js","sourcesContent":["/**\r\n <b>Custom color picker element</b>. Converts html select elements to a dropdown color picker.\r\n*/\r\n(function($ , undefined) {\r\n\tvar Ace_Colorpicker = function(element, _options) {\r\n\r\n\t\tvar attrib_values = ace.helper.getAttrSettings(element, $.fn.ace_colorpicker.defaults);\r\n\t\tvar options = $.extend({}, $.fn.ace_colorpicker.defaults, _options, attrib_values);\r\n\r\n\r\n\t\tvar $element = $(element);\r\n\t\tvar color_list = '';\r\n\t\tvar color_selected = '';\r\n\t\tvar selection = null;\r\n\t\tvar color_array = [];\r\n\t\t\r\n\t\t$element.addClass('hide').find('option').each(function() {\r\n\t\t\tvar $class = 'colorpick-btn';\r\n\t\t\tvar color = this.value.replace(/[^\\w\\s,#\\(\\)\\.]/g, '');\r\n\t\t\tif(color.indexOf('number') >= 0) return;//ng\r\n\t\t\tif(this.value != color) this.value = color;\r\n\t\t\tif(this.selected) {\r\n\t\t\t\t$class += ' selected';\r\n\t\t\t\tcolor_selected = color;\r\n\t\t\t}\r\n\t\t\tcolor_array.push(color)\r\n\t\t\tcolor_list += '<li><a class=\"'+$class+'\" style=\"background-color:'+color+';\" data-color=\"'+color+'\"></a></li>';\r\n\t\t}).\r\n\t\tend()\r\n\t\t.on('change.color', function(){\r\n\t\t\t$element.next().find('.btn-colorpicker').css('background-color', this.value);\r\n\t\t})\r\n\t\t.after('<div class=\"dropdown dropdown-colorpicker\">\\\r\n\t\t<a data-toggle=\"dropdown\" class=\"dropdown-toggle\" '+(options.auto_pos ? 'data-position=\"auto\"' : '')+'><span class=\"btn-colorpicker\" style=\"background-color:'+color_selected+'\"></span></a><ul class=\"dropdown-menu'+(options.caret? ' dropdown-caret' : '')+(options.pull_right ? ' dropdown-menu-right' : '')+'\">'+color_list+'</ul></div>')\r\n\t\t\r\n\t\t\r\n\t\tvar dropdown = $element.next().find('.dropdown-menu')\r\n\t\tdropdown.on(ace.click_event, function(e, inner_call) {\r\n\t\t\tvar a = $(e.target);\r\n\t\t\tif(!a.is('.colorpick-btn')) return false;\r\n\r\n\t\t\tif(selection) selection.removeClass('selected');\r\n\t\t\tselection = a;\r\n\t\t\tselection.addClass('selected');\r\n\t\t\tvar color = selection.data('color');\r\n\r\n\t\t\tif(inner_call !== true) $element.val(color).trigger('change');\r\n\t\t\t$element.next().find('.btn-colorpicker').css('background-color', color);\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\treturn true;//to hide dropdown\r\n\t\t})\r\n\t\tselection = $element.next().find('a.selected');\r\n\r\n\t\tthis.pick = function(index, insert) {\r\n\t\t\tif(typeof index === 'number') {\r\n\t\t\t\tif(index >= color_array.length) return;\r\n\t\t\t\telement.selectedIndex = index;\r\n\t\t\t\tdropdown.find('a:eq('+index+')').trigger(ace.click_event, [true]);\r\n\t\t\t}\r\n\t\t\telse if(typeof index === 'string') {\r\n\t\t\t\tvar color = index.replace(/[^\\w\\s,#\\(\\)\\.]/g, '');\r\n\t\t\t\tindex = color_array.indexOf(color);\r\n\t\t\t\t\r\n\t\t\t\t//add this color if it doesn't exist\r\n\t\t\t\tif(index == -1 && insert === true) {\r\n\t\t\t\t\tcolor_array.push(color);\r\n\t\t\t\t\t\r\n\t\t\t\t\t$('<option />')\r\n\t\t\t\t\t.appendTo($element)\r\n\t\t\t\t\t.val(color);\r\n\t\t\t\t\t\r\n\t\t\t\t\t$('<li><a class=\"colorpick-btn\"></a></li>')\r\n\t\t\t\t\t.appendTo(dropdown)\r\n\t\t\t\t\t.find('a')\r\n\t\t\t\t\t.css('background-color', color)\r\n\t\t\t\t\t.data('color', color);\r\n\t\t\t\t\t\r\n\t\t\t\t\tindex = color_array.length - 1;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(index == -1) return;\r\n\t\t\t\tdropdown.find('a:eq('+index+')').trigger(ace.click_event, [true]);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.destroy = function() {\r\n\t\t\t$element.removeClass('hide')//.off('change.color')\r\n\t\t\t.next().remove();\r\n\t\t\tcolor_array = [];\r\n\t\t}\r\n\t}\r\n\r\n\r\n\t$.fn.ace_colorpicker = function(option, value) {\r\n\t\tvar retval;\r\n\r\n\t\tvar $set = this.each(function () {\r\n\t\t\tvar $this = $(this);\r\n\t\t\tvar data = $this.data('ace_colorpicker');\r\n\t\t\tvar options = typeof option === 'object' && option;\r\n\r\n\t\t\tif (!data) $this.data('ace_colorpicker', (data = new Ace_Colorpicker(this, options)));\r\n\t\t\tif (typeof option === 'string') retval = data[option](value);\r\n\t\t});\r\n\r\n\t\treturn (retval === undefined) ? $set : retval;\r\n\t}\r\n\t\r\n\t$.fn.ace_colorpicker.defaults = {\r\n\t\t'pull_right' : false,\r\n\t\t'caret': true,\r\n\t\t'auto_pos': true\r\n\t}\r\n\t\r\n})(window.jQuery);"],"sourceRoot":"/source/"}