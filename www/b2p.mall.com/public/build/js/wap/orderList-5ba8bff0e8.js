"use strict";var order_list={init:function(){this.scrollLoadMore()},scrollLoadMore:function(){var o=this,t=!0,a=$("#order_tab").data("url"),e=$(window).height(),d=$("#order_tab li.on").data("type"),n=$("#order_content").data("next-page")||null;$(document).scroll(function(){n=$("#order_content").data("next-page")||null;var s=$(document).scrollTop(),i=$(document).height(),r=e+s;r==i&&t&&null!=n?(t=!1,$("#load_point").html("数据加载中……"),$.ajax({url:a,type:"GET",dataType:"json",data:{type:d,page:n}}).done(function(a){var e=o._dataPj(a);$("#order_content").data("next-page",a.response_data.next_page),t=!0,$("#order_content").append(e)}).fail(function(){t=!0,$("#load_point").html("加载失败！请刷新页面重新加载！")})):$("#load_point").html("没有更多的数据了！")}),$("#load_point").on("click",function(){n=$("#order_content").data("next-page")||null,t&&null!=n?(t=!1,$("#load_point").html("数据加载中……"),$.ajax({url:a,type:"GET",dataType:"json",data:{type:d,page:n}}).done(function(a){var e=o._dataPj(a);$("#order_content").data("next-page",a.response_data.next_page),null!=a.response_data.next_page&&$("#load_point").html("查看更多数据"),t=!0,$("#order_content").append(e)}).fail(function(){t=!0,$("#load_point").html("加载失败！请刷新页面重新加载！")})):$("#load_point").html("没有更多的数据了！")})},_dataPj:function(o){var t="";return null==o.response_data.order_list.length?t='<p class="no_order">暂无订单！</p>':$.each(o.response_data.order_list,function(){t+='<li><div class="order_time">'+this.created_at+'</div><div class="goods_info"><div class="goods_img"><a href="'+this.goods_url+'"><img src="'+this.orderGoods[0].goods_img_url+'" alt="'+this.orderGoods[0].goods_title+'"></a></div><div class="goods_name"><p>'+this.orderGoods[0].goods_title+" "+this.orderGoods[0].goods_spec+"</p><p>数量："+this.orderGoods[0].goods_number+'</p><p>&nbsp;<!-- 库存：1000件 --></p></div><div class="goods_price"><span>&yen;<big id="goods_price">'+this.orderGoods[0].buy_price+'</big>/件</span></div></div><div class="goods_sum">共1件商品<span>实付：<big id="pay_price">&yen;'+this.order_amount+'</big></span></div><div class="order_status"><!-- <span>待支付</span> --><!-- <a href="" class="go_to_buy">去支付</a> --><!-- <a href="">取消订单</a> --><!-- <a href="" class="share_pt">分享拼团</a> -->'+(this.join_group?'<a href="'+this.join_group+'" class="join_pt">加入拼团</a>':"")+"</div>"+(this.is_end?'<div class="is_over">拼团已结束</div>':"")+(this.wait_cashback?'<div class="backtrack_money">等待返回拼团优惠金</div>':"")+"</li>"}),t}};$(function(){order_list.init()});