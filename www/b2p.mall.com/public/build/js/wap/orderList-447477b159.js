"use strict";var order_list={init:function(){this.tabSwitch(),this.scrollLoadMore()},tabSwitch:function(){var o=this,t="";$("#order_tab li").on("click",function(){var a=this;t=$(this).parents("ul").data("url");var s=$(this).data("type");$.ajax({url:t,type:"get",dataType:"json",data:{type:s}}).done(function(t){var s=o._dataPj(t);$("#order_content").data("next-page",t.response_data.next_page),$(a).addClass("on").siblings("li").removeClass("on"),$("#order_content").html(s)}).fail(function(){})})},scrollLoadMore:function(){var o=this,t=!0,a=$("#order_tab").data("url"),s=$("#order_content").data("next-page"),i=$(window).height(),d=$("#order_tab li.on").data("type");$(document).scroll(function(){var r=$(document).scrollTop(),e=$(document).height(),n=i+r;n==e&&t&&""!=s?(t=!1,$("#load_point").html("数据加载中……"),$.ajax({url:a,type:"GET",dataType:"json",data:{type:d,page:s}}).done(function(a){var s=o._dataPj(a);t=!0,$("#order_content").append(s)}).fail(function(){t=!0,$("#load_point").html("加载失败！请刷新页面重新加载！")})):$("#load_point").html("没有更多的数据了！")})},_dataPj:function(o){var t="";return null==o.response_data.order_list.length?t='<p class="no_order">暂无订单！</p>':$.each(o.response_data.order_list,function(){t+='<li><div class="order_time">'+this.created_at+'</div><div class="goods_info"><div class="goods_img"><a href="'+this.goods_url+'"><img src="'+this.orderGoods[0].goods_img_url+'" alt="'+this.orderGoods[0].goods_title+'"></a></div><div class="goods_name"><p>'+this.orderGoods[0].goods_title+" "+this.orderGoods[0].goods_spec+"</p><p>数量："+this.orderGoods[0].goods_number+'</p><p>&nbsp;<!-- 库存：1000件 --></p></div><div class="goods_price"><span>&yen;<big id="goods_price">'+this.orderGoods[0].buy_price+'</big>/件</span></div></div><div class="goods_sum">共1件商品<span>实付：<big id="pay_price">&yen;'+this.order_amount+'</big></span></div><div class="order_status"><!-- <span>待支付</span> --><!-- <a href="" class="go_to_buy">去支付</a> --><!-- <a href="">取消订单</a> -->'+(this.is_share?'<a href="" class="share_pt">分享拼团</a>':"")+(this.join_group?'<a href="'+this.join_group+'" class="join_pt">加入拼团</a>':"")+"</div>"+(this.is_end?'<div class="is_over">拼团已结束</div>':"")+(this.wait_cashback?'<div class="backtrack_money">等待返回拼团优惠金</div>':"")+"</li>"}),t}};$(function(){order_list.init()});