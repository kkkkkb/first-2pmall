{"version":3,"sources":["bootbox.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"bootbox.js","sourcesContent":["/**\r\n * bootbox.js [v4.4.0]\r\n *\r\n * http://bootboxjs.com/license.txt\r\n */\r\n\r\n// @see https://github.com/makeusabrew/bootbox/issues/180\r\n// @see https://github.com/makeusabrew/bootbox/issues/186\r\n(function (root, factory) {\r\n\r\n  \"use strict\";\r\n  if (typeof define === \"function\" && define.amd) {\r\n    // AMD. Register as an anonymous module.\r\n    define([\"jquery\"], factory);\r\n  } else if (typeof exports === \"object\") {\r\n    // Node. Does not work with strict CommonJS, but\r\n    // only CommonJS-like environments that support module.exports,\r\n    // like Node.\r\n    module.exports = factory(require(\"jquery\"));\r\n  } else {\r\n    // Browser globals (root is window)\r\n    root.bootbox = factory(root.jQuery);\r\n  }\r\n\r\n}(this, function init($, undefined) {\r\n\r\n  \"use strict\";\r\n\r\n  // the base DOM structure needed to create a modal\r\n  var templates = {\r\n    dialog:\r\n      \"<div class='bootbox modal' tabindex='-1' role='dialog'>\" +\r\n        \"<div class='modal-dialog'>\" +\r\n          \"<div class='modal-content'>\" +\r\n            \"<div class='modal-body'><div class='bootbox-body'></div></div>\" +\r\n          \"</div>\" +\r\n        \"</div>\" +\r\n      \"</div>\",\r\n    header:\r\n      \"<div class='modal-header'>\" +\r\n        \"<h4 class='modal-title'></h4>\" +\r\n      \"</div>\",\r\n    footer:\r\n      \"<div class='modal-footer'></div>\",\r\n    closeButton:\r\n      \"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>\",\r\n    form:\r\n      \"<form class='bootbox-form'></form>\",\r\n    inputs: {\r\n      text:\r\n        \"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />\",\r\n      textarea:\r\n        \"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>\",\r\n      email:\r\n        \"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />\",\r\n      select:\r\n        \"<select class='bootbox-input bootbox-input-select form-control'></select>\",\r\n      checkbox:\r\n        \"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>\",\r\n      date:\r\n        \"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />\",\r\n      time:\r\n        \"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />\",\r\n      number:\r\n        \"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />\",\r\n      password:\r\n        \"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />\"\r\n    }\r\n  };\r\n\r\n  var defaults = {\r\n    // default language\r\n    locale: \"en\",\r\n    // show backdrop or not. Default to static so user has to interact with dialog\r\n    backdrop: \"static\",\r\n    // animate the modal in/out\r\n    animate: true,\r\n    // additional class string applied to the top level dialog\r\n    className: null,\r\n    // whether or not to include a close button\r\n    closeButton: true,\r\n    // show the dialog immediately by default\r\n    show: true,\r\n    // dialog container\r\n    container: \"body\"\r\n  };\r\n\r\n  // our public object; augmented after our private API\r\n  var exports = {};\r\n\r\n  /**\r\n   * @private\r\n   */\r\n  function _t(key) {\r\n    var locale = locales[defaults.locale];\r\n    return locale ? locale[key] : locales.en[key];\r\n  }\r\n\r\n  function processCallback(e, dialog, callback) {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n\r\n    // by default we assume a callback will get rid of the dialog,\r\n    // although it is given the opportunity to override this\r\n\r\n    // so, if the callback can be invoked and it *explicitly returns false*\r\n    // then we'll set a flag to keep the dialog active...\r\n    var preserveDialog = $.isFunction(callback) && callback.call(dialog, e) === false;\r\n\r\n    // ... otherwise we'll bin it\r\n    if (!preserveDialog) {\r\n      dialog.modal(\"hide\");\r\n    }\r\n  }\r\n\r\n  function getKeyLength(obj) {\r\n    // @TODO defer to Object.keys(x).length if available?\r\n    var k, t = 0;\r\n    for (k in obj) {\r\n      t ++;\r\n    }\r\n    return t;\r\n  }\r\n\r\n  function each(collection, iterator) {\r\n    var index = 0;\r\n    $.each(collection, function(key, value) {\r\n      iterator(key, value, index++);\r\n    });\r\n  }\r\n\r\n  function sanitize(options) {\r\n    var buttons;\r\n    var total;\r\n\r\n    if (typeof options !== \"object\") {\r\n      throw new Error(\"Please supply an object of options\");\r\n    }\r\n\r\n    if (!options.message) {\r\n      throw new Error(\"Please specify a message\");\r\n    }\r\n\r\n    // make sure any supplied options take precedence over defaults\r\n    options = $.extend({}, defaults, options);\r\n\r\n    if (!options.buttons) {\r\n      options.buttons = {};\r\n    }\r\n\r\n    buttons = options.buttons;\r\n\r\n    total = getKeyLength(buttons);\r\n\r\n    each(buttons, function(key, button, index) {\r\n\r\n      if ($.isFunction(button)) {\r\n        // short form, assume value is our callback. Since button\r\n        // isn't an object it isn't a reference either so re-assign it\r\n        button = buttons[key] = {\r\n          callback: button\r\n        };\r\n      }\r\n\r\n      // before any further checks make sure by now button is the correct type\r\n      if ($.type(button) !== \"object\") {\r\n        throw new Error(\"button with key \" + key + \" must be an object\");\r\n      }\r\n\r\n      if (!button.label) {\r\n        // the lack of an explicit label means we'll assume the key is good enough\r\n        button.label = key;\r\n      }\r\n\r\n      if (!button.className) {\r\n        if (total <= 2 && index === total-1) {\r\n          // always add a primary to the main option in a two-button dialog\r\n          button.className = \"btn-primary\";\r\n        } else {\r\n          button.className = \"btn-default\";\r\n        }\r\n      }\r\n    });\r\n\r\n    return options;\r\n  }\r\n\r\n  /**\r\n   * map a flexible set of arguments into a single returned object\r\n   * if args.length is already one just return it, otherwise\r\n   * use the properties argument to map the unnamed args to\r\n   * object properties\r\n   * so in the latter case:\r\n   * mapArguments([\"foo\", $.noop], [\"message\", \"callback\"])\r\n   * -> { message: \"foo\", callback: $.noop }\r\n   */\r\n  function mapArguments(args, properties) {\r\n    var argn = args.length;\r\n    var options = {};\r\n\r\n    if (argn < 1 || argn > 2) {\r\n      throw new Error(\"Invalid argument length\");\r\n    }\r\n\r\n    if (argn === 2 || typeof args[0] === \"string\") {\r\n      options[properties[0]] = args[0];\r\n      options[properties[1]] = args[1];\r\n    } else {\r\n      options = args[0];\r\n    }\r\n\r\n    return options;\r\n  }\r\n\r\n  /**\r\n   * merge a set of default dialog options with user supplied arguments\r\n   */\r\n  function mergeArguments(defaults, args, properties) {\r\n    return $.extend(\r\n      // deep merge\r\n      true,\r\n      // ensure the target is an empty, unreferenced object\r\n      {},\r\n      // the base options object for this type of dialog (often just buttons)\r\n      defaults,\r\n      // args could be an object or array; if it's an array properties will\r\n      // map it to a proper options object\r\n      mapArguments(\r\n        args,\r\n        properties\r\n      )\r\n    );\r\n  }\r\n\r\n  /**\r\n   * this entry-level method makes heavy use of composition to take a simple\r\n   * range of inputs and return valid options suitable for passing to bootbox.dialog\r\n   */\r\n  function mergeDialogOptions(className, labels, properties, args) {\r\n    //  build up a base set of dialog properties\r\n    var baseOptions = {\r\n      className: \"bootbox-\" + className,\r\n      buttons: createLabels.apply(null, labels)\r\n    };\r\n\r\n    // ensure the buttons properties generated, *after* merging\r\n    // with user args are still valid against the supplied labels\r\n    return validateButtons(\r\n      // merge the generated base properties with user supplied arguments\r\n      mergeArguments(\r\n        baseOptions,\r\n        args,\r\n        // if args.length > 1, properties specify how each arg maps to an object key\r\n        properties\r\n      ),\r\n      labels\r\n    );\r\n  }\r\n\r\n  /**\r\n   * from a given list of arguments return a suitable object of button labels\r\n   * all this does is normalise the given labels and translate them where possible\r\n   * e.g. \"ok\", \"confirm\" -> { ok: \"OK, cancel: \"Annuleren\" }\r\n   */\r\n  function createLabels() {\r\n    var buttons = {};\r\n\r\n    for (var i = 0, j = arguments.length; i < j; i++) {\r\n      var argument = arguments[i];\r\n      var key = argument.toLowerCase();\r\n      var value = argument.toUpperCase();\r\n\r\n      buttons[key] = {\r\n        label: _t(value)\r\n      };\r\n    }\r\n\r\n    return buttons;\r\n  }\r\n\r\n  function validateButtons(options, buttons) {\r\n    var allowedButtons = {};\r\n    each(buttons, function(key, value) {\r\n      allowedButtons[value] = true;\r\n    });\r\n\r\n    each(options.buttons, function(key) {\r\n      if (allowedButtons[key] === undefined) {\r\n        throw new Error(\"button key \" + key + \" is not allowed (options are \" + buttons.join(\"\\n\") + \")\");\r\n      }\r\n    });\r\n\r\n    return options;\r\n  }\r\n\r\n  exports.alert = function() {\r\n    var options;\r\n\r\n    options = mergeDialogOptions(\"alert\", [\"ok\"], [\"message\", \"callback\"], arguments);\r\n\r\n    if (options.callback && !$.isFunction(options.callback)) {\r\n      throw new Error(\"alert requires callback property to be a function when provided\");\r\n    }\r\n\r\n    /**\r\n     * overrides\r\n     */\r\n    options.buttons.ok.callback = options.onEscape = function() {\r\n      if ($.isFunction(options.callback)) {\r\n        return options.callback.call(this);\r\n      }\r\n      return true;\r\n    };\r\n\r\n    return exports.dialog(options);\r\n  };\r\n\r\n  exports.confirm = function() {\r\n    var options;\r\n\r\n    options = mergeDialogOptions(\"confirm\", [\"cancel\", \"confirm\"], [\"message\", \"callback\"], arguments);\r\n\r\n    /**\r\n     * overrides; undo anything the user tried to set they shouldn't have\r\n     */\r\n    options.buttons.cancel.callback = options.onEscape = function() {\r\n      return options.callback.call(this, false);\r\n    };\r\n\r\n    options.buttons.confirm.callback = function() {\r\n      return options.callback.call(this, true);\r\n    };\r\n\r\n    // confirm specific validation\r\n    if (!$.isFunction(options.callback)) {\r\n      throw new Error(\"confirm requires a callback\");\r\n    }\r\n\r\n    return exports.dialog(options);\r\n  };\r\n\r\n  exports.prompt = function() {\r\n    var options;\r\n    var defaults;\r\n    var dialog;\r\n    var form;\r\n    var input;\r\n    var shouldShow;\r\n    var inputOptions;\r\n\r\n    // we have to create our form first otherwise\r\n    // its value is undefined when gearing up our options\r\n    // @TODO this could be solved by allowing message to\r\n    // be a function instead...\r\n    form = $(templates.form);\r\n\r\n    // prompt defaults are more complex than others in that\r\n    // users can override more defaults\r\n    // @TODO I don't like that prompt has to do a lot of heavy\r\n    // lifting which mergeDialogOptions can *almost* support already\r\n    // just because of 'value' and 'inputType' - can we refactor?\r\n    defaults = {\r\n      className: \"bootbox-prompt\",\r\n      buttons: createLabels(\"cancel\", \"confirm\"),\r\n      value: \"\",\r\n      inputType: \"text\"\r\n    };\r\n\r\n    options = validateButtons(\r\n      mergeArguments(defaults, arguments, [\"title\", \"callback\"]),\r\n      [\"cancel\", \"confirm\"]\r\n    );\r\n\r\n    // capture the user's show value; we always set this to false before\r\n    // spawning the dialog to give us a chance to attach some handlers to\r\n    // it, but we need to make sure we respect a preference not to show it\r\n    shouldShow = (options.show === undefined) ? true : options.show;\r\n\r\n    /**\r\n     * overrides; undo anything the user tried to set they shouldn't have\r\n     */\r\n    options.message = form;\r\n\r\n    options.buttons.cancel.callback = options.onEscape = function() {\r\n      return options.callback.call(this, null);\r\n    };\r\n\r\n    options.buttons.confirm.callback = function() {\r\n      var value;\r\n\r\n      switch (options.inputType) {\r\n        case \"text\":\r\n        case \"textarea\":\r\n        case \"email\":\r\n        case \"select\":\r\n        case \"date\":\r\n        case \"time\":\r\n        case \"number\":\r\n        case \"password\":\r\n          value = input.val();\r\n          break;\r\n\r\n        case \"checkbox\":\r\n          var checkedItems = input.find(\"input:checked\");\r\n\r\n          // we assume that checkboxes are always multiple,\r\n          // hence we default to an empty array\r\n          value = [];\r\n\r\n          each(checkedItems, function(_, item) {\r\n            value.push($(item).val());\r\n          });\r\n          break;\r\n      }\r\n\r\n      return options.callback.call(this, value);\r\n    };\r\n\r\n    options.show = false;\r\n\r\n    // prompt specific validation\r\n    if (!options.title) {\r\n      throw new Error(\"prompt requires a title\");\r\n    }\r\n\r\n    if (!$.isFunction(options.callback)) {\r\n      throw new Error(\"prompt requires a callback\");\r\n    }\r\n\r\n    if (!templates.inputs[options.inputType]) {\r\n      throw new Error(\"invalid prompt type\");\r\n    }\r\n\r\n    // create the input based on the supplied type\r\n    input = $(templates.inputs[options.inputType]);\r\n\r\n    switch (options.inputType) {\r\n      case \"text\":\r\n      case \"textarea\":\r\n      case \"email\":\r\n      case \"date\":\r\n      case \"time\":\r\n      case \"number\":\r\n      case \"password\":\r\n        input.val(options.value);\r\n        break;\r\n\r\n      case \"select\":\r\n        var groups = {};\r\n        inputOptions = options.inputOptions || [];\r\n\r\n        if (!$.isArray(inputOptions)) {\r\n          throw new Error(\"Please pass an array of input options\");\r\n        }\r\n\r\n        if (!inputOptions.length) {\r\n          throw new Error(\"prompt with select requires options\");\r\n        }\r\n\r\n        each(inputOptions, function(_, option) {\r\n\r\n          // assume the element to attach to is the input...\r\n          var elem = input;\r\n\r\n          if (option.value === undefined || option.text === undefined) {\r\n            throw new Error(\"given options in wrong format\");\r\n          }\r\n\r\n          // ... but override that element if this option sits in a group\r\n\r\n          if (option.group) {\r\n            // initialise group if necessary\r\n            if (!groups[option.group]) {\r\n              groups[option.group] = $(\"<optgroup/>\").attr(\"label\", option.group);\r\n            }\r\n\r\n            elem = groups[option.group];\r\n          }\r\n\r\n          elem.append(\"<option value='\" + option.value + \"'>\" + option.text + \"</option>\");\r\n        });\r\n\r\n        each(groups, function(_, group) {\r\n          input.append(group);\r\n        });\r\n\r\n        // safe to set a select's value as per a normal input\r\n        input.val(options.value);\r\n        break;\r\n\r\n      case \"checkbox\":\r\n        var values   = $.isArray(options.value) ? options.value : [options.value];\r\n        inputOptions = options.inputOptions || [];\r\n\r\n        if (!inputOptions.length) {\r\n          throw new Error(\"prompt with checkbox requires options\");\r\n        }\r\n\r\n        if (!inputOptions[0].value || !inputOptions[0].text) {\r\n          throw new Error(\"given options in wrong format\");\r\n        }\r\n\r\n        // checkboxes have to nest within a containing element, so\r\n        // they break the rules a bit and we end up re-assigning\r\n        // our 'input' element to this container instead\r\n        input = $(\"<div/>\");\r\n\r\n        each(inputOptions, function(_, option) {\r\n          var checkbox = $(templates.inputs[options.inputType]);\r\n\r\n          checkbox.find(\"input\").attr(\"value\", option.value);\r\n          checkbox.find(\"label\").append(option.text);\r\n\r\n          // we've ensured values is an array so we can always iterate over it\r\n          each(values, function(_, value) {\r\n            if (value === option.value) {\r\n              checkbox.find(\"input\").prop(\"checked\", true);\r\n            }\r\n          });\r\n\r\n          input.append(checkbox);\r\n        });\r\n        break;\r\n    }\r\n\r\n    // @TODO provide an attributes option instead\r\n    // and simply map that as keys: vals\r\n    if (options.placeholder) {\r\n      input.attr(\"placeholder\", options.placeholder);\r\n    }\r\n\r\n    if (options.pattern) {\r\n      input.attr(\"pattern\", options.pattern);\r\n    }\r\n\r\n    if (options.maxlength) {\r\n      input.attr(\"maxlength\", options.maxlength);\r\n    }\r\n\r\n    // now place it in our form\r\n    form.append(input);\r\n\r\n    form.on(\"submit\", function(e) {\r\n      e.preventDefault();\r\n      // Fix for SammyJS (or similar JS routing library) hijacking the form post.\r\n      e.stopPropagation();\r\n      // @TODO can we actually click *the* button object instead?\r\n      // e.g. buttons.confirm.click() or similar\r\n      dialog.find(\".btn-primary\").click();\r\n    });\r\n\r\n    dialog = exports.dialog(options);\r\n\r\n    // clear the existing handler focusing the submit button...\r\n    dialog.off(\"shown.bs.modal\");\r\n\r\n    // ...and replace it with one focusing our input, if possible\r\n    dialog.on(\"shown.bs.modal\", function() {\r\n      // need the closure here since input isn't\r\n      // an object otherwise\r\n      input.focus();\r\n    });\r\n\r\n    if (shouldShow === true) {\r\n      dialog.modal(\"show\");\r\n    }\r\n\r\n    return dialog;\r\n  };\r\n\r\n  exports.dialog = function(options) {\r\n    options = sanitize(options);\r\n\r\n    var dialog = $(templates.dialog);\r\n    var innerDialog = dialog.find(\".modal-dialog\");\r\n    var body = dialog.find(\".modal-body\");\r\n    var buttons = options.buttons;\r\n    var buttonStr = \"\";\r\n    var callbacks = {\r\n      onEscape: options.onEscape\r\n    };\r\n\r\n    if ($.fn.modal === undefined) {\r\n      throw new Error(\r\n        \"$.fn.modal is not defined; please double check you have included \" +\r\n        \"the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ \" +\r\n        \"for more details.\"\r\n      );\r\n    }\r\n\r\n    each(buttons, function(key, button) {\r\n\r\n      // @TODO I don't like this string appending to itself; bit dirty. Needs reworking\r\n      // can we just build up button elements instead? slower but neater. Then button\r\n      // can just become a template too\r\n      buttonStr += \"<button data-bb-handler='\" + key + \"' type='button' class='btn \" + button.className + \"'>\" + button.label + \"</button>\";\r\n      callbacks[key] = button.callback;\r\n    });\r\n\r\n    body.find(\".bootbox-body\").html(options.message);\r\n\r\n    if (options.animate === true) {\r\n      dialog.addClass(\"fade\");\r\n    }\r\n\r\n    if (options.className) {\r\n      dialog.addClass(options.className);\r\n    }\r\n\r\n    if (options.size === \"large\") {\r\n      innerDialog.addClass(\"modal-lg\");\r\n    } else if (options.size === \"small\") {\r\n      innerDialog.addClass(\"modal-sm\");\r\n    }\r\n\r\n    if (options.title) {\r\n      body.before(templates.header);\r\n    }\r\n\r\n    if (options.closeButton) {\r\n      var closeButton = $(templates.closeButton);\r\n\r\n      if (options.title) {\r\n        dialog.find(\".modal-header\").prepend(closeButton);\r\n      } else {\r\n        closeButton.css(\"margin-top\", \"-10px\").prependTo(body);\r\n      }\r\n    }\r\n\r\n    if (options.title) {\r\n      dialog.find(\".modal-title\").html(options.title);\r\n    }\r\n\r\n    if (buttonStr.length) {\r\n      body.after(templates.footer);\r\n      dialog.find(\".modal-footer\").html(buttonStr);\r\n    }\r\n\r\n\r\n    /**\r\n     * Bootstrap event listeners; used handle extra\r\n     * setup & teardown required after the underlying\r\n     * modal has performed certain actions\r\n     */\r\n\r\n    dialog.on(\"hidden.bs.modal\", function(e) {\r\n      // ensure we don't accidentally intercept hidden events triggered\r\n      // by children of the current dialog. We shouldn't anymore now BS\r\n      // namespaces its events; but still worth doing\r\n      if (e.target === this) {\r\n        dialog.remove();\r\n      }\r\n    });\r\n\r\n    /*\r\n    dialog.on(\"show.bs.modal\", function() {\r\n      // sadly this doesn't work; show is called *just* before\r\n      // the backdrop is added so we'd need a setTimeout hack or\r\n      // otherwise... leaving in as would be nice\r\n      if (options.backdrop) {\r\n        dialog.next(\".modal-backdrop\").addClass(\"bootbox-backdrop\");\r\n      }\r\n    });\r\n    */\r\n\r\n    dialog.on(\"shown.bs.modal\", function() {\r\n      dialog.find(\".btn-primary:first\").focus();\r\n    });\r\n\r\n    /**\r\n     * Bootbox event listeners; experimental and may not last\r\n     * just an attempt to decouple some behaviours from their\r\n     * respective triggers\r\n     */\r\n\r\n    if (options.backdrop !== \"static\") {\r\n      // A boolean true/false according to the Bootstrap docs\r\n      // should show a dialog the user can dismiss by clicking on\r\n      // the background.\r\n      // We always only ever pass static/false to the actual\r\n      // $.modal function because with `true` we can't trap\r\n      // this event (the .modal-backdrop swallows it)\r\n      // However, we still want to sort of respect true\r\n      // and invoke the escape mechanism instead\r\n      dialog.on(\"click.dismiss.bs.modal\", function(e) {\r\n        // @NOTE: the target varies in >= 3.3.x releases since the modal backdrop\r\n        // moved *inside* the outer dialog rather than *alongside* it\r\n        if (dialog.children(\".modal-backdrop\").length) {\r\n          e.currentTarget = dialog.children(\".modal-backdrop\").get(0);\r\n        }\r\n\r\n        if (e.target !== e.currentTarget) {\r\n          return;\r\n        }\r\n\r\n        dialog.trigger(\"escape.close.bb\");\r\n      });\r\n    }\r\n\r\n    dialog.on(\"escape.close.bb\", function(e) {\r\n      if (callbacks.onEscape) {\r\n        processCallback(e, dialog, callbacks.onEscape);\r\n      }\r\n    });\r\n\r\n    /**\r\n     * Standard jQuery event listeners; used to handle user\r\n     * interaction with our dialog\r\n     */\r\n\r\n    dialog.on(\"click\", \".modal-footer button\", function(e) {\r\n      var callbackKey = $(this).data(\"bb-handler\");\r\n\r\n      processCallback(e, dialog, callbacks[callbackKey]);\r\n    });\r\n\r\n    dialog.on(\"click\", \".bootbox-close-button\", function(e) {\r\n      // onEscape might be falsy but that's fine; the fact is\r\n      // if the user has managed to click the close button we\r\n      // have to close the dialog, callback or not\r\n      processCallback(e, dialog, callbacks.onEscape);\r\n    });\r\n\r\n    dialog.on(\"keyup\", function(e) {\r\n      if (e.which === 27) {\r\n        dialog.trigger(\"escape.close.bb\");\r\n      }\r\n    });\r\n\r\n    // the remainder of this method simply deals with adding our\r\n    // dialogent to the DOM, augmenting it with Bootstrap's modal\r\n    // functionality and then giving the resulting object back\r\n    // to our caller\r\n\r\n    $(options.container).append(dialog);\r\n\r\n    dialog.modal({\r\n      backdrop: options.backdrop ? \"static\": false,\r\n      keyboard: false,\r\n      show: false\r\n    });\r\n\r\n    if (options.show) {\r\n      dialog.modal(\"show\");\r\n    }\r\n\r\n    // @TODO should we return the raw element here or should\r\n    // we wrap it in an object on which we can expose some neater\r\n    // methods, e.g. var d = bootbox.alert(); d.hide(); instead\r\n    // of d.modal(\"hide\");\r\n\r\n   /*\r\n    function BBDialog(elem) {\r\n      this.elem = elem;\r\n    }\r\n\r\n    BBDialog.prototype = {\r\n      hide: function() {\r\n        return this.elem.modal(\"hide\");\r\n      },\r\n      show: function() {\r\n        return this.elem.modal(\"show\");\r\n      }\r\n    };\r\n    */\r\n\r\n    return dialog;\r\n\r\n  };\r\n\r\n  exports.setDefaults = function() {\r\n    var values = {};\r\n\r\n    if (arguments.length === 2) {\r\n      // allow passing of single key/value...\r\n      values[arguments[0]] = arguments[1];\r\n    } else {\r\n      // ... and as an object too\r\n      values = arguments[0];\r\n    }\r\n\r\n    $.extend(defaults, values);\r\n  };\r\n\r\n  exports.hideAll = function() {\r\n    $(\".bootbox\").modal(\"hide\");\r\n\r\n    return exports;\r\n  };\r\n\r\n\r\n  /**\r\n   * standard locales. Please add more according to ISO 639-1 standard. Multiple language variants are\r\n   * unlikely to be required. If this gets too large it can be split out into separate JS files.\r\n   */\r\n  var locales = {\r\n    bg_BG : {\r\n      OK      : \"Ок\",\r\n      CANCEL  : \"Отказ\",\r\n      CONFIRM : \"Потвърждавам\"\r\n    },\r\n    br : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Cancelar\",\r\n      CONFIRM : \"Sim\"\r\n    },\r\n    cs : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Zrušit\",\r\n      CONFIRM : \"Potvrdit\"\r\n    },\r\n    da : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Annuller\",\r\n      CONFIRM : \"Accepter\"\r\n    },\r\n    de : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Abbrechen\",\r\n      CONFIRM : \"Akzeptieren\"\r\n    },\r\n    el : {\r\n      OK      : \"Εντάξει\",\r\n      CANCEL  : \"Ακύρωση\",\r\n      CONFIRM : \"Επιβεβαίωση\"\r\n    },\r\n    en : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Cancel\",\r\n      CONFIRM : \"OK\"\r\n    },\r\n    es : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Cancelar\",\r\n      CONFIRM : \"Aceptar\"\r\n    },\r\n    et : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Katkesta\",\r\n      CONFIRM : \"OK\"\r\n    },\r\n    fa : {\r\n      OK      : \"قبول\",\r\n      CANCEL  : \"لغو\",\r\n      CONFIRM : \"تایید\"\r\n    },\r\n    fi : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Peruuta\",\r\n      CONFIRM : \"OK\"\r\n    },\r\n    fr : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Annuler\",\r\n      CONFIRM : \"D'accord\"\r\n    },\r\n    he : {\r\n      OK      : \"אישור\",\r\n      CANCEL  : \"ביטול\",\r\n      CONFIRM : \"אישור\"\r\n    },\r\n    hu : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Mégsem\",\r\n      CONFIRM : \"Megerősít\"\r\n    },\r\n    hr : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Odustani\",\r\n      CONFIRM : \"Potvrdi\"\r\n    },\r\n    id : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Batal\",\r\n      CONFIRM : \"OK\"\r\n    },\r\n    it : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Annulla\",\r\n      CONFIRM : \"Conferma\"\r\n    },\r\n    ja : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"キャンセル\",\r\n      CONFIRM : \"確認\"\r\n    },\r\n    lt : {\r\n      OK      : \"Gerai\",\r\n      CANCEL  : \"Atšaukti\",\r\n      CONFIRM : \"Patvirtinti\"\r\n    },\r\n    lv : {\r\n      OK      : \"Labi\",\r\n      CANCEL  : \"Atcelt\",\r\n      CONFIRM : \"Apstiprināt\"\r\n    },\r\n    nl : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Annuleren\",\r\n      CONFIRM : \"Accepteren\"\r\n    },\r\n    no : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Avbryt\",\r\n      CONFIRM : \"OK\"\r\n    },\r\n    pl : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Anuluj\",\r\n      CONFIRM : \"Potwierdź\"\r\n    },\r\n    pt : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Cancelar\",\r\n      CONFIRM : \"Confirmar\"\r\n    },\r\n    ru : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Отмена\",\r\n      CONFIRM : \"Применить\"\r\n    },\r\n    sq : {\r\n      OK : \"OK\",\r\n      CANCEL : \"Anulo\",\r\n      CONFIRM : \"Prano\"\r\n    },\r\n    sv : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"Avbryt\",\r\n      CONFIRM : \"OK\"\r\n    },\r\n    th : {\r\n      OK      : \"ตกลง\",\r\n      CANCEL  : \"ยกเลิก\",\r\n      CONFIRM : \"ยืนยัน\"\r\n    },\r\n    tr : {\r\n      OK      : \"Tamam\",\r\n      CANCEL  : \"İptal\",\r\n      CONFIRM : \"Onayla\"\r\n    },\r\n    zh_CN : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"取消\",\r\n      CONFIRM : \"确认\"\r\n    },\r\n    zh_TW : {\r\n      OK      : \"OK\",\r\n      CANCEL  : \"取消\",\r\n      CONFIRM : \"確認\"\r\n    }\r\n  };\r\n\r\n  exports.addLocale = function(name, values) {\r\n    $.each([\"OK\", \"CANCEL\", \"CONFIRM\"], function(_, v) {\r\n      if (!values[v]) {\r\n        throw new Error(\"Please supply a translation for '\" + v + \"'\");\r\n      }\r\n    });\r\n\r\n    locales[name] = {\r\n      OK: values.OK,\r\n      CANCEL: values.CANCEL,\r\n      CONFIRM: values.CONFIRM\r\n    };\r\n\r\n    return exports;\r\n  };\r\n\r\n  exports.removeLocale = function(name) {\r\n    delete locales[name];\r\n\r\n    return exports;\r\n  };\r\n\r\n  exports.setLocale = function(name) {\r\n    return exports.setDefaults(\"locale\", name);\r\n  };\r\n\r\n  exports.init = function(_$) {\r\n    return init(_$ || $);\r\n  };\r\n\r\n  return exports;\r\n}));\r\n"],"sourceRoot":"/source/"}