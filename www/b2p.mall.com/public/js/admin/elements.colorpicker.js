!function(e,o){var t=function(o,t){var n=ace.helper.getAttrSettings(o,e.fn.ace_colorpicker.defaults),r=e.extend({},e.fn.ace_colorpicker.defaults,t,n),c=e(o),a="",i="",l=null,d=[];c.addClass("hide").find("option").each(function(){var e="colorpick-btn",o=this.value.replace(/[^\w\s,#\(\)\.]/g,"");o.indexOf("number")>=0||(this.value!=o&&(this.value=o),this.selected&&(e+=" selected",i=o),d.push(o),a+='<li><a class="'+e+'" style="background-color:'+o+';" data-color="'+o+'"></a></li>')}).end().on("change.color",function(){c.next().find(".btn-colorpicker").css("background-color",this.value)}).after('<div class="dropdown dropdown-colorpicker">\t\t<a data-toggle="dropdown" class="dropdown-toggle" '+(r.auto_pos?'data-position="auto"':"")+'><span class="btn-colorpicker" style="background-color:'+i+'"></span></a><ul class="dropdown-menu'+(r.caret?" dropdown-caret":"")+(r.pull_right?" dropdown-menu-right":"")+'">'+a+"</ul></div>");var s=c.next().find(".dropdown-menu");s.on(ace.click_event,function(o,t){var n=e(o.target);if(!n.is(".colorpick-btn"))return!1;l&&l.removeClass("selected"),l=n,l.addClass("selected");var r=l.data("color");return t!==!0&&c.val(r).trigger("change"),c.next().find(".btn-colorpicker").css("background-color",r),o.preventDefault(),!0}),l=c.next().find("a.selected"),this.pick=function(t,n){if("number"==typeof t){if(t>=d.length)return;o.selectedIndex=t,s.find("a:eq("+t+")").trigger(ace.click_event,[!0])}else if("string"==typeof t){var r=t.replace(/[^\w\s,#\(\)\.]/g,"");if(t=d.indexOf(r),t==-1&&n===!0&&(d.push(r),e("<option />").appendTo(c).val(r),e('<li><a class="colorpick-btn"></a></li>').appendTo(s).find("a").css("background-color",r).data("color",r),t=d.length-1),t==-1)return;s.find("a:eq("+t+")").trigger(ace.click_event,[!0])}},this.destroy=function(){c.removeClass("hide").next().remove(),d=[]}};e.fn.ace_colorpicker=function(n,r){var c,a=this.each(function(){var o=e(this),a=o.data("ace_colorpicker"),i="object"==typeof n&&n;a||o.data("ace_colorpicker",a=new t(this,i)),"string"==typeof n&&(c=a[n](r))});return c===o?a:c},e.fn.ace_colorpicker.defaults={pull_right:!1,caret:!0,auto_pos:!0}}(window.jQuery);