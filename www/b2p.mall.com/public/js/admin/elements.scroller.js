!function(e,t){var s=function(t,s){function l(e){e.preventDefault(),e.stopPropagation();var t=z.offset(),s=t[v],l=w?e.pageY:e.pageX;l>s+P?(P=l-s-E+Y,P>T&&(P=T)):(P=l-s-Y,P<0&&(P=0)),d.update_scroll()}function o(t){t.preventDefault(),t.stopPropagation(),te=ee=w?t.pageY:t.pageX,j=!0,e("html").off("mousemove.ace_scroll").on("mousemove.ace_scroll",n),e(F).off("mouseup.ace_scroll").on("mouseup.ace_scroll",i),z.addClass("active"),R&&d.$element.trigger("drag.start")}function n(e){e.preventDefault(),e.stopPropagation(),te=w?e.pageY:e.pageX,te-ee+P>T?te=ee+T-P:te-ee+P<0&&(te=ee-P),P+=te-ee,ee=te,P<0?P=0:P>T&&(P=T),d.update_scroll()}function i(t){t.preventDefault(),t.stopPropagation(),j=!1,e("html").off(".ace_scroll"),e(F).off(".ace_scroll"),z.removeClass("active"),R&&d.$element.trigger("drag.end"),b&&J&&!N&&r()}function a(e){var t=+new Date;if(U&&t-le>1e3){var s=$[y];V!=s&&(V=s,Z=!0,d.reset(!0)),le=t}b&&J&&(null!=se&&(clearTimeout(se),se=null),z.addClass("not-idle"),N||1!=e||r())}function r(){null!=se&&(clearTimeout(se),se=null),se=setTimeout(function(){se=null,z.removeClass("not-idle")},K)}function c(){z.css("visibility","hidden").addClass("scroll-hover"),q=w?parseInt(z.outerWidth())||0:parseInt(z.outerHeight())||0,z.css("visibility","").removeClass("scroll-hover")}function h(){if(G!==!1){var e=I.offset(),t=e.left,s=e.top;w?O||(t+=I.outerWidth()-q):O||(s+=I.outerHeight()-q),G===!0?z.css({top:parseInt(s),left:parseInt(t)}):"left"===G?z.css("left",parseInt(t)):"top"===G&&z.css("top",parseInt(s))}}var d=this,u=ace.helper.getAttrSettings(t,e.fn.ace_scroll.defaults),f=e.extend({},e.fn.ace_scroll.defaults,s,u);this.size=0,this.lock=!1,this.lock_anyway=!1,this.$element=e(t),this.element=t;var v,p,m,_,g,y,w=!0,C=!1,b=!1,k=!1,I=null,$=null,z=null,x=null,D=null,W=null,M=null,E=0,P=0,T=0,Y=0,H=!0,A=!1,L="",O=!1,q=0,S=1,X=!1,j=!1,F="onmouseup"in window?window:"html",R=f.dragEvent||!1,Q=s.scrollEvent||!1,B=f.detached||!1,G=f.updatePos||!1,J=f.hideOnIdle||!1,K=f.hideDelay||1500,N=!1,U=f.observeContent||!1,V=0,Z=!0;this.ref=function(){return this},this.create=function(t){if(!k){t&&(f=e.extend({},e.fn.ace_scroll.defaults,t)),this.size=parseInt(this.$element.attr("data-size"))||f.size||200,w=!f.horizontal,v=w?"top":"left",p=w?"height":"width",m=w?"maxHeight":"maxWidth",_=w?"clientHeight":"clientWidth",g=w?"scrollTop":"scrollLeft",y=w?"scrollHeight":"scrollWidth",this.$element.addClass("ace-scroll"),"static"==this.$element.css("position")?(X=this.element.style.position,this.element.style.position="relative"):X=!1;var s=null;B?s=e('<div class="scroll-track scroll-detached"><div class="scroll-bar"></div></div>').appendTo("body"):(this.$element.wrapInner('<div class="scroll-content" />'),this.$element.prepend('<div class="scroll-track"><div class="scroll-bar"></div></div>')),I=this.$element,B||(I=this.$element.find(".scroll-content").eq(0)),w||I.wrapInner("<div />"),$=I.get(0),B?(z=s,h()):z=this.$element.find(".scroll-track").eq(0),x=z.find(".scroll-bar").eq(0),D=z.get(0),W=x.get(0),M=W.style,w||z.addClass("scroll-hz"),f.styleClass&&(L=f.styleClass,z.addClass(L),O=!!L.match(/scroll\-left|scroll\-top/)),0==q&&(z.show(),c()),z.hide(),z.on("mousedown",l),x.on("mousedown",o),I.on("scroll",function(){H&&(P=parseInt(Math.round(this[g]*S)),M[v]=P+"px"),H=!1,Q&&this.$element.trigger("scroll",[$])}),f.mouseWheel&&(this.lock=f.mouseWheelLock,this.lock_anyway=f.lockAnyway,this.$element.on(e.event.special.mousewheel?"mousewheel.ace_scroll":"mousewheel.ace_scroll DOMMouseScroll.ace_scroll",function(t){if(!C){if(a(!0),!b)return!d.lock_anyway;j&&(j=!1,e("html").off(".ace_scroll"),e(F).off(".ace_scroll"),R&&d.$element.trigger("drag.end")),t.deltaY=t.deltaY||0;var s=t.deltaY>0||t.originalEvent.detail<0||t.originalEvent.wheelDelta>0?1:-1,l=!1,o=$[_],n=$[g];d.lock||(l=s==-1?$[y]<=n+o:0==n),d.move_bar(!0);var i=parseInt(o/8);return i<80&&(i=80),i>d.size&&(i=d.size),i+=1,$[g]=n-s*i,l&&!d.lock_anyway}}));var n=ace.vars.touch&&"ace_drag"in e.event.special&&f.touchDrag;if(n){var i="",u=n?"ace_drag":"swipe";this.$element.on(u+".ace_scroll",function(e){if(C)return void(e.retval.cancel=!0);if(a(!0),!b)return void(e.retval.cancel=this.lock_anyway);if(i=e.direction,w&&("up"==i||"down"==i)||!w&&("left"==i||"right"==i)){var t=w?e.dy:e.dx;0!=t&&(Math.abs(t)>20&&n&&(t=2*t),d.move_bar(!0),$[g]=$[g]+t)}})}J&&z.addClass("idle-hide"),U&&z.on("mouseenter.ace_scroll",function(){N=!0,a(!1)}).on("mouseleave.ace_scroll",function(){N=!1,0==j&&r()}),this.$element.on("mouseenter.ace_scroll touchstart.ace_scroll",function(e){Z=!0,U?a(!0):f.hoverReset&&d.reset(!0),z.addClass("scroll-hover")}).on("mouseleave.ace_scroll touchend.ace_scroll",function(){z.removeClass("scroll-hover")}),w||I.children(0).css(p,this.size),I.css(m,this.size),C=!1,k=!0}},this.is_active=function(){return b},this.is_enabled=function(){return!C},this.move_bar=function(e){H=e},this.get_track=function(){return D},this.reset=function(e){if(!C){k||this.create();var t=this.size;if(!e||Z){if(Z=!1,B){var s=parseInt(Math.round((parseInt(I.css("border-top-width"))+parseInt(I.css("border-bottom-width")))/2.5));t-=s}var l=w?$[y]:t;if(w&&0==l||!w&&0==this.element.scrollWidth)return void z.removeClass("scroll-active");var o=w?t:$.clientWidth;w||I.children(0).css(p,t),I.css(m,this.size),l>o?(b=!0,z.css(p,o).show(),S=parseFloat((o/l).toFixed(5)),E=parseInt(Math.round(o*S)),Y=parseInt(Math.round(E/2)),T=o-E,P=parseInt(Math.round($[g]*S)),M[p]=E+"px",M[v]=P+"px",z.addClass("scroll-active"),0==q&&c(),A||(f.reset&&($[g]=0,M[v]=0),A=!0),B&&h()):(b=!1,z.hide(),z.removeClass("scroll-active"),I.css(m,""))}}},this.disable=function(){$[g]=0,M[v]=0,C=!0,b=!1,z.hide(),this.$element.addClass("scroll-disabled"),z.removeClass("scroll-active"),I.css(m,"")},this.enable=function(){C=!1,this.$element.removeClass("scroll-disabled")},this.destroy=function(){b=!1,C=!1,k=!1,this.$element.removeClass("ace-scroll scroll-disabled scroll-active"),this.$element.off(".ace_scroll"),B||(w||I.find("> div").children().unwrap(),I.children().unwrap(),I.remove()),z.remove(),X!==!1&&(this.element.style.position=X),null!=se&&(clearTimeout(se),se=null)},this.modify=function(t){t&&(f=e.extend({},f,t)),this.destroy(),this.create(),Z=!0,this.reset(!0)},this.update=function(t){t&&(f=e.extend({},f,t)),this.size=f.size||this.size,this.lock=f.mouseWheelLock||this.lock,this.lock_anyway=f.lockAnyway||this.lock_anyway,J=f.hideOnIdle||J,K=f.hideDelay||K,U=f.observeContent||!1,R=f.dragEvent||!1,"undefined"!=typeof t.styleClass&&(L&&z.removeClass(L),L=t.styleClass,L&&z.addClass(L),O=!!L.match(/scroll\-left|scroll\-top/))},this.start=function(){$[g]=0},this.end=function(){$[g]=$[y]},this.hide=function(){z.hide()},this.show=function(){z.show()},this.update_scroll=function(){H=!1,M[v]=P+"px",$[g]=parseInt(Math.round(P/S))};var ee=-1,te=-1,se=null,le=0;return this.track_size=function(){return 0==q&&c(),q},this.create(),Z=!0,this.reset(!0),V=$[y],this};e.fn.ace_scroll=function(l,o){var n,i=this.each(function(){var t=e(this),i=t.data("ace_scroll"),a="object"==typeof l&&l;i||t.data("ace_scroll",i=new s(this,a)),"string"==typeof l&&(n=i[l](o))});return n===t?i:n},e.fn.ace_scroll.defaults={size:200,horizontal:!1,mouseWheel:!0,mouseWheelLock:!1,lockAnyway:!1,styleClass:!1,observeContent:!1,hideOnIdle:!1,hideDelay:1500,hoverReset:!0,reset:!1,dragEvent:!1,touchDrag:!0,touchSwipe:!1,scrollEvent:!1,detached:!1,updatePos:!0}}(window.jQuery);