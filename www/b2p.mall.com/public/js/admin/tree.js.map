{"version":3,"sources":["tree.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"tree.js","sourcesContent":["/*\n * Fuel UX Tree\n * https://github.com/ExactTarget/fuelux\n *\n * Copyright (c) 2014 ExactTarget\n * Licensed under the BSD New license.\n */\n\n// -- BEGIN UMD WRAPPER PREFACE --\n\n// For more information on UMD visit:\n// https://github.com/umdjs/umd/blob/master/jqueryPlugin.js\n\n(function (factory) {\n\tif (typeof define === 'function' && define.amd) {\n\t\t// if AMD loader is available, register as an anonymous module.\n\t\tdefine(['jquery'], factory);\n\t} else if (typeof exports === 'object') {\n\t\t// Node/CommonJS\n\t\tmodule.exports = factory(require('jquery'));\n\t} else {\n\t\t// OR use browser globals if AMD is not present\n\t\tfactory(jQuery);\n\t}\n}(function ($) {\n\t// -- END UMD WRAPPER PREFACE --\n\n\t// -- BEGIN MODULE CODE HERE --\n\n\tvar old = $.fn.tree;\n\n\t// TREE CONSTRUCTOR AND PROTOTYPE\n\n\tvar Tree = function Tree(element, options) {\n\t\tthis.$element = $(element);\n\t\tthis.options = $.extend({}, $.fn.tree.defaults, options);\n\n\t\tif (this.options.itemSelect) {\n\t\t\tthis.$element.on('click.fu.tree', '.tree-item', $.proxy(function (ev) {\n\t\t\t\tthis.selectItem(ev.currentTarget);\n\t\t\t}, this));\n\t\t}\n\n\t\t//ACE\n\t\tthis.$element.on('click.fu.tree', '.tree-branch-header', $.proxy(function (ev) {\n\t\t\tif (!this.options.folderSelect) this.toggleFolder(ev.currentTarget);\n\t\t\t\n\t\t}, this));\n\n\t\tthis.$element.on('click.fu.tree', '.tree-overflow', $.proxy(function (ev){\n\t\t\tthis.populate($(ev.currentTarget));\n\t\t}, this));\n\t\t\n\t\t\n\n\t\t// folderSelect default is true\n\t\tif (this.options.folderSelect) {\n\t\t\tthis.$element.addClass('tree-folder-select');\n\t\t\tthis.$element.off('click.fu.tree', '.tree-branch-name');\n\t\t\tthis.$element.on('click.fu.tree', '.icon-caret', $.proxy(function (ev) {\n\t\t\t\tthis.toggleFolder($(ev.currentTarget).next());//ACE\n\t\t\t}, this));\n\t\t\tthis.$element.on('click.fu.tree', '.tree-branch-header', $.proxy(function (ev) {\n\t\t\t\tthis.selectFolder($(ev.currentTarget));\n\t\t\t}, this));\n\t\t}\n\n\t\tthis.render();\n\t};\n\n\tTree.prototype = {\n\t\tconstructor: Tree,\n\n\t\tdeselectAll: function deselectAll(nodes) {\n\t\t\t// clear all child tree nodes and style as deselected\n\t\t\tnodes = nodes || this.$element;\n\t\t\tvar $selectedElements = $(nodes).find('.tree-selected');\n\t\t\tvar that = this;//ACE\n\t\t\t$selectedElements.each(function (index, element) {\n\t\t\t\t//styleNodeDeselected( $(element), $(element).find( '.glyphicon' ) );\n\t\t\t\tstyleNodeDeselected( that, $(element), $(element).find('.'+$.trim(that.options['base-icon']).replace(/(\\s+)/g, '.')) );//ACE\n\t\t\t});\n\t\t\treturn $selectedElements;\n\t\t},\n\n\t\tdestroy: function destroy() {\n\t\t\t// any external bindings [none]\n\t\t\t// empty elements to return to original markup\n\t\t\tthis.$element.find(\"li:not([data-template])\").remove();\n\n\t\t\tthis.$element.remove();\n\t\t\t// returns string of markup\n\t\t\treturn this.$element[0].outerHTML;\n\t\t},\n\n\t\trender: function render() {\n\t\t\tthis.populate(this.$element);\n\t\t},\n\n\t\tpopulate: function populate($el, isBackgroundProcess) {\n\t\t\tvar self = this;\n\n\t\t\t// populate was initiated based on clicking overflow link\n\t\t\tvar isOverflow = $el.hasClass('tree-overflow');\n\n\t\t\tvar $parent = ($el.hasClass('tree')) ? $el : $el.parent();\n\t\t\tvar atRoot = $parent.hasClass('tree');\n\n\t\t\tif(isOverflow && !atRoot){\n\t\t\t\t$parent = $parent.parent();\n\t\t\t}\n\n\t\t\tvar treeData = $parent.data();\n\t\t\t// expose overflow data to datasource so it can be responded to appropriately.\n\t\t\tif(isOverflow){\n\t\t\t\ttreeData.overflow = $el.data();\n\t\t\t}\n\n\t\t\tisBackgroundProcess = isBackgroundProcess || false;\t// no user affordance needed (ex.- \"loading\")\n\n\t\t\tif(isOverflow){\n\t\t\t\tif(atRoot){\n\t\t\t\t\t// the loader at the root level needs to continually replace the overflow trigger\n\t\t\t\t\t// otherwise, when loader is shown below, it will be the loader for the last folder\n\t\t\t\t\t// in the tree, instead of the loader at the root level.\n\t\t\t\t\t$el.replaceWith($parent.find('> .tree-loader').remove());\n\t\t\t\t}else{\n\t\t\t\t\t$el.remove();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tvar $loader = $parent.find('.tree-loader:last');\n\n\t\t\tif (isBackgroundProcess === false) {\n\t\t\t\t$loader.removeClass('hide hidden'); // jQuery deprecated hide in 3.0. Use hidden instead. Leaving hide here to support previous markup\n\t\t\t}\n\n\n\t\t\tthis.options.dataSource(treeData ? treeData : {}, function (items) {\n\t\t\t\t$.each(items.data, function (index, value) {\n\t\t\t\t\tvar $entity;\n\n\t\t\t\t\tif (value.type === 'folder') {\n\t\t\t\t\t\t$entity = self.$element.find('[data-template=treebranch]:eq(0)').clone().removeClass('hide hidden').removeData('template').removeAttr('data-template'); // jQuery deprecated hide in 3.0. Use hidden instead. Leaving hide here to support previous markup\n\t\t\t\t\t\t$entity.data(value);\n\t\t\t\t\t\t$entity.find('.tree-branch-name > .tree-label').html(value.text || value.name);\n\t\t\t\t\t\t\n\t\t\t\t\t\t//ACE\n\t\t\t\t\t\tvar header = $entity.find('.tree-branch-header');\n\n\t\t\t\t\t\tif('icon-class' in value)\n\t\t\t\t\t\t\theader.find('i').addClass(value['icon-class']);\n\t\t\t\t\t\t\n\t\t\t\t\t\tif('additionalParameters' in value\n\t\t\t\t\t\t\t&& 'item-selected' in value.additionalParameters \n\t\t\t\t\t\t\t\t&& value.additionalParameters['item-selected'] == true) {\n\t\t\t\t\t\t\t\tsetTimeout(function(){header.trigger('click')}, 0);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t} else if (value.type === 'item') {\n\t\t\t\t\t\t$entity = self.$element.find('[data-template=treeitem]:eq(0)').clone().removeClass('hide hidden').removeData('template').removeAttr('data-template'); // jQuery deprecated hide in 3.0. Use hidden instead. Leaving hide here to support previous markup\n\t\t\t\t\t\t$entity.find('.tree-item-name > .tree-label').html(value.text || value.name);\n\t\t\t\t\t\t$entity.data(value);\n\t\t\t\t\t\t\n\t\t\t\t\t\t//ACE\n\t\t\t\t\t\tif('additionalParameters' in value\n\t\t\t\t\t\t\t&& 'item-selected' in value.additionalParameters \n\t\t\t\t\t\t\t\t&& value.additionalParameters['item-selected'] == true) {\n\t\t\t\t\t\t\t\t$entity.addClass ('tree-selected');\n\t\t\t\t\t\t\t\t$entity.find('i').removeClass(self.options['unselected-icon']).addClass(self.options['selected-icon']);\n\t\t\t\t\t\t\t\t//$entity.closest('.tree-folder-content').show();\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (value.type === 'overflow') {\n\t\t\t\t\t\t$entity = self.$element.find('[data-template=treeoverflow]:eq(0)').clone().removeClass('hide hidden').removeData('template').removeAttr('data-template'); // jQuery deprecated hide in 3.0. Use hidden instead. Leaving hide here to support previous markup\n\t\t\t\t\t\t$entity.find('.tree-overflow-name > .tree-label').html(value.text || value.name);\n\t\t\t\t\t\t$entity.data(value);\n\t\t\t\t\t}\n\n\t\t\t\t\t// Decorate $entity with data or other attributes making the\n\t\t\t\t\t// element easily accessable with libraries like jQuery.\n\t\t\t\t\t//\n\t\t\t\t\t// Values are contained within the object returned\n\t\t\t\t\t// for folders and items as attr:\n\t\t\t\t\t//\n\t\t\t\t\t// {\n\t\t\t\t\t//     text: \"An Item\",\n\t\t\t\t\t//     type: 'item',\n\t\t\t\t\t//     attr = {\n\t\t\t\t\t//         'classes': 'required-item red-text',\n\t\t\t\t\t//         'data-parent': parentId,\n\t\t\t\t\t//         'guid': guid,\n\t\t\t\t\t//         'id': guid\n\t\t\t\t\t//     }\n\t\t\t\t\t// };\n\t\t\t\t\t//\n\t\t\t\t\t// the \"name\" attribute is also supported but is deprecated for \"text\".\n\n\t\t\t\t\t// add attributes to tree-branch or tree-item\n\t\t\t\t\tvar attr = value.attr || value.dataAttributes || [];\n\t\t\t\t\t$.each(attr, function (key, value) {\n\t\t\t\t\t\tswitch (key) {\n\t\t\t\t\t\t\tcase 'cssClass':\n\t\t\t\t\t\t\tcase 'class':\n\t\t\t\t\t\t\tcase 'className':\n\t\t\t\t\t\t\t\t$entity.addClass(value);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t// allow custom icons\n\t\t\t\t\t\t\tcase 'data-icon':\n\t\t\t\t\t\t\t\t$entity.find('.icon-item').removeClass().addClass('icon-item ' + value);\n\t\t\t\t\t\t\t\t$entity.attr(key, value);\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t// ARIA support\n\t\t\t\t\t\t\tcase 'id':\n\t\t\t\t\t\t\t\t$entity.attr(key, value);\n\t\t\t\t\t\t\t\t$entity.attr('aria-labelledby', value + '-label');\n\t\t\t\t\t\t\t\t$entity.find('.tree-branch-name > .tree-label').attr('id', value + '-label');\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t// style, data-*\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t$entity.attr(key, value);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t// add child node\n\t\t\t\t\tif (atRoot) {\n\t\t\t\t\t\t$parent.append($entity);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$parent.find('.tree-branch-children:eq(0)').append($entity);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$parent.find('.tree-loader').addClass('hidden');\n\n\t\t\t\t// return newly populated folder\n\t\t\t\tself.$element.trigger('loaded.fu.tree', $parent);\n\t\t\t});\n\t\t},\n\n\t\tselectTreeNode: function selectItem(clickedElement, nodeType) {\n\t\t\tvar clicked = {};\t// object for clicked element\n\t\t\tclicked.$element = $(clickedElement);\n\n\t\t\tvar selected = {}; // object for selected elements\n\t\t\tselected.$elements = this.$element.find('.tree-selected');\n\t\t\tselected.dataForEvent = [];\n\n\t\t\t// determine clicked element and it's icon\n\t\t\tif (nodeType === 'folder') {\n\t\t\t\t// make the clicked.$element the container branch\n\t\t\t\tclicked.$element = clicked.$element.closest('.tree-branch');\n\t\t\t\tclicked.$icon = clicked.$element.find('.icon-folder');\n\t\t\t}\n\t\t\telse {\n\t\t\t\tclicked.$icon = clicked.$element.find('.icon-item');\n\t\t\t}\n\t\t\tclicked.elementData = clicked.$element.data();\n\n\t\t\t// the below functions pass objects by copy/reference and use modified object in this function\n\t\t\tif ( this.options.multiSelect ) {\n\t\t\t\tmultiSelectSyncNodes(this, clicked, selected);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tsingleSelectSyncNodes(this, clicked, selected);\n\t\t\t}\n\n\t\t\t// all done with the DOM, now fire events\n\t\t\tthis.$element.trigger(selected.eventType + '.fu.tree', {\n\t\t\t\ttarget: clicked.elementData,\n\t\t\t\tselected: selected.dataForEvent\n\t\t\t});\n\n\t\t\tclicked.$element.trigger('updated.fu.tree', {\n\t\t\t\tselected: selected.dataForEvent,\n\t\t\t\titem: clicked.$element,\n\t\t\t\teventType: selected.eventType\n\t\t\t});\n\t\t},\n\n\t\tdiscloseFolder: function discloseFolder(el) {\n\t\t\tvar $el = $(el);\n\n\t\t\tvar $branch = $el.closest('.tree-branch');\n\t\t\tvar $treeFolderContent = $branch.find('.tree-branch-children');\n\t\t\tvar $treeFolderContentFirstChild = $treeFolderContent.eq(0);\n\n\t\t\t//take care of the styles\n\t\t\t$branch.addClass('tree-open');\n\t\t\t$branch.attr('aria-expanded', 'true');\n\t\t\t$treeFolderContentFirstChild.removeClass('hide hidden'); // jQuery deprecated hide in 3.0. Use hidden instead. Leaving hide here to support previous markup\n\t\t\t$branch.find('> .tree-branch-header .icon-folder').eq(0)\n\t\t\t\t//.removeClass('glyphicon-folder-close')\n\t\t\t\t//.addClass('glyphicon-folder-open');\n\t\t\t\t.removeClass(this.options['close-icon']).addClass(this.options['open-icon']);//ACE\n\t\t\t\t\n\t\t\t$branch.find('> .icon-caret').eq(0)\n\t\t\t\t.removeClass(this.options['folder-open-icon']).addClass(this.options['folder-close-icon']);//ACE\n\n\t\t\t//add the children to the folder\n\t\t\tif (!$treeFolderContent.children().length) {\n\t\t\t\tthis.populate($treeFolderContent);\n\t\t\t}\n\n\t\t\tthis.$element.trigger('disclosedFolder.fu.tree', $branch.data());\n\t\t},\n\n\t\tcloseFolder: function closeFolder(el) {\n\t\t\tvar $el = $(el);\n\t\t\tvar $branch = $el.closest('.tree-branch');\n\t\t\tvar $treeFolderContent = $branch.find('.tree-branch-children');\n\t\t\tvar $treeFolderContentFirstChild = $treeFolderContent.eq(0);\n\n\t\t\t//take care of the styles\n\t\t\t$branch.removeClass('tree-open');\n\t\t\t$branch.attr('aria-expanded', 'false');\n\t\t\t$treeFolderContentFirstChild.addClass('hidden');\n\t\t\t$branch.find('> .tree-branch-header .icon-folder').eq(0)\n\t\t\t\t//.removeClass('glyphicon-folder-open')\n\t\t\t\t//.addClass('glyphicon-folder-close');\n\t\t\t\t.removeClass(this.options['open-icon']).addClass(this.options['close-icon']);//ACE\n\t\t\t\t\n\t\t\t$branch.find('> .icon-caret').eq(0)\n\t\t\t\t.removeClass(this.options['folder-close-icon']).addClass(this.options['folder-open-icon']);//ACE\n\n\t\t\t// remove chidren if no cache\n\t\t\tif (!this.options.cacheItems) {\n\t\t\t\t$treeFolderContentFirstChild.empty();\n\t\t\t}\n\n\t\t\tthis.$element.trigger('closed.fu.tree', $branch.data());\n\t\t},\n\n\t\ttoggleFolder: function toggleFolder(el) {\n\t\t\tvar $el = $(el);\n\t\t\t\n\t\t\t/**\n\t\t\tif ($el.find('.glyphicon-folder-close').length) {\n\t\t\t\tthis.discloseFolder(el);\n\t\t\t} else if ($el.find('.glyphicon-folder-open').length) {\n\t\t\t\tthis.closeFolder(el);\n\t\t\t}\n\t\t\t*/\n\t\t\t\n\t\t\t\n\t\t\tif ($el.find('.'+$.trim(this.options['close-icon']).replace(/(\\s+)/g, '.')).length) {//ACE\n\t\t\t\tthis.discloseFolder(el);\n\t\t\t} else if($el.find('.'+$.trim(this.options['open-icon']).replace(/(\\s+)/g, '.')).length) {//ACE\n\t\t\t\tthis.closeFolder(el);\n\t\t\t}\n\t\t},\n\n\t\tselectFolder: function selectFolder(el) {\n\t\t\tif (this.options.folderSelect) {\n\t\t\t\tthis.selectTreeNode(el, 'folder');\n\t\t\t}\n\t\t},\n\n\t\tselectItem: function selectItem(el) {\n\t\t\tif (this.options.itemSelect) {\n\t\t\t\tthis.selectTreeNode(el, 'item');\n\t\t\t}\n\t\t},\n\n\t\tselectedItems: function selectedItems() {\n\t\t\tvar $sel = this.$element.find('.tree-selected');\n\t\t\tvar data = [];\n\n\t\t\t$.each($sel, function (index, value) {\n\t\t\t\tdata.push($(value).data());\n\t\t\t});\n\t\t\treturn data;\n\t\t},\n\n\t\t// collapses open folders\n\t\tcollapse: function collapse() {\n\t\t\tvar self = this;\n\t\t\tvar reportedClosed = [];\n\n\t\t\tvar closedReported = function closedReported(event, closed) {\n\t\t\t\treportedClosed.push(closed);\n\n\t\t\t\t// jQuery deprecated hide in 3.0. Use hidden instead. Leaving hide here to support previous markup\n\t\t\t\tif (self.$element.find(\".tree-branch.tree-open:not('.hidden, .hide')\").length === 0) {\n\t\t\t\t\tself.$element.trigger('closedAll.fu.tree', {\n\t\t\t\t\t\ttree: self.$element,\n\t\t\t\t\t\treportedClosed: reportedClosed\n\t\t\t\t\t});\n\t\t\t\t\tself.$element.off('loaded.fu.tree', self.$element, closedReported);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t//trigger callback when all folders have reported closed\n\t\t\tself.$element.on('closed.fu.tree', closedReported);\n\n\t\t\tself.$element.find(\".tree-branch.tree-open:not('.hidden, .hide')\").each(function () {\n\t\t\t\tself.closeFolder(this);\n\t\t\t});\n\t\t},\n\n\t\t//disclose visible will only disclose visible tree folders\n\t\tdiscloseVisible: function discloseVisible() {\n\t\t\tvar self = this;\n\n\t\t\tvar $openableFolders = self.$element.find(\".tree-branch:not('.tree-open, .hidden, .hide')\");\n\t\t\tvar reportedOpened = [];\n\n\t\t\tvar openReported = function openReported(event, opened) {\n\t\t\t\treportedOpened.push(opened);\n\n\t\t\t\tif (reportedOpened.length === $openableFolders.length) {\n\t\t\t\t\tself.$element.trigger('disclosedVisible.fu.tree', {\n\t\t\t\t\t\ttree: self.$element,\n\t\t\t\t\t\treportedOpened: reportedOpened\n\t\t\t\t\t});\n\t\t\t\t\t/*\n\t\t\t\t\t* Unbind the `openReported` event. `discloseAll` may be running and we want to reset this\n\t\t\t\t\t* method for the next iteration.\n\t\t\t\t\t*/\n\t\t\t\t\tself.$element.off('loaded.fu.tree', self.$element, openReported);\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t//trigger callback when all folders have reported opened\n\t\t\tself.$element.on('loaded.fu.tree', openReported);\n\n\t\t\t// open all visible folders\n\t\t\tself.$element.find(\".tree-branch:not('.tree-open, .hidden, .hide')\").each(function triggerOpen() {\n\t\t\t\tself.discloseFolder($(this).find('.tree-branch-header'));\n\t\t\t});\n\t\t},\n\n\t\t/**\n\t\t* Disclose all will keep listening for `loaded.fu.tree` and if `$(tree-el).data('ignore-disclosures-limit')`\n\t\t* is `true` (defaults to `true`) it will attempt to disclose any new closed folders than were\n\t\t* loaded in during the last disclosure.\n\t\t*/\n\t\tdiscloseAll: function discloseAll() {\n\t\t\tvar self = this;\n\n\t\t\t//first time\n\t\t\tif (typeof self.$element.data('disclosures') === 'undefined') {\n\t\t\t\tself.$element.data('disclosures', 0);\n\t\t\t}\n\n\t\t\tvar isExceededLimit = (self.options.disclosuresUpperLimit >= 1 && self.$element.data('disclosures') >= self.options.disclosuresUpperLimit);\n\t\t\tvar isAllDisclosed = self.$element.find(\".tree-branch:not('.tree-open, .hidden, .hide')\").length === 0;\n\n\n\t\t\tif (!isAllDisclosed) {\n\t\t\t\tif (isExceededLimit) {\n\t\t\t\t\tself.$element.trigger('exceededDisclosuresLimit.fu.tree', {\n\t\t\t\t\t\ttree: self.$element,\n\t\t\t\t\t\tdisclosures: self.$element.data('disclosures')\n\t\t\t\t\t});\n\n\t\t\t\t\t/*\n\t\t\t\t\t* If you've exceeded the limit, the loop will be killed unless you\n\t\t\t\t\t* explicitly ignore the limit and start the loop again:\n\t\t\t\t\t*\n\t\t\t\t\t*    $tree.one('exceededDisclosuresLimit.fu.tree', function () {\n\t\t\t\t\t*        $tree.data('ignore-disclosures-limit', true);\n\t\t\t\t\t*        $tree.tree('discloseAll');\n\t\t\t\t\t*    });\n\t\t\t\t\t*/\n\t\t\t\t\tif (!self.$element.data('ignore-disclosures-limit')) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tself.$element.data('disclosures', self.$element.data('disclosures') + 1);\n\n\t\t\t\t/*\n\t\t\t\t* A new branch that is closed might be loaded in, make sure those get handled too.\n\t\t\t\t* This attachment needs to occur before calling `discloseVisible` to make sure that\n\t\t\t\t* if the execution of `discloseVisible` happens _super fast_ (as it does in our QUnit tests\n\t\t\t\t* this will still be called. However, make sure this only gets called _once_, because\n\t\t\t\t* otherwise, every single time we go through this loop, _another_ event will be bound\n\t\t\t\t* and then when the trigger happens, this will fire N times, where N equals the number\n\t\t\t\t* of recursive `discloseAll` executions (instead of just one)\n\t\t\t\t*/\n\t\t\t\tself.$element.one('disclosedVisible.fu.tree', function () {\n\t\t\t\t\tself.discloseAll();\n\t\t\t\t});\n\n\t\t\t\t/*\n\t\t\t\t* If the page is very fast, calling this first will cause `disclosedVisible.fu.tree` to not\n\t\t\t\t* be bound in time to be called, so, we need to call this last so that the things bound\n\t\t\t\t* and triggered above can have time to take place before the next execution of the\n\t\t\t\t* `discloseAll` method.\n\t\t\t\t*/\n\t\t\t\tself.discloseVisible();\n\t\t\t} else {\n\t\t\t\tself.$element.trigger('disclosedAll.fu.tree', {\n\t\t\t\t\ttree: self.$element,\n\t\t\t\t\tdisclosures: self.$element.data('disclosures')\n\t\t\t\t});\n\n\t\t\t\t//if `cacheItems` is false, and they call closeAll, the data is trashed and therefore\n\t\t\t\t//disclosures needs to accurately reflect that\n\t\t\t\tif (!self.options.cacheItems) {\n\t\t\t\t\tself.$element.one('closeAll.fu.tree', function () {\n\t\t\t\t\t\tself.$element.data('disclosures', 0);\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t}\n\t\t},\n\n\t\t// This refreshes the children of a folder. Please destroy and re-initilize for \"root level\" refresh.\n\t\t// The data of the refreshed folder is not updated. This control's architecture only allows updating of children.\n\t\t// Folder renames should probably be handled directly on the node.\n\t\trefreshFolder: function refreshFolder($el) {\n\t\t\tvar $treeFolder = $el.closest('.tree-branch');\n\t\t\tvar $treeFolderChildren = $treeFolder.find('.tree-branch-children');\n\t\t\t$treeFolderChildren.eq(0).empty();\n\n\t\t\tif ($treeFolder.hasClass('tree-open')) {\n\t\t\t\tthis.populate($treeFolderChildren, false);\n\t\t\t}\n\t\t\telse {\n\t\t\t\tthis.populate($treeFolderChildren, true);\n\t\t\t}\n\n\t\t\tthis.$element.trigger('refreshedFolder.fu.tree', $treeFolder.data());\n\t\t}\n\n\t};\n\n\t// ALIASES\n\n\t//alias for collapse for consistency. \"Collapse\" is an ambiguous term (collapse what? All? One specific branch?)\n\tTree.prototype.closeAll = Tree.prototype.collapse;\n\t//alias for backwards compatibility because there's no reason not to.\n\tTree.prototype.openFolder = Tree.prototype.discloseFolder;\n\t//For library consistency\n\tTree.prototype.getValue = Tree.prototype.selectedItems;\n\n\t// PRIVATE FUNCTIONS\n\n\tfunction styleNodeSelected (self, $element, $icon) {//ACE\n\t\t$element.addClass('tree-selected');\n\t\t/**\n\t\tif ( $element.data('type') === 'item' && $icon.hasClass('fueluxicon-bullet') ) {\n\t\t\t$icon.removeClass('fueluxicon-bullet').addClass('glyphicon-ok'); // make checkmark\n\t\t}\n\t\t*/\n\t\t//ACE\n\t\tif ( $element.data('type') === 'item' && $icon.hasClass(self.options['unselected-icon']) ) {//ACE\n\t\t\t$icon.removeClass(self.options['unselected-icon']).addClass(self.options['selected-icon']); //ACE\n\t\t}\t\t\n\t}\n\n\tfunction styleNodeDeselected (self, $element, $icon) {//ACE\n\t\t$element.removeClass('tree-selected');\n\t\t/**\n\t\tif ( $element.data('type') === 'item' && $icon.hasClass('glyphicon-ok') ) {\n\t\t\t$icon.removeClass('glyphicon-ok').addClass('fueluxicon-bullet'); // make bullet\n\t\t}\n\t\t*/\n\t\t//ACE\n\t\tif ( $element.data('type') === 'item' && $icon.hasClass(self.options['selected-icon']) ) {\n\t\t\t$icon.removeClass(self.options['selected-icon']).addClass(self.options['unselected-icon']); // make bullet\n\t\t}\n\t}\n\n\tfunction multiSelectSyncNodes (self, clicked, selected) {\n\t\t// search for currently selected and add to selected data list if needed\n\t\t$.each(selected.$elements, function (index, element) {\n\t\t\tvar $element = $(element);\n\t\t\tif ($element[0] !== clicked.$element[0]) {\n\t\t\t\tselected.dataForEvent.push( $($element).data() );\n\t\t\t}\n\t\t});\n\n\t\tif (clicked.$element.hasClass('tree-selected')) {\n\t\t\tstyleNodeDeselected (self, clicked.$element, clicked.$icon);//ACE\n\t\t\t// set event data\n\t\t\tselected.eventType = 'deselected';\n\t\t}\n\t\telse {\n\t\t\tstyleNodeSelected(self, clicked.$element, clicked.$icon);//ACE\n\t\t\t// set event data\n\t\t\tselected.eventType = 'selected';\n\t\t\tselected.dataForEvent.push(clicked.elementData);\n\t\t}\n\t}\n\n\tfunction singleSelectSyncNodes(self, clicked, selected) {\n\t\t// element is not currently selected\n\t\tif (selected.$elements[0] !== clicked.$element[0]) {\n\t\t\tvar clearedElements = self.deselectAll(self.$element);\n\t\t\tstyleNodeSelected(self, clicked.$element, clicked.$icon);//ACE\n\t\t\t// set event data\n\t\t\tselected.eventType = 'selected';\n\t\t\tselected.dataForEvent = [clicked.elementData];\n\t\t}\n\t\telse {\n\t\t\tstyleNodeDeselected(self, clicked.$element, clicked.$icon);//ACE\n\t\t\t// set event data\n\t\t\tselected.eventType = 'deselected';\n\t\t\tselected.dataForEvent = [];\n\t\t}\n\t}\n\n\n\t// TREE PLUGIN DEFINITION\n\n\t$.fn.tree = function tree(option) {\n\t\tvar args = Array.prototype.slice.call(arguments, 1);\n\t\tvar methodReturn;\n\n\t\tvar $set = this.each(function () {\n\t\t\tvar $this = $(this);\n\t\t\tvar data = $this.data('fu.tree');\n\t\t\tvar options = typeof option === 'object' && option;\n\n\t\t\tif (!data) {\n\t\t\t\t$this.data('fu.tree', (data = new Tree(this, options)));\n\t\t\t}\n\n\t\t\tif (typeof option === 'string') {\n\t\t\t\tmethodReturn = data[option].apply(data, args);\n\t\t\t}\n\t\t});\n\n\t\treturn (methodReturn === undefined) ? $set : methodReturn;\n\t};\n\n\t$.fn.tree.defaults = {\n\t\tdataSource: function dataSource(options, callback) {},\n\t\tmultiSelect: false,\n\t\tcacheItems: true,\n\t\tfolderSelect: true,\n\t\titemSelect: true,\n\t\t/*\n\t\t* How many times `discloseAll` should be called before a stopping and firing\n\t\t* an `exceededDisclosuresLimit` event. You can force it to continue by\n\t\t* listening for this event, setting `ignore-disclosures-limit` to `true` and\n\t\t* starting `discloseAll` back up again. This lets you make more decisions\n\t\t* about if/when/how/why/how many times `discloseAll` will be started back\n\t\t* up after it exceeds the limit.\n\t\t*\n\t\t*    $tree.one('exceededDisclosuresLimit.fu.tree', function () {\n\t\t*        $tree.data('ignore-disclosures-limit', true);\n\t\t*        $tree.tree('discloseAll');\n\t\t*    });\n\t\t*\n\t\t* `disclusuresUpperLimit` defaults to `0`, so by default this trigger\n\t\t* will never fire. The true hard the upper limit is the browser's\n\t\t* ability to load new items (i.e. it will keep loading until the browser\n\t\t* falls over and dies). On the Fuel UX `index.html` page, the point at\n\t\t* which the page became super slow (enough to seem almost unresponsive)\n\t\t* was `4`, meaning 256 folders had been opened, and 1024 were attempting to open.\n\t\t*/\n\t\tdisclosuresUpperLimit: 0\n\t};\n\n\t$.fn.tree.Constructor = Tree;\n\n\t$.fn.tree.noConflict = function () {\n\t\t$.fn.tree = old;\n\t\treturn this;\n\t};\n\n\n\t// NO DATA-API DUE TO NEED OF DATA-SOURCE\n\n\t// -- BEGIN UMD WRAPPER AFTERWORD --\n}));\n// -- END UMD WRAPPER AFTERWORD --\n"],"sourceRoot":"/source/"}